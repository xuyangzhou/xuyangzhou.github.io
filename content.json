{"meta":{"title":"Jason","subtitle":"é²œè¡£æ€’é©¬å°‘å¹´æ—¶ï¼Œä¸€æ—¥çœ‹å°½é•¿å®‰èŠ±","description":"å…‰æ™¯ä¸å¾…äººï¼Œé¡»è‡¾å‘æˆä¸","author":"Jason xu","url":"http://example.com","root":"/"},"pages":[{"title":"åˆ†ç±»","date":"2024-04-07T09:24:07.000Z","updated":"2024-04-07T09:24:07.000Z","comments":true,"path":"categories/index.html","permalink":"http://example.com/categories/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2024-04-07T09:24:36.000Z","updated":"2024-04-07T09:24:36.000Z","comments":true,"path":"tags/index.html","permalink":"http://example.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"10ä¸ªè®©ä½ çˆ±ä¸é‡Šæ‰‹çš„ä¸€è¡ŒJavascriptä»£ç ","slug":"js10","date":"2023-05-08T03:01:42.000Z","updated":"2023-05-08T03:01:42.000Z","comments":true,"path":"2023/05/08/js10/","permalink":"http://example.com/2023/05/08/js10/","excerpt":"","text":"åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°†åˆ†äº« 10+ ä¸ªå®ç”¨çš„ä¸€è¡Œ JavaScript ä»£ç ï¼Œè¿™äº›ä»£ç å¯ä»¥å¸®åŠ©ä½ æé«˜ç¼–ç æ•ˆç‡å’Œä»£ç ç®€æ´åº¦ã€‚è¿™äº›ä»£ç ç‰‡æ®µå°†æ¶µç›–å„ç§ç”¨é€”ï¼Œä»æ“ä½œæ•°ç»„å’Œå­—ç¬¦ä¸²ï¼Œåˆ°æ›´é«˜çº§çš„æ¦‚å¿µï¼Œå¦‚å¼‚æ­¥ç¼–ç¨‹å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚ è·å–æ•°ç»„ä¸­çš„éšæœºå…ƒç´ ä½¿ç”¨ Math.random() å‡½æ•°å’Œæ•°ç»„é•¿åº¦å¯ä»¥è½»æ¾è·å–æ•°ç»„ä¸­çš„éšæœºå…ƒç´ ï¼š 123const arr = [1, 2, 3, 4, 5];const randomElement = arr[Math.floor(Math.random() * arr.length)];console.log(randomElement); æ•°ç»„æ‰å¹³åŒ–ä½¿ç”¨ reduce() å‡½æ•°å’Œ concat() å‡½æ•°å¯ä»¥è½»æ¾å®ç°æ•°ç»„æ‰å¹³åŒ–ï¼š 123const arr = [[1, 2], [3, 4], [5, 6]];const flattenedArr = arr.reduce((acc, cur) =&gt; acc.concat(cur), []);console.log(flattenedArr); // [1, 2, 3, 4, 5, 6] å¯¹è±¡æ•°ç»„æ ¹æ®æŸä¸ªå±æ€§å€¼è¿›è¡Œæ’åº1const sortedArray = array.sort((a, b) =&gt; (a.property &gt; b.property ? 1 : -1)); ä»æ•°ç»„ä¸­åˆ é™¤ç‰¹å®šå…ƒç´ 1const removedArray = array.filter((item) =&gt; item !== elementToRemove); æ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨é‡å¤é¡¹1const hasDuplicates = (array) =&gt; new Set(array).size !== array.length; é¦–å­—æ¯å¤§å†™1const capitalized = str.charAt(0).toUpperCase() + str.slice(1); è·å–éšæœºæ•´æ•°1const randomInt = Math.floor(Math.random() * (max - min + 1)) + min; è·å–éšæœºå­—ç¬¦ä¸²1const randomStr = Math.random().toString(36).substring(2, length); ä½¿ç”¨è§£æ„å’Œ rest è¿ç®—ç¬¦äº¤æ¢å˜é‡çš„å€¼ï¼š123let a = 1, b = 2[b, a] = [a, b]console.log(a, b) // 2, 1 å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå°é©¼å³°å¼å‘½åï¼š123const str = &#x27;hello world&#x27;const camelCase = str.replace(/\\s(.)/g, ($1) =&gt; $1.toUpperCase()).replace(/\\s/g, &#x27;&#x27;).replace(/^(.)/, ($1) =&gt; $1.toLowerCase())console.log(camelCase) // &quot;helloWorld&quot; è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„é—´éš”1const diffInDays = (dateA, dateB) =&gt; Math.floor((dateB - dateA) / (1000 * 60 * 60 * 24)); æŸ¥æ‰¾æ—¥æœŸä½äºä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©1const dayOfYear = (date) =&gt; Math.floor((date - new Date(date.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24); å¤åˆ¶å†…å®¹åˆ°å‰ªåˆ‡æ¿123const copyToClipboard = (text) =&gt; navigator.clipboard.writeText(text);copyToClipboard(&quot;Hello World&quot;); è·å–å˜é‡çš„ç±»å‹12345678910const getType = (variable) =&gt; Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();getType(&#x27;&#x27;); // stringgetType(0); // numbergetType(); // undefinedgetType(null); // nullgetType(&#123;&#125;); // objectgetType([]); // arraygetType(0); // numbergetType(() =&gt; &#123;&#125;); // function æ£€æµ‹å¯¹è±¡æ˜¯å¦ä¸ºç©º1const isEmptyObject = (obj) =&gt; Object.keys(obj).length === 0 &amp;&amp; obj.constructor === Object;","categories":[{"name":"js","slug":"js","permalink":"http://example.com/categories/js/"}],"tags":[{"name":"js","slug":"js","permalink":"http://example.com/tags/js/"}]},{"title":"10ä¸ªJavaScriptç®€æ´ç¼–ç æŠ€å·§","slug":"js-pithy","date":"2023-05-07T03:01:42.000Z","updated":"2023-05-07T03:01:42.000Z","comments":true,"path":"2023/05/07/js-pithy/","permalink":"http://example.com/2023/05/07/js-pithy/","excerpt":"","text":"åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œä»£ç ç®€æ´éå¸¸é‡è¦ã€‚ä¸ä»…å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œè¿˜èƒ½ä½¿ä»£ç æ›´æ˜“äºæ‰©å±•å’Œé‡ç”¨ã€‚ä¸‹é¢ä»‹ç»ä¸€äº›å‰ç«¯ä»£ç ç®€æ´çš„æ–¹æ³•ã€‚ å‚æ•°é»˜è®¤å€¼12345678910// ä¼ ç»Ÿå†™æ³•function greeting(name) &#123; name = name || &#x27;Guest&#x27;; console.log(&#x27;Hello, &#x27; + name + &#x27;!&#x27;);&#125;// ä½¿ç”¨é»˜è®¤å€¼function greeting(name = &#x27;Guest&#x27;) &#123; console.log(&#x27;Hello, &#x27; + name + &#x27;!&#x27;);&#125; ç®­å¤´å‡½æ•°123456var sum = function(a, b) &#123; return a + b;&#125;// ä½¿ç”¨ç®­å¤´å‡½æ•°const sum = (a, b) =&gt; a + b; æ¨¡æ¿å­—ç¬¦ä¸²1234567// ä¼ ç»Ÿå†™æ³•var name = &#x27;Alice&#x27;;console.log(&#x27;Hello, &#x27; + name + &#x27;!&#x27;);// ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²const name = &#x27;Alice&#x27;;console.log(`Hello, $&#123;name&#125;!`); å¯¹è±¡å­—é¢é‡ç®€å†™123456789101112// ä¼ ç»Ÿå†™æ³•var firstName = &#x27;John&#x27;;var lastName = &#x27;Doe&#x27;;var user = &#123; firstName: firstName, lastName: lastName&#125;;// ä½¿ç”¨ç®€å†™const firstName = &#x27;John&#x27;;const lastName = &#x27;Doe&#x27;;const user = &#123; firstName, lastName &#125;; è§£æ„èµ‹å€¼1234567891011121314// ä¼ ç»Ÿå†™æ³•var user = &#123; firstName: &#x27;John&#x27;, lastName: &#x27;Doe&#x27;&#125;;var firstName = user.firstName;var lastName = user.lastName;// ä½¿ç”¨è§£æ„èµ‹å€¼const user = &#123; firstName: &#x27;John&#x27;, lastName: &#x27;Doe&#x27;&#125;;const &#123; firstName, lastName &#125; = user; Array.prototype.map()12345678910// ä¼ ç»Ÿå†™æ³•var numbers = [1, 2, 3];var doubledNumbers = [];for (var i = 0; i &lt; numbers.length; i++) &#123; doubledNumbers.push(numbers[i] * 2);&#125;// ä½¿ç”¨map()const numbers = [1, 2, 3];const doubledNumbers = numbers.map(number =&gt; number * 2); Array.prototype.filter()123456789101112// ä¼ ç»Ÿå†™æ³•var numbers = [1, 2, 3, 4, 5];var evenNumbers = [];for (var i = 0; i &lt; numbers.length; i++) &#123; if (numbers[i] % 2 === 0) &#123; evenNumbers.push(numbers[i]); &#125;&#125;// ä½¿ç”¨filter()const numbers = [1, 2, 3, 4, 5];const evenNumbers = numbers.filter(number =&gt; number % 2 === 0); Array.prototype.reduce()12345678910// ä¼ ç»Ÿå†™æ³•var numbers = [1, 2, 3, 4, 5];var sum = 0;for (var i = 0; i &lt; numbers.length; i++) &#123; sum += numbers[i];&#125;// ä½¿ç”¨reduce()const numbers = [1, 2, 3, 4, 5];const sum = numbers.reduce((total, number) =&gt; total + number, 0); é¿å…ä½¿ç”¨å…¨å±€å˜é‡å…¨å±€å˜é‡ä¼šå¯¼è‡´å˜é‡åå†²çªå’Œæ„å¤–çš„èµ‹å€¼ï¼Œæœ€å¥½é¿å…ä½¿ç”¨ã€‚å¯ä»¥å°†éœ€è¦çš„å˜é‡å®šä¹‰åœ¨å‡½æ•°å†…éƒ¨æˆ–ä½¿ç”¨æ¨¡å—åŒ–çš„æ–¹å¼ç®¡ç†å˜é‡ã€‚ 1234567891011121314151617// ä¸æ¨èä½¿ç”¨å…¨å±€å˜é‡const name = &#x27;å¼ ä¸‰&#x27;;function getName() &#123; return name;&#125;// æ¨èä½¿ç”¨å‡½æ•°å†…éƒ¨å˜é‡function getName() &#123; const name = &#x27;å¼ ä¸‰&#x27;; return name;&#125;// æ¨èä½¿ç”¨æ¨¡å—åŒ–// moduleA.jsexport const name = &#x27;å¼ ä¸‰&#x27;;// moduleB.jsimport &#123; name &#125; from &#x27;./moduleA.js&#x27;; ä½¿ç”¨æ•°ç»„å’Œå¯¹è±¡è§£æ„è§£æ„å¯ä»¥è®©ä»£ç æ›´åŠ ç®€æ´ï¼ŒåŒæ—¶æé«˜å¯è¯»æ€§ã€‚ 1234567// æ•°ç»„è§£æ„const arr = [1, 2, 3];const [first, second, third] = arr;// å¯¹è±¡è§£æ„const obj = &#123; name: &#x27;å¼ ä¸‰&#x27;, age: 18 &#125;;const &#123; name, age &#125; = obj; ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³å¯ä»¥è®©ä»£ç æ›´åŠ ç®€æ´ï¼ŒåŒæ—¶æé«˜å¯ç»´æŠ¤æ€§ã€‚å¯ä»¥ä½¿ç”¨çº¯å‡½æ•°ã€é«˜é˜¶å‡½æ•°ã€æŸ¯é‡ŒåŒ–ç­‰æ–¹å¼ã€‚ 123456789101112131415161718// çº¯å‡½æ•°function add(a, b) &#123; return a + b;&#125;// é«˜é˜¶å‡½æ•°function double(fn) &#123; return function(num) &#123; return fn(num) * 2; &#125;&#125;// æŸ¯é‡ŒåŒ–function add(a) &#123; return function(b) &#123; return a + b; &#125;&#125; ä»¥ä¸Šæ˜¯ä¸€äº›ç®€å•çš„ç¤ºä¾‹ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æŠ€å·§å’Œæ–¹æ³•å¯ä»¥ç”¨æ¥è®©å‰ç«¯ä»£ç æ›´åŠ ç®€æ´ã€‚æ€»ä¹‹ï¼Œé€šè¿‡ä½¿ç”¨è¿™äº›æŠ€å·§å’Œæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è®©ä»£ç æ›´åŠ æ˜“äºé˜…è¯»ã€ç»´æŠ¤å’Œæ‰©å±•ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚","categories":[{"name":"js","slug":"js","permalink":"http://example.com/categories/js/"}],"tags":[{"name":"js","slug":"js","permalink":"http://example.com/tags/js/"}]},{"title":"[è¯‘] åŠ¨ç”»æ— æ³•åŠ¨ç”»åŒ–çš„å…ƒç´ ","slug":"animatingTheUnanimatable","date":"2023-05-06T03:01:42.000Z","updated":"2023-05-06T03:01:42.000Z","comments":true,"path":"2023/05/06/animatingTheUnanimatable/","permalink":"http://example.com/2023/05/06/animatingTheUnanimatable/","excerpt":"","text":"åŸæ–‡ Animating the Unanimatable åœ¨ CSS3 transitionsã€@keyframeåŠ¨ç”»å’Œå³å°†æ¨å‡ºçš„ Web Animations API ç­‰æ–°æŠ€æœ¯çš„å¸®åŠ©ä¸‹ï¼Œæˆ‘ä»¬åœ¨æ„å»ºWebåŠ¨ç”»æ–¹é¢æ‹¥æœ‰äº†æ›´å¤šçš„æ§åˆ¶åŠ›ã€‚ ç„¶è€Œï¼Œä»æœ‰ä¸€ä»¶äº‹æƒ…æ˜¯è¿™äº›æŠ€æœ¯ä¸èƒ½ç›´æ¥å¤„ç†çš„ï¼›å³åˆ—è¡¨é‡æ–°æ’åºçš„åŠ¨ç”»æ•ˆæœã€‚ å‡è®¾ä½ æœ‰è¿™æ ·ä¸€ä¸ªç»„ä»¶ï¼š 1234567891011class ArticleList extends Component &#123; render() &#123; return ( &lt;div id=&quot;article-list&quot;&gt; &#123;this.props.articles.map(article =&gt; ( &lt;Article key=&#123;article.id&#125; &#123;...article&#125; /&gt; ))&#125; &lt;/div&gt; ); &#125;&#125; æˆ‘ä»¬æœ‰ä¸€ä¸ªçˆ¶çº§ ArticleList ç»„ä»¶ï¼Œå®ƒä»¥æ–‡ç« åˆ—è¡¨ä¸ºpropsã€‚ å®ƒæŒ‰é¡ºåºæ˜ å°„å®ƒä»¬å¹¶å‘ˆç°å®ƒä»¬ã€‚ å¦‚æœåˆ—è¡¨é¡ºåºå‘ç”Ÿæ›´æ”¹ï¼ˆä¾‹å¦‚ï¼šç”¨æˆ·åˆ‡æ¢æ›´æ”¹æ’åºçš„è®¾ç½®ï¼Œé¡¹ç›®è¢«ç‚¹èµå¹¶æ›´æ”¹ä½ç½®ï¼Œä»æœåŠ¡å™¨æ¥æ”¶æ–°æ•°æ®â€¦ï¼‰ï¼ŒReactä¼šåè°ƒä¸¤ä¸ªçŠ¶æ€ï¼Œå¹¶æ›´æ–° DOMï¼Œåˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œç§»åŠ¨ç°æœ‰èŠ‚ç‚¹æˆ–é”€æ¯èŠ‚ç‚¹ã€‚ å¦‚æœé¡¹ç›®ä»å…¶åŸå§‹ä½ç½®ç§»é™¤å¹¶é‡æ–°æ’å…¥åˆ°ä¸‹æ–¹200pxå¤„ï¼Œå®ƒå¯¹äºå…ƒç´ çš„å±å¹•ä½ç½®æ²¡æœ‰æ„è¯†ã€‚ ç”±äºå…ƒç´ çš„CSSå±æ€§æ²¡æœ‰æ›´æ”¹ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨CSSè½¬æ¢æ¥åŠ¨ç”»æ˜¾ç¤ºæ­¤æ›´æ”¹ã€‚ æˆ‘ä»¬æ€æ ·æ‰èƒ½è®©æµè§ˆå™¨è¡¨ç°å¾—å¥½åƒè¿™äº›å…ƒç´ å·²ç»ç§»åŠ¨äº†ä¸€æ ·ï¼Ÿè¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆå°†å¸¦æˆ‘ä»¬ä½“éªŒä½çº§ DOM æ“ä½œã€React ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å’Œç¡¬ä»¶åŠ é€Ÿ CSS å®è·µã€‚ç”šè‡³ä¼šæœ‰ä¸€äº›åŸºç¡€æ•°å­¦ï¼ è§£å†³æ–¹æ¡ˆ TL:DR â€” æˆ‘åˆ¶ä½œäº†ä¸€ä¸ª React æ¨¡å—æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚ æ¥æº| æ¼”ç¤º ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›ç‰¹å®šæ—¶åˆ»çš„ä¿¡æ¯ã€‚æš‚ä¸”ä¸è€ƒè™‘è·å–è¿™äº›ä¿¡æ¯çš„å¤æ‚æ€§ï¼Œæˆ‘ä»¬å‡è®¾ï¼š æˆ‘ä»¬çŸ¥é“ React åªæ˜¯é‡æ–°æ¸²æŸ“ï¼ŒDOM èŠ‚ç‚¹å·²ç»é‡æ–°æ’åˆ—ã€‚ æµè§ˆå™¨è¿˜æ²¡æœ‰ç»˜åˆ¶ã€‚å°½ç®¡ DOM èŠ‚ç‚¹å¤„äºæ–°ä½ç½®ï¼Œä½†å±å¹•ä¸Šçš„å…ƒç´ å°šæœªæ›´æ–°ã€‚ æˆ‘ä»¬çŸ¥é“å…ƒç´ åœ¨å±å¹•ä¸Šçš„ä½ç½®ã€‚ æˆ‘ä»¬çŸ¥é“å…ƒç´ å°†åœ¨å“ªé‡Œé‡æ–°ç»˜åˆ¶ã€‚ æˆ‘ä»¬çš„æƒ…å†µå¯èƒ½æ˜¯è¿™æ ·çš„ï¼šæˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å« 3 ä¸ªé¡¹ç›®çš„åˆ—è¡¨ï¼Œå®ƒä»¬åªæ˜¯è¢«é¢ å€’äº†ã€‚æˆ‘ä»¬çŸ¥é“ä»–ä»¬åŸæ¥çš„ä½ç½®ï¼ˆå·¦ä¾§ï¼‰ï¼Œæˆ‘ä»¬çŸ¥é“ä»–ä»¬è¦ç§»åŠ¨åˆ°å“ªé‡Œï¼ˆå³ä¾§ï¼‰ã€‚ è¯·å¿½ç•¥æˆ‘ç¼ºä¹è‰ºæœ¯èƒ½åŠ› æ“ä½œé¡ºåºä¸€ä¸ªå°æ’æ›²ï¼šä½ å¯èƒ½ä¼šæƒŠè®¶åœ°å‘ç°å­˜åœ¨ä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æŸä¸ªæ—¶é—´ç‚¹å°†é¡¹ç›®ç»˜åˆ¶åˆ°å±å¹•ä¸Šä¹‹å‰åˆ¤æ–­å®ƒçš„ä½ç½®ã€‚ ä»”ç»†æƒ³æƒ³ï¼Œè¿™æ˜¯æœ‰é“ç†çš„ï¼›æµè§ˆå™¨å¦‚ä½•åœ¨ä¸çŸ¥é“ç¡®åˆ‡ç»˜åˆ¶ä½ç½®çš„æƒ…å†µä¸‹å°†æ–°çš„åƒç´ ç»˜åˆ¶åˆ°å±å¹•ä¸Šå‘¢ï¼Ÿ å¹¸è¿çš„æ˜¯ï¼Œè¿™ä¸æ˜¯é»‘åŒ£å­ï¼›æµè§ˆå™¨ä»¥ä¸åŒçš„æ­¥éª¤æ›´æ–°ï¼Œå¯ä»¥åœ¨è®¡ç®—å¸ƒå±€å’Œç»˜åˆ¶åˆ°å±å¹•ä¹‹é—´æ‰§è¡Œé€»è¾‘ã€‚ ä½†æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•è®¿é—®è®¡ç®—åçš„å¸ƒå±€ï¼Ÿ DOMRects æ¥æ‹¯æ•‘ï¼DOM èŠ‚ç‚¹æœ‰ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æœ¬åœ°æ–¹æ³•getBoundingClientRectã€‚å®ƒä¸ºæˆ‘ä»¬æä¾›äº†ç›®æ ‡å…ƒç´ ç›¸å¯¹äºè§†å£çš„å¤§å°å’Œä½ç½®ã€‚åœ¨è®¡ç®—æ–°å¸ƒå±€ä¹‹å‰ï¼Œå¦‚æœæˆ‘ä»¬åœ¨é¡¶éƒ¨çš„è“è‰²çŸ©å½¢ä¸Šè°ƒç”¨å®ƒï¼Œå®ƒå¯èƒ½ä¼šç»™æˆ‘ä»¬ä»¥ä¸‹ä¿¡æ¯ï¼š 123456789blueItem.getBoundingClientRect();// &#123;// top: 0,// bottom: 600,// left: 0,// right: 500,// height: 60,// width: 400// &#125; å¹¶ä¸”ï¼Œåœ¨è®¡ç®—æ–°å¸ƒå±€ä¹‹åï¼š 123456789blueItem.getBoundingClientRect();// &#123;// top: 136,// bottom: 464,// left: 0,// right: 500,// height: 60,// width: 400// &#125; getBoundingClientRect è¶³å¤Ÿèªæ˜ï¼Œå¯ä»¥è®¡ç®—å‡ºå…ƒç´ çš„æ–°å¸ƒå±€ä½ç½®ï¼ŒåŒæ—¶è€ƒè™‘å…ƒç´ çš„é«˜åº¦ã€è¾¹è·å’Œä»»ä½•å…¶ä»–ä¼šå½±å“å®ƒåœ¨è§†å£ä¸­çš„ä½ç½®çš„å˜é‡ã€‚ æœ‰äº†è¿™ä¸¤ä¸ªæ•°æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¡ç®—å‡ºå…ƒç´ ä½ç½®çš„å˜åŒ–ï¼›å®ƒçš„ delta å€¼ã€‚ Î”y &#x3D; finalTop - initialTop &#x3D; 132 - 0 &#x3D; 132 æ‰€ä»¥ï¼Œæˆ‘ä»¬çŸ¥é“å…ƒç´ å‘ä¸‹ç§»åŠ¨äº† 132pxã€‚åŒæ ·ï¼Œæˆ‘ä»¬çŸ¥é“ä¸­é—´çš„é¡¹ç›®æ ¹æœ¬æ²¡æœ‰ç§»åŠ¨ï¼ˆÎ”y &#x3D; 0pxï¼‰ï¼Œæœ€åä¸€ä¸ªé¡¹ç›®å‘ä¸Šç§»åŠ¨äº†132pxï¼ˆÎ”y &#x3D; -132pxï¼‰ã€‚ é—®é¢˜åœ¨äºï¼Œè™½ç„¶æˆ‘ä»¬çŸ¥é“æ‰€æœ‰è¿™äº›äº‹å®ï¼Œä½†DOMå³å°†æ›´æ–°ï¼›åœ¨çœ¨çœ¼é—´ï¼Œé‚£äº›ç›’å­å°†ç¬é—´å¤„äºå®ƒä»¬çš„æ–°ä½ç½®ï¼ è¿™æ˜¯æˆ‘ä»¬å·¥å…·åº“ä¸­çš„ä¸‹ä¸€ä¸ªå·¥å…·çš„ç”¨æ­¦ä¹‹åœ°ï¼šrequestAnimationFrameã€‚ è¿™æ˜¯ window å¯¹è±¡ä¸Šçš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒå‘Šè¯‰æµè§ˆå™¨â€œå˜¿ï¼Œåœ¨ä½ å¯¹å±å¹•è¿›è¡Œä»»ä½•æ›´æ”¹ä¹‹å‰ï¼Œä½ èƒ½å…ˆè¿è¡Œè¿™æ®µä»£ç å—ï¼Ÿâ€ã€‚è¿™æ˜¯ä¸€ç§åœ¨æ›´æ–°å…ƒç´ ä¹‹å‰å¿«é€Ÿè¿›è¡Œä»»ä½•æ‰€éœ€è°ƒæ•´çš„æ–¹æ³•ã€‚ å¦‚æœåœ¨æµè§ˆå™¨ç»˜åˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬åº”ç”¨æ›´æ”¹çš„é€†å‡½æ•°æ€ä¹ˆåŠï¼Ÿæƒ³è±¡ä¸€ä¸‹è¿™ä¸ª CSSï¼š 1234567891011.blue-item &#123; top: -132px;&#125;.purple-item &#123; top: 0;&#125;.fuscia-item &#123; top: 132px;&#125; æµè§ˆå™¨ä¼šç»˜åˆ¶æ­¤æ›´æ–°ï¼Œä½†ç»˜åˆ¶ä¸ä¼šæ”¹å˜ä»»ä½•ä¸œè¥¿ï¼›DOM èŠ‚ç‚¹çš„ä½ç½®å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†æˆ‘ä»¬å·²ç»ç”¨ CSS æŠµæ¶ˆäº†è¿™ç§å˜åŒ–ã€‚ è¿™æ˜¯ä¸ªæœ‰æŠ€å·§çš„æ“ä½œï¼Œè®©æˆ‘ä»¬ç®€è¦å›é¡¾ä¸€ä¸‹åˆšæ‰å‘ç”Ÿäº†ä»€ä¹ˆï¼š React æ¸²æŸ“æˆ‘ä»¬çš„åˆå§‹çŠ¶æ€ï¼Œè“è‰²é¡¹ç›®åœ¨é¡¶éƒ¨ã€‚æˆ‘ä»¬ä½¿ç”¨ getBoundingClientRect æ¥ç¡®å®šé¡¹ç›®çš„ä½ç½®ã€‚ React æ”¶åˆ° propsï¼šé¡¹ç›®å·²è¢«æ’¤é”€ï¼ç°åœ¨è“è‰²é¡¹ç›®åœ¨åº•éƒ¨ã€‚ æˆ‘ä»¬ä½¿ç”¨ getBoundingClientRect æ¥ç¡®å®šé¡¹ç›®ç°åœ¨çš„ä½ç½®ï¼Œå¹¶è®¡ç®—ä½ç½®çš„å˜åŒ–ã€‚ æˆ‘ä»¬ä½¿ç”¨ requestAnimationFrame å‘Šè¯‰ DOM åº”ç”¨ä¸€äº› CSS æ¥æ’¤é”€è¿™ä¸ªæ–°çš„å˜åŒ–ï¼›å¦‚æœå…ƒç´ çš„æ–°ä½ç½®ä½ 100pxï¼Œæˆ‘ä»¬åº”ç”¨ CSS ä½¿å…¶é«˜ 100pxã€‚ åˆ°äº†åŠ¨ç”»æ—¶é—´äº†å¥½çš„ï¼Œæˆ‘ä»¬ç¡®å®å®Œæˆäº†æŸäº›äº‹æƒ…ï¼›æˆ‘ä»¬ä½¿å¾— DOM çš„å˜åŒ–å¯¹ç”¨æˆ·å®Œå…¨ä¸å¯è§ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªå¾ˆæœ‰è¶£çš„èŠ±æ‹›ï¼Œä½†ç°åœ¨å¯èƒ½è¿˜ä¸æ¸…æ¥šå®ƒå¦‚ä½•å¸®åŠ©æˆ‘ä»¬ã€‚ é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨å¤„äºä¸€ä¸ªæƒ…å†µä¸‹ï¼Œæ™®é€šçš„ CSS è¿‡æ¸¡æ•ˆæœå¯ä»¥å†æ¬¡ä½¿ç”¨äº†ã€‚ä¸ºäº†å°†è¿™äº›å…ƒç´ åŠ¨ç”»åˆ°å®ƒä»¬çš„æ–°ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªè¿‡æ¸¡æ•ˆæœå¹¶æ’¤æ¶ˆè¿™äº›äººä¸ºçš„ä½ç½®æ›´æ”¹ã€‚ ç»§ç»­ä½¿ç”¨æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ï¼šæˆ‘ä»¬çš„è“è‰²é¡¹å®é™…ä¸Šæ˜¯æœ€åä¸€é¡¹ï¼Œä½†å®ƒçœ‹èµ·æ¥åƒæ˜¯ç¬¬ä¸€é¡¹ã€‚å®ƒçš„ CSS å¦‚ä¸‹ï¼š 123.blue-item &#123; top: -132px;&#125; ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ›´æ–° CSSï¼Œä½¿å…¶çœ‹èµ·æ¥åƒè¿™æ ·ï¼š 1234.blue-item &#123; transition: top 500ms; top: 0;&#125; è“è‰²é¡¹ç›®ç°åœ¨å°†åœ¨åŠç§’å†…ä»é¡¶éƒ¨ä½ç½®å‘ä¸‹æ»‘åŠ¨åˆ°åº•éƒ¨ä½ç½®ã€‚ä¸‡å²ï¼æˆ‘ä»¬å·²ç»åŠ¨ç”»åŒ–äº†ä¸€äº›ä¸œè¥¿ã€‚ è¿™ç§æŠ€æœ¯ç”± Google çš„ Paul Lewis æ¨å¹¿ï¼Œä»–ç§°ä¹‹ä¸º FLIP æŠ€æœ¯ã€‚FLIP æ˜¯Firstã€Lastã€I nverseã€P lay çš„é¦–å­—æ¯ç¼©å†™è¯ã€‚ è®¡ç®—ç¬¬ä¸€ä¸ªä½ç½®ã€‚ è®¡ç®—æœ€åä½ç½®ã€‚ åè½¬ä½ç½® æ’­æ”¾åŠ¨ç”» æˆ‘ä»¬çš„ç‰ˆæœ¬æœ‰äº›ä¸åŒï¼Œä½†åŸç†æ˜¯ç›¸åŒçš„ã€‚ å¯¹DOMçš„ç®€è¦æ¢ç©¶åœ¨å­¦ä¹ è¿™é¡¹æŠ€æœ¯å’Œç¼–å†™æˆ‘çš„æ¨¡å—æ—¶ï¼Œæˆ‘å­¦åˆ°äº†å¾ˆå¤šå…³äº DOM æ¸²æŸ“çš„çŸ¥è¯†ã€‚è™½ç„¶æˆ‘å­¦åˆ°çš„å¤§éƒ¨åˆ†å†…å®¹è¶…å‡ºäº†æœ¬æ–‡çš„èŒƒå›´ï¼Œä½†æˆ‘ä»¬åº”è¯¥å¿«é€Ÿäº†è§£ä¸€ä¸‹ï¼šç»˜ç”»å’Œåˆæˆä¹‹é—´çš„åŒºåˆ«ï¼Œä»¥åŠå®ƒå¯¹é€‰æ‹©ç¡¬ä»¶åŠ é€Ÿ CSS å±æ€§çš„å½±å“ã€‚ æœ€åˆï¼Œæµè§ˆå™¨é€šè¿‡ CPU å®Œæˆæ‰€æœ‰å·¥ä½œã€‚è¿‘å¹´æ¥ï¼Œä¸€äº›éå¸¸èªæ˜çš„äººå‘ç°å¯ä»¥å°†æŸäº›ä»»åŠ¡å§”æ‰˜ç»™ GPU ä»¥å¤§å¹…æé«˜æ€§èƒ½ï¼›å…·ä½“æ¥è¯´ï¼Œå½“é™æ€å†…å®¹çš„â€œçº¹ç†â€æ²¡æœ‰æ”¹å˜æ—¶ã€‚ ä¸»è¦ç›®æ ‡æ˜¯åŠ å¿«æ»šåŠ¨é€Ÿåº¦ï¼›å½“æ‚¨å‘ä¸‹æ»šåŠ¨é¡µé¢æ—¶ï¼Œæ²¡æœ‰ä»»ä½•å…ƒç´ å‘ç”Ÿå˜åŒ–ï¼Œå®ƒä»¬åªæ˜¯å‘ä¸Šæ»‘åŠ¨ã€‚æµè§ˆå™¨çš„äººå¾ˆå‹å–„ï¼Œä¹Ÿå…è®¸æŸäº› css å±æ€§ä»¥ç›¸åŒçš„æ–¹å¼å·¥ä½œã€‚ é€šè¿‡ä½¿ç”¨CSS å±æ€§çš„å˜æ¢å¥—ä»¶â€”â€”å¹³ç§»ã€ç¼©æ”¾ã€æ—‹è½¬ã€å€¾æ–œç­‰â€”â€”ä»¥åŠä¸é€æ˜åº¦ï¼Œæˆ‘ä»¬ä¸ä¼šæ”¹å˜å…ƒç´ çš„çº¹ç†ã€‚å¦‚æœçº¹ç†æ²¡æœ‰æ”¹å˜ï¼Œåˆ™ä¸å¿…åœ¨æ¯ä¸€å¸§ä¸Šéƒ½é‡æ–°ç»˜åˆ¶ï¼›å®ƒå¯ä»¥ç”± GPU åˆæˆã€‚è¿™å°±æ˜¯å®ç° 60+fps åŠ¨ç”»çš„æ–¹æ³•ã€‚ å¦‚æœæ‚¨æƒ³äº†è§£æœ‰å…³æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹çš„æ›´å¤šä¿¡æ¯ï¼ˆæ‚¨åº”è¯¥è¿™æ ·åšï¼æ—¢æœ‰è¶£åˆå®ç”¨ï¼‰ï¼Œæˆ‘åœ¨ä¸‹é¢æä¾›äº†ä¸€äº›é“¾æ¥ã€‚ ä½†æ˜¯ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬åº”è¯¥ä½¿ç”¨ transform è€Œä¸æ˜¯ topï¼š 1234.blue-item &#123; transition: transform 500ms; transform: translateY(0px);&#125; ç¼ºå¤±çš„éƒ¨åˆ†ï¼šReact æ³¨æ„ï¼šè¿™ç¯‡æ–‡ç« æœ€åˆæ˜¯å¾ˆä¹…ä»¥å‰å†™çš„ï¼Œç‰¹åˆ«æ˜¯è¿™ä¸€éƒ¨åˆ†çš„ä»£ç è¿˜æ²¡æœ‰å¾ˆå¥½åœ°è€åŒ–ã€‚ä½¿ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å·²è¢«å¼ƒç”¨ï¼Œå¹¶ä¸”å¼ºçƒˆå»ºè®®ä¸è¦ä½¿ç”¨ ReactDOM.findDOMNodeã€‚æœ¬èŠ‚ä¸­çš„æ€è·¯æ˜¯å¯é ï¼Œä½†ä½†è¯·ä¸è¦å°è¯•é‡ç”¨æä¾›çš„ä»£ç ï¼ React å¦‚ä½•ä¸è¿™ä¸€æŠ€æœ¯ç»“åˆï¼Ÿä»¤äººé«˜å…´çš„æ˜¯ï¼ŒReact ä¸è¿™ä¸€æŠ€æœ¯å®Œç¾å¥‘åˆã€‚ æ¯ä¸ªå­å…ƒç´ éƒ½éœ€è¦ä¸¤ä¸ªé‡è¦çš„å±æ€§æ‰èƒ½ä½¿å…¶æ­£å¸¸è¿ä½œï¼šï¼š æ¯ä¸ªå­å…ƒç´ éƒ½éœ€è¦ä¸€ä¸ªå”¯ä¸€çš„â€keyâ€å±æ€§ï¼Œè¿™æ˜¯æˆ‘ä»¬ç”¨æ¥åŒºåˆ†å®ƒä»¬çš„ã€‚ æ¯ä¸ªå­å…ƒç´ éƒ½éœ€è¦ä¸€ä¸ª refï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŸ¥æ‰¾ DOM èŠ‚ç‚¹å¹¶è®¡ç®—å…¶è¾¹ç•Œæ¡†ã€‚ è·å–ç¬¬ä¸€ä¸ªä½ç½®æ¯å½“ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ propsï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥æ˜¯å¦éœ€è¦åŠ¨ç”»ã€‚æœ€æ—©çš„æœºä¼šæ˜¯åœ¨ componentWillReceiveProps ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ã€‚ 12345678910111213141516171819class ArticleList extends Component &#123; componentWillReceiveProps() &#123; this.props.children.forEach(child =&gt; &#123; // Find the ref for this specific child. const ref = this.refs[child.key]; // Look up the DOM node const domNode = ReactDOM.findDOMNode(ref); // Calculate the bounding box const boundingBox = domNode.getBoundingClientRect(); // Store that box in the state, by its key. this.setState(&#123; [child.key]: boundingBox, &#125;); &#125;); &#125;&#125; åœ¨è¿™ä¸ªè¿‡ç¨‹çš„ç»“å°¾ï¼Œæˆ‘ä»¬çš„ state å°†å……æ»¡ DOMRect å¯¹è±¡ï¼Œå‡†ç¡®åœ°æè¿°æ¯ä¸ªå­å…ƒç´ åœ¨é¡µé¢ä¸Šçš„ä½ç½®ã€‚ è·å¾—æœ€åä½ç½®ä¸‹ä¸€ä¸ªä»»åŠ¡æ˜¯å¼„æ¸…æ¥šäº‹ç‰©çš„å»å‘ã€‚ è¿™é‡Œè¦åšå‡ºçš„éå¸¸é‡è¦çš„åŒºåˆ«æ˜¯ React çš„ *render* æ–¹æ³•ä¸ä¼šç«‹å³ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚æˆ‘å¯¹åº•å±‚ç»†èŠ‚æœ‰ç‚¹æ¨¡ç³Šï¼Œä½†è¿™ä¸ªè¿‡ç¨‹çœ‹èµ·æ¥æœ‰ç‚¹åƒè¿™æ ·ï¼š renderè¿”å›å®ƒå¸Œæœ› DOM æˆä¸ºä»€ä¹ˆçš„è¡¨ç¤ºï¼Œ React å°†è¿™ç§è¡¨ç¤ºä¸ DOM çš„å®é™…çŠ¶æ€ç›¸åè°ƒï¼Œå¹¶åº”ç”¨å·®å¼‚ï¼Œ æµè§ˆå™¨æ³¨æ„åˆ°æœ‰äº›ä¸œè¥¿å‘ç”Ÿäº†å˜åŒ–ï¼Œå¹¶è®¡ç®—å‡ºæ–°çš„å¸ƒå±€ï¼Œ React çš„ componentDidUpdate ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è§¦å‘ï¼Œ æµè§ˆå™¨å°†æ›´æ”¹ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚ è¿™ä¸ªè¿‡ç¨‹çš„ç¾å¦™ä¹‹å¤„åœ¨äºï¼Œæˆ‘ä»¬æœ‰æœºä¼šåœ¨è®¡ç®—å¸ƒå±€ä¹‹åä½†åœ¨å±å¹•æ›´æ–°ä¹‹å‰è¿æ¥åˆ° DOM çš„çŠ¶æ€ã€‚ ä¸‹é¢æ˜¯ä»£ç ï¼š 12345678componentDidUpdate(previousProps) &#123; previousProps.children.forEach(child =&gt; &#123; let domNode = ReactDOM.findDOMNode(this.refs[child.key]); const newBox = domNode.getBoundingClientRect(); // ...more to come &#125;);&#125; åè½¬æˆ‘ä»¬ç°åœ¨çŸ¥é“ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ï¼Œæ²¡æœ‰ä¸€æ¯«ç§’çš„ç©ºé—²æ—¶é—´ï¼DOM å³å°†æ›´æ–°ï¼ æˆ‘ä»¬å°†ä½¿ç”¨ requestAnimationFrame æ¥ç¡®ä¿æˆ‘ä»¬çš„æ›´æ”¹åœ¨è¯¥å¸§ä¹‹å‰å®Œæˆã€‚ æˆ‘ä»¬ç»§ç»­ç¼–å†™ componentDidUpdate æ–¹æ³•ï¼š 123456789101112131415161718componentDidUpdate(previousProps) &#123; previousProps.children.forEach(child =&gt; &#123; let domNode = ReactDOM.findDOMNode(this.refs[child.key]); const newBox = domNode.getBoundingClientRect(); const oldBox = this.state[key]; const deltaX = oldBox.left - newBox.left; const deltaY = oldBox.top - newBox.top; requestAnimationFrame(() =&gt; &#123; // Before the DOM paints, Invert it to its old position domNode.style.transform = `translate($&#123;deltaX&#125;px, $&#123;deltaY&#125;px)`; // Ensure it inverts it immediately domNode.style.transition = &#x27;transform 0s&#x27;; &#125;); &#125;);&#125; æ­¤æ—¶ï¼Œè¯¥æ–¹æ³•è¿è¡Œåï¼Œæˆ‘ä»¬çš„ DOM èŠ‚ç‚¹å°†é‡æ–°æ’åˆ—ï¼Œä½†å®ƒä»¬åœ¨å±å¹•ä¸Šçš„ä½ç½®å°†ä¿æŒä¸å˜ã€‚å¤ªæ£’äº†ï¼åªå‰©ä¸‹æœ€åä¸€æ­¥äº†â€¦ æ’­æ”¾123456789101112131415161718192021222324252627componentDidUpdate(previousProps) &#123; previousProps.children.forEach(child =&gt; &#123; let domNode = ReactDOM.findDOMNode(this.refs[child.key]); const newBox = domNode.getBoundingClientRect(); const oldBox = this.state[key]; const deltaX = oldBox.left - newBox.left; const deltaY = oldBox.top - newBox.top; requestAnimationFrame(() =&gt; &#123; domNode.style.transform = `translate($&#123;deltaX&#125;px, $&#123;deltaY&#125;px)`; domNode.style.transition = &#x27;transform 0s&#x27;; requestAnimationFrame(() =&gt; &#123; // In order to get the animation to play, we&#x27;ll need to wait for // the &#x27;invert&#x27; animation frame to finish, so that its inverted // position has propagated to the DOM. // // Then, we remove the transform, reverting it to its natural // state, and apply a transition so it does so smoothly. domNode.style.transform = &#x27;&#x27;; domNode.style.transition = &#x27;transform 500ms&#x27;; &#125;); &#125;); &#125;);&#125; å“ˆï¼æˆ‘ä»¬å·²ç»å®Œæˆäº†ï¼Œæˆ‘ä»¬å·²ç»ä¸ºä¸å¯åŠ¨ç”»çš„å…ƒç´ æ·»åŠ äº†åŠ¨ç”»æ•ˆæœã€‚","categories":[{"name":"å¤–æ–‡ç¿»è¯‘","slug":"å¤–æ–‡ç¿»è¯‘","permalink":"http://example.com/categories/%E5%A4%96%E6%96%87%E7%BF%BB%E8%AF%91/"}],"tags":[{"name":"js","slug":"js","permalink":"http://example.com/tags/js/"},{"name":"åŠ¨ç”»","slug":"åŠ¨ç”»","permalink":"http://example.com/tags/%E5%8A%A8%E7%94%BB/"}]},{"title":"10ä¸ªè¶…çº§å®ç”¨çš„typescriptä½¿ç”¨æŠ€å·§","slug":"typescript-eg","date":"2023-05-04T04:00:00.000Z","updated":"2023-05-04T04:00:00.000Z","comments":true,"path":"2023/05/04/typescript-eg/","permalink":"http://example.com/2023/05/04/typescript-eg/","excerpt":"","text":"æ¦‚è§ˆï¼šåœ¨å®é™…çš„å¼€å‘å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œç§¯ç´¯äº†ä¸€äº›å¸¸è§åˆè¶…çº§å¥½ç”¨çš„ typescript æŠ€å·§å’Œä»£ç ç‰‡æ®µï¼ŒåŒ…æ‹¬æ•´ç†çš„å…¶ä»–å¤§ç¥çš„tsä½¿ç”¨æŠ€å·§ï¼Œä»Šå¤©ç­›é€‰äº† 10+ ä¸ªï¼Œä»¥ä¾›å¤§å®¶å‚è€ƒã€‚ ä½¿ç”¨äº¤å‰ç±»å‹æ¥åˆå¹¶å¤šä¸ªç±»å‹1234567891011121314type User = &#123; name: string;&#125;;type Admin = &#123; role: string;&#125;;type UserAndAdmin = User &amp; Admin;const user: UserAndAdmin = &#123; name: &quot;John&quot;, role: &quot;admin&quot;&#125;; ä½¿ç”¨è”åˆç±»å‹æ¥å…è®¸å¤šä¸ªç±»å‹1234567type Status = &quot;success&quot; | &quot;error&quot; | &quot;loading&quot;;function showMessage(status: Status, message: string) &#123; // ...&#125;showMessage(&quot;success&quot;, &quot;Operation completed successfully&quot;); ä½¿ç”¨ç±»å‹å®ˆå«æ¥åˆ¤æ–­å˜é‡çš„ç±»å‹12345678910111213141516type User = &#123; name: string;&#125;;type Admin = &#123; name: string; role: string;&#125;;function greet(user: User | Admin) &#123; if (&quot;role&quot; in user) &#123; console.log(`Hello, $&#123;user.name&#125;, you are an admin`); &#125; else &#123; console.log(`Hello, $&#123;user.name&#125;`); &#125;&#125; ä½¿ç”¨optional chainingæ“ä½œç¬¦(?.)å’Œnullish coalescingæ“ä½œç¬¦(??)æ¥ç®€åŒ–ä»£ç 12345678const user = &#123; name: &quot;John&quot;, address: &#123; city: null &#125;&#125;;const cityName = user?.address?.city ?? &quot;unknown&quot;; ä½¿ç”¨è£…é¥°å™¨æ¥æ‰©å±•ç±»å’Œæ–¹æ³•çš„è¡Œä¸º12345678910111213141516171819202122function log(target: any, propertyKey: string, descriptor: PropertyDescriptor) &#123; const originalMethod = descriptor.value; descriptor.value = function(...args: any[]) &#123; console.log(`Calling method $&#123;propertyKey&#125; with arguments: $&#123;JSON.stringify(args)&#125;`); return originalMethod.apply(this, args); &#125;; return descriptor;&#125;class User &#123; constructor(public name: string, public age: number) &#123;&#125; @log greet() &#123; console.log(`Hello, my name is $&#123;this.name&#125; and I am $&#123;this.age&#125; years old`); &#125;&#125;const user = new User(&quot;John&quot;, 30);user.greet(); ä½¿ç”¨ Record æ¥å®šä¹‰é”®å€¼å¯¹ç±»å‹1234567type AgeMap = Record&lt;string, number&gt;;const ages: AgeMap = &#123; John: 30, Mary: 25, Mike: 35,&#125;; ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²å’Œ keyof æ¥ç”Ÿæˆå±æ€§åç§°12345678910111213interface Person &#123; name: string; age: number;&#125;function getProperty&lt;T, K extends keyof T&gt;(obj: T, key: K): T[K] &#123; return obj[key];&#125;const person: Person = &#123; name: &quot;John&quot;, age: 30 &#125;;const propertyName = &quot;name&quot;;console.log(getProperty(person, propertyName as keyof Person));console.log(getProperty(person, &quot;age&quot;)); åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²å’Œ keyof æ“ä½œç¬¦æ¥ç”Ÿæˆå±æ€§åç§°ï¼Œå¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•° getPropertyã€‚ ä½¿ç”¨ç±»å‹ä¿æŠ¤æ¥æ£€æŸ¥å˜é‡çš„ç±»å‹12345678910111213141516171819interface Dog &#123; name: string; breed: string;&#125;interface Cat &#123; name: string; age: number;&#125;function isDog(pet: Dog | Cat): pet is Dog &#123; return (pet as Dog).breed !== undefined;&#125;const dog: Dog = &#123; name: &quot;Max&quot;, breed: &quot;Labrador&quot; &#125;;const cat: Cat = &#123; name: &quot;Whiskers&quot;, age: 3 &#125;;console.log(isDog(dog)); // trueconsole.log(isDog(cat)); // false åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ isDog å‡½æ•°æ¥æ£€æŸ¥å˜é‡ pet æ˜¯å¦æ˜¯ Dog ç±»å‹ã€‚ ä½¿ç”¨ Exclude å’Œ Extract æ¥è¿‡æ»¤ç±»å‹123type T1 = string | number | boolean;type T2 = Exclude&lt;T1, boolean&gt;;type T3 = Extract&lt;T1, string&gt;; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Exclude å’Œ Extract ç±»å‹æ¥è¿‡æ»¤ T1 ç±»å‹ã€‚T2 ç±»å‹å°†ç§»é™¤ boolean ç±»å‹ï¼Œè€Œ T3 ç±»å‹å°†åªä¿ç•™ string ç±»å‹ã€‚ ä½¿ç”¨ Partial å’Œ Required æ¥è½¬æ¢ç±»å‹1234567interface Person &#123; name: string; age: number;&#125;type PartialPerson = Partial&lt;Person&gt;;type RequiredPerson = Required&lt;PartialPerson&gt;; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Partial å’Œ Required ç±»å‹æ¥è½¬æ¢ç±»å‹ã€‚PartialPerson ç±»å‹å°†è½¬æ¢ä¸ºå¯é€‰çš„å±æ€§ï¼Œè€Œ RequiredPerson ç±»å‹å°†è½¬æ¢ä¸ºå¿…å¡«çš„å±æ€§ã€‚ ä½¿ç”¨ Pick å’Œ Omit æ¥é€‰æ‹©å’Œæ’é™¤å±æ€§12345678interface Person &#123; name: string; age: number; address: string;&#125;type PersonNameAge = Pick&lt;Person, &quot;name&quot; | &quot;age&quot;&gt;;type PersonWithoutAddress = Omit&lt;Person, &quot;address&quot;&gt;; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Pick å’Œ Omit ç±»å‹æ¥é€‰æ‹©å’Œæ’é™¤å±æ€§ã€‚PersonNameAge ç±»å‹å°†åªä¿ç•™ name å’Œ age å±æ€§ï¼Œè€Œ PersonWithoutAddress ç±»å‹å°†æ’é™¤ address å±æ€§ã€‚ ä½¿ç”¨ as const æ¥åˆ›å»ºåªè¯»æ•°ç»„å’Œå¯¹è±¡12const arr = [&quot;foo&quot;, &quot;bar&quot;] as const;const obj = &#123; name: &quot;John&quot;, age: 30 &#125; as const; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ as const æ¥åˆ›å»ºåªè¯»æ•°ç»„å’Œå¯¹è±¡ã€‚arr å’Œ obj å°†ä¸å¯ä¿®æ”¹ã€‚ ä½¿ç”¨ Readonly æ¥ä½¿å¯¹è±¡çš„æ‰€æœ‰å±æ€§å˜ä¸ºåªè¯»12345678910interface Person &#123; name: string; age: number; address: string;&#125;type ReadonlyPerson = Readonly&lt;Person&gt;;const person: ReadonlyPerson = &#123; name: &quot;John&quot;, age: 30, address: &quot;123 Main St.&quot; &#125;;person.age = 31; // Error: Cannot assign to &#x27;age&#x27; because it is a read-only property. åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Readonly æ¥ä½¿å¯¹è±¡çš„æ‰€æœ‰å±æ€§å˜ä¸ºåªè¯»ã€‚ReadonlyPerson ç±»å‹å°†å…·æœ‰ä¸ Person ç›¸åŒçš„å±æ€§ï¼Œä½†æ‰€æœ‰å±æ€§éƒ½æ˜¯åªè¯»çš„ã€‚ ä½¿ç”¨ Required æ¥ä½¿å¯¹è±¡çš„æ‰€æœ‰å±æ€§å˜ä¸ºå¿…éœ€çš„123456789interface Person &#123; name?: string; age?: number; address?: string;&#125;type RequiredPerson = Required&lt;Person&gt;;const person: RequiredPerson = &#123; name: &quot;John&quot;, age: 30, address: &quot;123 Main St.&quot; &#125;; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Required æ¥ä½¿å¯¹è±¡çš„æ‰€æœ‰å±æ€§å˜ä¸ºå¿…éœ€çš„ã€‚RequiredPerson ç±»å‹å°†å…·æœ‰ä¸ Person ç›¸åŒçš„å±æ€§ï¼Œä½†æ‰€æœ‰å±æ€§éƒ½æ˜¯å¿…éœ€çš„ã€‚ ä½¿ç”¨ NonNullable æ¥ç§»é™¤å¯¹è±¡çš„æ‰€æœ‰å¯ç©ºå±æ€§123456789interface Person &#123; name?: string; age?: number | null; address?: string | null;&#125;type NonNullablePerson = NonNullable&lt;Person&gt;;const person: NonNullablePerson = &#123; name: &quot;John&quot;, age: 30, address: &quot;123 Main St.&quot; &#125;;","categories":[{"name":"js","slug":"js","permalink":"http://example.com/categories/js/"}],"tags":[{"name":"typescript","slug":"typescript","permalink":"http://example.com/tags/typescript/"}]},{"title":"[è¯‘] ECMAScript 2023æœ‰å“ªäº›æ–°ç‰¹æ€§","slug":"javascript","date":"2023-04-20T03:01:42.000Z","updated":"2023-04-20T03:01:42.000Z","comments":true,"path":"2023/04/20/javascript/","permalink":"http://example.com/2023/04/20/javascript/","excerpt":"","text":"åŸæ–‡ Whatâ€™s new in ECMAScript 20232023.4.18 by Pawel åœ¨é˜…è¯»äº†ä¸Šä¸€æ¬¡ TC39 ä¼šè®®çš„è®°å½•ä¹‹åï¼Œä¼¼ä¹å·²ç»çŸ¥é“äº†å³å°†æ¨å‡ºçš„ JavaScript çš„æ–°åŠŸèƒ½åˆ—è¡¨ã€‚ECMAScriptè§„èŒƒçš„æœ€ç»ˆç‰ˆæœ¬é¢„è®¡å°†åœ¨ 6 æœˆåº•å‘å¸ƒã€‚ æœ€åè€Œä¸”æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬æ­£åœ¨å‰Šå‡ ES2023ã€‚æˆ‘ä»¬å°†å…¶å†»ç»“ï¼Œæˆ–è€…æ›´ç¡®åˆ‡åœ°è¯´ï¼Œæˆ‘åº”è¯¥è¯´æˆ‘ä»¬å·²ç»å°†å…¶å†»ç»“ã€‚æˆ‘ä»¬ä¸å¸Œæœ›å†æœ‰ä»»ä½•é‡å¤§çš„ç¼–è¾‘æ€§å˜åŒ–ã€‚å¯èƒ½ä¼šæœ‰è‡³å°‘å‡ ä¸ªéå¸¸å°çš„ç¼–è¾‘æ€§å¾®è°ƒï¼Œä½†æ²¡æœ‰å¤§çš„å˜åŒ–ã€‚ è®©æˆ‘åˆ†äº«ä¸€ä¸‹æ‰€æœ‰è¾¾åˆ°ç¬¬4é˜¶æ®µçš„æ–°åŠŸèƒ½åˆ—è¡¨ï¼Œè¿™äº›åŠŸèƒ½é¢„è®¡å°†åŒ…å«åœ¨å³å°†æ¨å‡ºçš„ECMAScriptç‰ˆæœ¬ä¸­ã€‚å°±åƒæˆ‘åœ¨2022ã€ 2021ã€ 2020ã€ 2019ã€ 2018,ã€2017 å’Œ 2016 å¹´æ‰€åšçš„é‚£æ ·ã€‚ ä»åå‘å‰æŸ¥æ‰¾æ•°ç»„å…ƒç´  Hashbangè¯­æ³• Symbolä½œä¸ºWeakMapé”® é€šè¿‡å¤åˆ¶æ”¹å˜æ•°ç»„ ä»åå‘å‰æŸ¥æ‰¾æ•°ç»„å…ƒç´ ç”±Wenlu Wangæå‡ºçš„â€œä»åå‘å‰æŸ¥æ‰¾æ•°ç»„å…ƒç´ â€ææ¡ˆåœ¨Arrayå’ŒTypedArrayåŸå‹ä¸Šæ·»åŠ äº†findLast()å’ŒfindLastIndex()æ–¹æ³•ã€‚å®ƒä»¬ä¸find()å’ŒfindIndex()æ–¹æ³•å…·æœ‰ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†é¡ºåºç›¸åã€‚è¿™ä¸¤ç§æ–¹æ³•å¾ˆæ–¹ä¾¿ï¼Œè®©æˆ‘ä»¬é¿å…åˆ›å»ºä¸´æ—¶å‰¯æœ¬ã€çªå˜å’Œæ··æ·†çš„ç´¢å¼•ã€‚ 1234567891011121314const isEven = (number) =&gt; number % 2 === 0;const numbers = [1, 2, 3, 4];â€‹// ä»ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ªæŸ¥æ‰¾console.log(numbers.find(isEven));// 2console.log(numbers.findIndex(isEven));// 1â€‹// ä»æœ€åä¸€ä¸ªåˆ°ç¬¬ä¸€ä¸ªæŸ¥æ‰¾console.log(numbers.findLast(isEven));// 4console.log(numbers.findLastIndex(isEven));// 3 Hashbangè¯­æ³•Hashbangï¼Œä¹Ÿç§°ä¸ºshebang ï¼Œæ˜¯å¯æ‰§è¡Œè„šæœ¬å¼€å¤´çš„ä¸€ç³»åˆ—å­—ç¬¦ï¼Œç”¨äºå®šä¹‰è¦è¿è¡Œçš„ç¨‹åºçš„è§£é‡Šå™¨ã€‚å½“Unixå†…æ ¸çš„ç¨‹åºåŠ è½½å™¨æ‰§è¡ŒJavaScriptç¨‹åºæ—¶ï¼Œä¸»æœºä¼šå‰¥ç¦»hashbangä»¥ç”Ÿæˆæœ‰æ•ˆçš„æºä»£ç ï¼Œç„¶åå°†å…¶ä¼ é€’ç»™å¼•æ“ã€‚Bradley Fariasæå‡ºçš„Hashbangè¯­æ³•ææ¡ˆè§„èŒƒäº†è¿™ä¸ªè¿‡ç¨‹ã€‚ 123#!/usr/bin/env nodeâ€‹console.log(&#x27;hi ğŸ‘‹&#x27;); Symbolä½œä¸ºWeakMapé”®åœ¨JavaScriptä¸­ï¼Œå¯¹è±¡å’ŒSymbolä¿è¯æ˜¯å”¯ä¸€çš„ï¼Œä¸èƒ½é‡æ–°åˆ›å»ºï¼Œè¿™ä½¿å®ƒä»¬éƒ½æˆä¸ºWeakMapé”®çš„ç†æƒ³å€™é€‰è€…ã€‚å…ˆå‰çš„ç‰ˆæœ¬æˆ–è§„èŒƒåªå…è®¸ä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®ï¼Œä½†å¹¸è¿çš„æ˜¯ï¼Œç”±Daniel Ehrenbergã€Richard Buttonã€Robin Ricardã€Leo Balterã€Rick Waldronå’ŒCaridy PatiÃ±oæå‡ºçš„Symbolä½œä¸ºWeakMapé”®ææ¡ˆå°†æœªæ³¨å†Œçš„Symbolæ·»åŠ åˆ°å…è®¸çš„é”®åˆ—è¡¨ä¸­ã€‚ 123456const weak = new WeakMap();const key = Symbol(&quot;ref&quot;);weak.set(key, &quot;ECMAScript 2023&quot;);â€‹console.log(weak.get(key));// ECMAScript 2023 é€šè¿‡å¤åˆ¶æ”¹å˜æ•°ç»„Array.prototype ä¸Šçš„ reverse()ã€sort() å’Œ splice() æ–¹æ³•ä¼šå°±åœ°çªå˜æ•°ç»„ã€‚Ashley Claymore å’Œ Robin Ricard æå‡ºçš„ Change Array by Copy proposal æ·»åŠ äº† toReversed()ã€toSorted() å’Œ toSpliced() æ–¹æ³•çš„å‰¯æœ¬ï¼Œå®ƒä»¬ä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚æ­¤æè®®è¿˜æ·»åŠ äº†ä¸€ä¸ª with() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ä¸­ç»™å®šç´¢å¼•å¤„çš„å…ƒç´ ç”¨ç»™å®šå€¼æ›¿æ¢ï¼Œä»¥é¿å…ä½¿ç”¨æ‹¬å·è¡¨ç¤ºæ³•è¿›è¡Œå°±åœ°çªå˜ã€‚ 1234567891011121314151617181920212223242526272829303132const original = [1, 2, 3, 4];const reversed = original.toReversed();â€‹console.log(original);// [ 1, 2, 3, 4 ]â€‹console.log(reversed);// [ 4, 3, 2, 1 ]const original = [1, 3, 2, 4];const sorted = original.toSorted();â€‹console.log(original);// [ 1, 3, 2, 4 ]â€‹console.log(sorted);// [ 1, 2, 3, 4 ]const original = [1, 4];const spliced = original.toSpliced(1, 0, 2, 3);â€‹console.log(original);// [ 1, 4 ]â€‹console.log(spliced);// [ 1, 2, 3, 4 ]const original = [1, 2, 2, 4];const withThree = original.with(2, 3);â€‹console.log(original);// [ 1, 2, 2, 4 ]â€‹console.log(withThree);// [ 1, 2, 3, 4 ]","categories":[{"name":"js","slug":"js","permalink":"http://example.com/categories/js/"}],"tags":[{"name":"js","slug":"js","permalink":"http://example.com/tags/js/"}]},{"title":"10ä¸ªè¶…çº§å®ç”¨çš„reduceä½¿ç”¨æŠ€å·§","slug":"reduce","date":"2023-04-20T03:01:42.000Z","updated":"2023-04-20T03:01:42.000Z","comments":true,"path":"2023/04/20/reduce/","permalink":"http://example.com/2023/04/20/reduce/","excerpt":"","text":"reduce å‡½æ•°å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œç´¯åŠ ã€è¿‡æ»¤ã€åˆ†ç»„ã€æ˜ å°„ç­‰æ“ä½œï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ•°ç»„æ–¹æ³•ã€‚åœ¨æ•°æ®å¤„ç†æ—¶ä½¿ç”¨çš„éå¸¸é¢‘ç¹ï¼Œå¾ˆå¤šå¤æ‚çš„é€»è¾‘å¦‚æœç”¨reduceå»å¤„ç†ï¼Œéƒ½éå¸¸çš„ç®€æ´ï¼Œåœ¨å®é™…çš„å¼€å‘å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œç§¯ç´¯äº†ä¸€äº›å¸¸è§åˆè¶…çº§å¥½ç”¨çš„ reduce æŠ€å·§çš„ä»£ç ç‰‡æ®µï¼Œç­›é€‰äº†å¦‚ä¸‹ 10 ä¸ªï¼Œä»¥ä¾›å¤§å®¶å‚è€ƒ reduce ä»‹ç»reduce æ˜¯æ•°ç»„çš„æ–¹æ³•ï¼Œå¯ä»¥å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä¾æ¬¡æ‰§è¡Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä»å·¦åˆ°å³ä¾æ¬¡ç´¯ç§¯è®¡ç®—å‡ºä¸€ä¸ªæœ€ç»ˆçš„å€¼ã€‚å…¶è¯­æ³•ä¸ºï¼š arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue]) å…¶ä¸­ï¼Œcallback æ˜¯æ¯ä¸ªå…ƒç´ æ‰§è¡Œçš„å›è°ƒå‡½æ•°ï¼Œå…¶åŒ…å« 4 ä¸ªå‚æ•°ï¼š accumulatorï¼šç´¯ç§¯å™¨ï¼Œå³ä¸Šä¸€æ¬¡å›è°ƒå‡½æ•°æ‰§è¡Œçš„è¿”å›å€¼ã€‚ currentValueï¼šå½“å‰å…ƒç´ çš„å€¼ã€‚ indexï¼šå½“å‰å…ƒç´ çš„ä¸‹æ ‡ã€‚ arrayï¼šåŸå§‹æ•°ç»„ã€‚ initialValue æ˜¯å¯é€‰çš„ï¼Œè¡¨ç¤ºç´¯ç§¯å™¨çš„åˆå§‹å€¼ã€‚ reduce å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š å¦‚æœæ²¡æœ‰æä¾› initialValueï¼Œåˆ™å°†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºç´¯ç§¯å™¨çš„åˆå§‹å€¼ï¼Œå¦åˆ™å°† initialValue ä½œä¸ºç´¯ç§¯å™¨çš„åˆå§‹å€¼ã€‚ ä»æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹ï¼Œä¾æ¬¡å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚ å›è°ƒå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºä¸‹ä¸€æ¬¡å›è°ƒå‡½æ•°æ‰§è¡Œæ—¶çš„ç´¯ç§¯å™¨çš„å€¼ã€‚ å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œå®Œå›è°ƒå‡½æ•°åï¼Œreduce å‡½æ•°è¿”å›æœ€åä¸€æ¬¡å›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼Œå³æœ€ç»ˆçš„ç´¯ç§¯å€¼ã€‚ è®¡ç®—æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°123456const fruits = [&#x27;apple&#x27;, &#x27;banana&#x27;, &#x27;apple&#x27;, &#x27;orange&#x27;, &#x27;banana&#x27;, &#x27;apple&#x27;];const count = fruits.reduce((accumulator, currentValue) =&gt; &#123; accumulator[currentValue] = (accumulator[currentValue] || 0) + 1; return accumulator;&#125;, &#123;&#125;);console.log(count); // Output: &#123; apple: 3, banana: 2, orange: 1 &#125; æ‹å¹³åµŒå¥—æ•°ç»„123const nestedArray = [[1, 2], [3, 4], [5, 6]];const flattenedArray = nestedArray.reduce((accumulator, currentValue) =&gt; accumulator.concat(currentValue), []);console.log(flattenedArray); // Output: [1, 2, 3, 4, 5, 6] æŒ‰æ¡ä»¶åˆ†ç»„123456789101112131415161718192021const people = [ &#123; name: &#x27;Alice&#x27;, age: 25 &#125;, &#123; name: &#x27;Bob&#x27;, age: 30 &#125;, &#123; name: &#x27;Charlie&#x27;, age: 35 &#125;, &#123; name: &#x27;David&#x27;, age: 25 &#125;, &#123; name: &#x27;Emily&#x27;, age: 30 &#125;];const groupedPeople = people.reduce((accumulator, currentValue) =&gt; &#123; const key = currentValue.age; if (!accumulator[key]) &#123; accumulator[key] = []; &#125; accumulator[key].push(currentValue); return accumulator;&#125;, &#123;&#125;);console.log(groupedPeople);// Output: &#123;// 25: [&#123; name: &#x27;Alice&#x27;, age: 25 &#125;, &#123; name: &#x27;David&#x27;, age: 25 &#125;],// 30: [&#123; name: &#x27;Bob&#x27;, age: 30 &#125;, &#123; name: &#x27;Emily&#x27;, age: 30 &#125;],// 35: [&#123; name: &#x27;Charlie&#x27;, age: 35 &#125;]// &#125; å°†å¤šä¸ªæ•°ç»„åˆå¹¶ä¸ºä¸€ä¸ªå¯¹è±¡12345678const keys = [&#x27;name&#x27;, &#x27;age&#x27;, &#x27;gender&#x27;];const values = [&#x27;Alice&#x27;, 25, &#x27;female&#x27;];const person = keys.reduce((accumulator, currentValue, index) =&gt; &#123; accumulator[currentValue] = values[index]; return accumulator; &#125;, &#123;&#125;);console.log(person); // Output: &#123; name: &#x27;Alice&#x27;, age: 25, gender: &#x27;female&#x27; &#125; å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹è±¡12345678const str = &#x27;key1=value1&amp;key2=value2&amp;key3=value3&#x27;;const obj = str.split(&#x27;&amp;&#x27;).reduce((accumulator, currentValue) =&gt; &#123; const [key, value] = currentValue.split(&#x27;=&#x27;); accumulator[key] = value; return accumulator;&#125;, &#123;&#125;);console.log(obj); // Output: &#123; key1: &#x27;value1&#x27;, key2: &#x27;value2&#x27;, key3: &#x27;value3&#x27; &#125; å°†å¯¹è±¡è½¬æ¢ä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²123456const params = &#123; foo: &quot;bar&quot;, baz: 42 &#125;;const queryString = Object.entries(params).reduce((acc, [key, value]) =&gt; &#123; return `$&#123;acc&#125;$&#123;key&#125;=$&#123;value&#125;&amp;`;&#125;, &quot;?&quot;).slice(0, -1);console.log(queryString); // &quot;?foo=bar&amp;baz=42&quot; æ‰“å°æ–æ³¢é‚£å¥‘æ•°åˆ—1234567891011const fibonacci = n =&gt; &#123; return [...Array(n)].reduce((accumulator, currentValue, index) =&gt; &#123; if (index &lt; 2) &#123; accumulator.push(index); &#125; else &#123; accumulator.push(accumulator[index - 1] + accumulator[index - 2]); &#125; return accumulator; &#125;, []);&#125;;console.log(fibonacci(10)); // Output: [0, 1, 1, 2, 3, 5, 8, 13, 21, 34] æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡å­—ç¬¦ä¸²12345const str = &#x27;racecar&#x27;;const isPalindrome = str.split(&#x27;&#x27;).reduce((accumulator, currentValue, index, array) =&gt; &#123; return accumulator &amp;&amp; currentValue === array[array.length - index - 1];&#125;, true);console.log(isPalindrome); // Output: true æ£€æŸ¥æ‹¬å·æ˜¯å¦åŒ¹é…12345678910const str = &quot;(()()())&quot;;const balanced = str.split(&quot;&quot;).reduce((acc, cur) =&gt; &#123; if (cur === &quot;(&quot;) &#123; acc++; &#125; else if (cur === &quot;)&quot;) &#123; acc--; &#125; return acc;&#125;, 0) === 0;console.log(balanced); // true é€’å½’è·å–å¯¹è±¡å±æ€§12345678910111213const user = &#123; info: &#123; name: &quot;Jason&quot;, address: &#123; home: &quot;Shaanxi&quot;, company: &quot;Xian&quot; &#125;, &#125;,&#125;;function get(config, path, defaultVal) &#123; return path.split(&#x27;.&#x27;).reduce((config, name) =&gt; config[name], config) || defaultVal;&#125;get(user, &quot;info.name&quot;); // Jasonget(user, &quot;info.address.home&quot;); // Shaanxiget(user, &quot;info.address.company&quot;); // Xianget(user, &quot;info.address.abc&quot;, &quot;default&quot;); // default æ‰‹å†™ reduceå¯ä»¥é€šè¿‡æ‰‹å†™ä¸€ä¸ªç®€å•çš„ reduce å‡½æ•°æ¥æ›´å¥½åœ°ç†è§£å®ƒçš„å®ç°åŸç†ï¼š 1234567function myReduce(arr, callback, initialValue) &#123; let accumulator = initialValue === undefined ? arr[0] : initialValue; for (let i = initialValue === undefined ? 1 : 0; i &lt; arr.length; i++) &#123; accumulator = callback(accumulator, arr[i], i, arr); &#125; return accumulator;&#125; ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒmyReduce å‡½æ•°æ¥å— 3 ä¸ªå‚æ•°ï¼šè¦æ‰§è¡Œ reduce æ“ä½œçš„æ•°ç»„ arrã€å›è°ƒå‡½æ•° callback å’Œç´¯ç§¯å™¨çš„åˆå§‹å€¼ initialValueã€‚å¦‚æœæ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œåˆ™å°†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºç´¯ç§¯å™¨çš„åˆå§‹å€¼ã€‚ æ¥ä¸‹æ¥ï¼Œåœ¨å¾ªç¯ä¸­ï¼Œå¦‚æœæœ‰ initialValueï¼Œåˆ™ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹éå† callbackï¼Œæ­¤æ—¶ callabck çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»æ•°ç»„çš„ç¬¬ä¸€é¡¹å¼€å§‹çš„ï¼›å¦‚æœæ²¡æœ‰ initialValueï¼Œåˆ™ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹éå† callbackï¼Œæ­¤æ—¶ callback çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»æ•°ç»„çš„ç¬¬äºŒé¡¹å¼€å§‹çš„ä»æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹ï¼Œä¾æ¬¡å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå¹¶å°†è¿”å›å€¼ä½œä¸ºä¸‹ä¸€æ¬¡å›è°ƒå‡½æ•°æ‰§è¡Œæ—¶çš„ç´¯ç§¯å™¨çš„å€¼ã€‚ æœ€åï¼ŒmyReduce å‡½æ•°è¿”å›æœ€åä¸€æ¬¡å›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼Œå³æœ€ç»ˆçš„ç´¯ç§¯å€¼ã€‚ è¿™ä¸ªç®€æ˜“çš„ reduce å‡½æ•°å¹¶æ²¡æœ‰è€ƒè™‘å¾ˆå¤šè¾¹ç•Œæƒ…å†µå’Œå¤æ‚çš„åº”ç”¨åœºæ™¯ï¼Œä½†æ˜¯å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£ reduce å‡½æ•°çš„å®ç°åŸç†ã€‚","categories":[{"name":"js","slug":"js","permalink":"http://example.com/categories/js/"}],"tags":[{"name":"js","slug":"js","permalink":"http://example.com/tags/js/"},{"name":"reduce","slug":"reduce","permalink":"http://example.com/tags/reduce/"}]},{"title":"10ä¸ªè¶…çº§å®ç”¨çš„Setã€Mapä½¿ç”¨æŠ€å·§","slug":"set-map","date":"2023-04-20T03:01:42.000Z","updated":"2023-04-20T03:01:42.000Z","comments":true,"path":"2023/04/20/set-map/","permalink":"http://example.com/2023/04/20/set-map/","excerpt":"","text":"Setæ˜¯ä¸€ç§ç±»ä¼¼äºæ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯å®ƒçš„å€¼æ˜¯å”¯ä¸€çš„ï¼Œå³Setä¸­çš„æ¯ä¸ªå€¼åªä¼šå‡ºç°ä¸€æ¬¡ã€‚Setå¯¹è±¡çš„å®ä¾‹å¯ä»¥ç”¨äºå­˜å‚¨ä»»ä½•ç±»å‹çš„å”¯ä¸€å€¼ï¼Œä»è€Œä½¿å®ƒä»¬éå¸¸é€‚ç”¨äºå»é‡ã€‚ Mapæ˜¯ä¸€ç§é”®å€¼å¯¹é›†åˆï¼Œå…¶ä¸­æ¯ä¸ªé”®éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œè€Œå€¼åˆ™å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚Mapå¯¹è±¡çš„å®ä¾‹å¯ä»¥ç”¨äºå­˜å‚¨å¤æ‚çš„å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®é”®è¿›è¡Œå¿«é€Ÿçš„æŸ¥æ‰¾å’Œè®¿é—®ã€‚ ä»¥ä¸‹æ˜¯Setå’ŒMapçš„ä¸€äº›å¸¸ç”¨æ–¹æ³•ï¼š Set: new Set(): åˆ›å»ºä¸€ä¸ªæ–°çš„Setå¯¹è±¡ add(value): å‘Setå¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„å€¼ delete(value): ä»Setå¯¹è±¡ä¸­åˆ é™¤ä¸€ä¸ªå€¼ has(value): æ£€æŸ¥Setå¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å€¼ size: è·å–Setå¯¹è±¡ä¸­çš„å€¼çš„æ•°é‡ clear(): ä»Setå¯¹è±¡ä¸­åˆ é™¤æ‰€æœ‰å€¼ Map: new Map(): åˆ›å»ºä¸€ä¸ªæ–°çš„Mapå¯¹è±¡ set(key, value): å‘Mapå¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹ get(key): æ ¹æ®é”®è·å–Mapå¯¹è±¡ä¸­çš„å€¼ delete(key): ä»Mapå¯¹è±¡ä¸­åˆ é™¤ä¸€ä¸ªé”®å€¼å¯¹ has(key): æ£€æŸ¥Mapå¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é”® size: è·å–Mapå¯¹è±¡ä¸­çš„é”®å€¼å¯¹æ•°é‡ clear(): ä»Mapå¯¹è±¡ä¸­åˆ é™¤æ‰€æœ‰é”®å€¼å¯¹ Setå’ŒMapæ˜¯éå¸¸æœ‰ç”¨çš„æ•°æ®ç»“æ„ï¼Œå®ƒä»¬å¯ä»¥æé«˜ç¨‹åºçš„æ€§èƒ½å’Œå¯è¯»æ€§ï¼Œå¹¶ä¸”å¯ä»¥ç®€åŒ–ä»£ç çš„ç¼–å†™ã€‚ Setå»é‡ä½¿ç”¨ Set å¯ä»¥è½»æ¾åœ°è¿›è¡Œæ•°ç»„å»é‡æ“ä½œï¼Œå› ä¸º Set åªèƒ½å­˜å‚¨å”¯ä¸€çš„å€¼ã€‚ 123const arr = [1, 2, 3, 1, 2, 4, 5];const uniqueArr = [...new Set(arr)];console.log(uniqueArr); // [1, 2, 3, 4, 5] æ•°ç»„è½¬æ¢å¯ä»¥ä½¿ç”¨ Set å°†æ•°ç»„è½¬æ¢ä¸ºä¸åŒ…å«é‡å¤å…ƒç´ çš„ Set å¯¹è±¡ï¼Œå†ä½¿ç”¨ Array.from() å°†å…¶è½¬æ¢å›æ•°ç»„ã€‚ 1234const arr = [1, 2, 3, 1, 2, 4, 5];const set = new Set(arr);const uniqueArr = Array.from(set);console.log(uniqueArr); // [1, 2, 3, 4, 5] ä¼˜åŒ–æ•°æ®æŸ¥æ‰¾ä½¿ç”¨ Set å­˜å‚¨æ•°æ®æ—¶ï¼ŒæŸ¥æ‰¾æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œæ¯”æ•°ç»„çš„ O(n) è¦å¿«å¾—å¤šï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ Set æ¥ä¼˜åŒ–æ•°æ®æŸ¥æ‰¾çš„æ•ˆç‡ã€‚ 1234567const dataSet = new Set([1, 2, 3, 4, 5]);if (dataSet.has(3)) &#123; console.log(&#x27;æ•°æ®å·²ç»å­˜åœ¨&#x27;);&#125; else &#123; console.log(&#x27;æ•°æ®ä¸å­˜åœ¨&#x27;);&#125; å¹¶é›†ã€äº¤é›†ã€å·®é›†Setæ•°æ®ç»“æ„å¯ä»¥ç”¨äºè®¡ç®—ä¸¤ä¸ªé›†åˆçš„å¹¶é›†ã€äº¤é›†å’Œå·®é›†ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨Setè¿›è¡Œé›†åˆè¿ç®—çš„ç¤ºä¾‹ä»£ç ï¼š 1234567891011121314const setA = new Set([1, 2, 3]);const setB = new Set([2, 3, 4]);// å¹¶é›†const union = new Set([...setA, ...setB]);console.log(union); // Set &#123;1, 2, 3, 4&#125;// äº¤é›†const intersection = new Set([...setA].filter(x =&gt; setB.has(x)));console.log(intersection); // Set &#123;2, 3&#125;// å·®é›†const difference = new Set([...setA].filter(x =&gt; !setB.has(x)));console.log(difference); // Set &#123;1&#125; æ¨¡ç³Šæœç´¢Set è¿˜å¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å®ç°æ¨¡ç³Šæœç´¢ã€‚å¯ä»¥å°†åŒ¹é…ç»“æœä¿å­˜åˆ° Set ä¸­ï¼Œç„¶åä½¿ç”¨ Array.from() æ–¹æ³•å°† Set è½¬æ¢æˆæ•°ç»„ã€‚ 12345const data = [&#x27;apple&#x27;, &#x27;banana&#x27;, &#x27;pear&#x27;, &#x27;orange&#x27;];// æœç´¢ä»¥ &quot;a&quot; å¼€å¤´çš„æ°´æœconst result = Array.from(new Set(data.filter(item =&gt; /^a/i.test(item))));console.log(result); // [&quot;apple&quot;] ä½¿ç”¨ Set æ›¿ä»£æ•°ç»„å®ç°é˜Ÿåˆ—å’Œæ ˆå¯ä»¥ä½¿ç”¨ Set æ¥æ¨¡æ‹Ÿé˜Ÿåˆ—å’Œæ ˆçš„æ•°æ®ç»“æ„ã€‚ 123456789101112131415// ä½¿ç”¨ Set å®ç°é˜Ÿåˆ—const queue = new Set();queue.add(1);queue.add(2);queue.add(3);queue.delete(queue.values().next().value); // åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ console.log(queue); // Set(2) &#123; 2, 3 &#125;// ä½¿ç”¨ Set å®ç°æ ˆconst stack = new Set();stack.add(1);stack.add(2);stack.add(3);stack.delete([...stack][stack.size - 1]); // åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ console.log(stack); // Set(2) &#123; 1, 2 &#125; Mapå°† Map è½¬æ¢ä¸ºå¯¹è±¡12const map = new Map().set(&#x27;key1&#x27;, &#x27;value1&#x27;).set(&#x27;key2&#x27;, &#x27;value2&#x27;);const obj = Object.fromEntries(map); å°† Map è½¬æ¢ä¸ºæ•°ç»„12const map = new Map().set(&#x27;key1&#x27;, &#x27;value1&#x27;).set(&#x27;key2&#x27;, &#x27;value2&#x27;);const array = Array.from(map); è®°å½•æ•°æ®çš„é¡ºåºå¦‚æœä½ éœ€è¦è®°å½•æ·»åŠ å…ƒç´ çš„é¡ºåºï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨Mapæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å½“ä½ éœ€è¦æŒ‰ç…§æ·»åŠ é¡ºåºè¿­ä»£å…ƒç´ æ—¶ï¼Œå¯ä»¥ä½¿ç”¨Mapæ¥ä¿æŒå…ƒç´ çš„é¡ºåºã€‚ 12345678910const map = new Map();map.set(&#x27;a&#x27;, 1);map.set(&#x27;b&#x27;, 2);map.set(&#x27;c&#x27;, 3);map.set(&#x27;d&#x27;, 4);for (const [key, value] of map) &#123; console.log(key, value);&#125;// Output: a 1, b 2, c 3, d 4 ç»Ÿè®¡æ•°ç»„ä¸­å…ƒç´ å‡ºç°æ¬¡æ•°å¯ä»¥ä½¿ç”¨ Map ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ã€‚ 12345678910const arr = [1, 2, 3, 1, 2, 4, 5];const countMap = new Map();arr.forEach(item =&gt; &#123; countMap.set(item, (countMap.get(item) || 0) + 1);&#125;);console.log(countMap.get(1)); // 2console.log(countMap.get(2)); // 2console.log(countMap.get(3)); // 1 ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°ä½¿ç”¨Mapæ•°æ®ç»“æ„å¯ä»¥æ–¹ä¾¿åœ°ç»Ÿè®¡å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚ 123456const str = &#x27;hello world&#x27;;const charCountMap = new Map();for (let char of str) &#123; charCountMap.set(char, (charCountMap.get(char) || 0) + 1);&#125;console.log(charCountMap); // Map &#123; &#x27;h&#x27; =&gt; 1, &#x27;e&#x27; =&gt; 1, &#x27;l&#x27; =&gt; 3, &#x27;o&#x27; =&gt; 2, &#x27; &#x27; =&gt; 1, &#x27;w&#x27; =&gt; 1, &#x27;r&#x27; =&gt; 1, &#x27;d&#x27; =&gt; 1 &#125; ç¼“å­˜è®¡ç®—ç»“æœåœ¨å¤„ç†å¤æ‚çš„è®¡ç®—æ—¶ï¼Œå¯èƒ½éœ€è¦å¯¹ä¸­é—´ç»“æœè¿›è¡Œç¼“å­˜ä»¥æé«˜æ€§èƒ½ã€‚å¯ä»¥ä½¿ç”¨Mapæ•°æ®ç»“æ„ç¼“å­˜è®¡ç®—ç»“æœï¼Œä»¥é¿å…é‡å¤è®¡ç®—ã€‚ 12345678910111213const cache = new Map();function fibonacci(n) &#123; if (n === 0 || n === 1) &#123; return n; &#125; if (cache.has(n)) &#123; return cache.get(n); &#125; const result = fibonacci(n - 1) + fibonacci(n - 2); cache.set(n, result); return result;&#125;console.log(fibonacci(10)); // 55 ä½¿ç”¨ Map è¿›è¡Œæ•°æ®çš„åˆ†ç»„12345678910111213141516171819const students = [ &#123; name: &quot;Tom&quot;, grade: &quot;A&quot; &#125;, &#123; name: &quot;Jerry&quot;, grade: &quot;B&quot; &#125;, &#123; name: &quot;Kate&quot;, grade: &quot;A&quot; &#125;, &#123; name: &quot;Mike&quot;, grade: &quot;C&quot; &#125;,];const gradeMap = new Map();students.forEach((student) =&gt; &#123; const grade = student.grade; if (!gradeMap.has(grade)) &#123; gradeMap.set(grade, [student]); &#125; else &#123; gradeMap.get(grade).push(student); &#125;&#125;);console.log(gradeMap.get(&quot;A&quot;)); // [&#123; name: &quot;Tom&quot;, grade: &quot;A&quot; &#125;, &#123; name: &quot;Kate&quot;, grade: &quot;A&quot; &#125;] ä½¿ç”¨ Map è¿‡æ»¤ç¬¦åˆæ¡ä»¶çš„å¯¹è±¡åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦åœ¨ä¸€ä¸ªå¯¹è±¡æ•°ç»„ä¸­æŸ¥æ‰¾ç¬¦åˆæŸäº›æ¡ä»¶çš„å¯¹è±¡ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆä½¿ç”¨ Map å’Œ filter æ–¹æ³•æ¥å®ç°ã€‚æ¯”å¦‚ï¼š 12345678const users = [ &#123; name: &#x27;Alice&#x27;, age: 22 &#125;, &#123; name: &#x27;Bob&#x27;, age: 18 &#125;, &#123; name: &#x27;Charlie&#x27;, age: 25 &#125;];const userMap = new Map(users.map(user =&gt; [user.name, user]));const result = users.filter(user =&gt; userMap.has(user.name) &amp;&amp; user.age &gt; 20);console.log(result); // [&#123; name: &#x27;Alice&#x27;, age: 22 &#125;, &#123; name: &#x27;Charlie&#x27;, age: 25 &#125;] é¦–å…ˆï¼Œæˆ‘ä»¬å°†å¯¹è±¡æ•°ç»„è½¬æ¢ä¸º Mapï¼Œä»¥ä¾¿å¿«é€ŸæŸ¥æ‰¾ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ filter æ–¹æ³•æ¥è¿‡æ»¤ç¬¦åˆæ¡ä»¶çš„å¯¹è±¡ã€‚ è¿™é‡Œæˆ‘ä»¬åˆ—ä¸¾äº†ä¸€äº›ä½¿ç”¨Setå’ŒMapçš„å®ç”¨æŠ€å·§ï¼Œå®ƒä»¬å¯ä»¥å¤§å¤§ç®€åŒ–ä½ çš„ä»£ç ï¼Œå¹¶ä½¿ä½ æ›´æœ‰æ•ˆåœ°å¤„ç†æ•°æ®ã€‚Setå’ŒMapæ˜¯JavaScriptä¸­éå¸¸æœ‰ç”¨çš„æ•°æ®ç»“æ„ï¼Œå€¼å¾—æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶å¥½å¥½åˆ©ç”¨ã€‚","categories":[{"name":"js","slug":"js","permalink":"http://example.com/categories/js/"}],"tags":[{"name":"ES6","slug":"ES6","permalink":"http://example.com/tags/ES6/"},{"name":"set","slug":"set","permalink":"http://example.com/tags/set/"},{"name":"map","slug":"map","permalink":"http://example.com/tags/map/"}]},{"title":"Vuex 3 vs Vuex 4ï¼šå·®å¼‚å¯¹æ¯”","slug":"vuex3-4","date":"2023-04-18T03:01:42.000Z","updated":"2023-04-18T03:01:42.000Z","comments":true,"path":"2023/04/18/vuex3-4/","permalink":"http://example.com/2023/04/18/vuex3-4/","excerpt":"","text":"Vuex æ˜¯ Vue.js çš„å®˜æ–¹çŠ¶æ€ç®¡ç†åº“ï¼Œç”¨äºåœ¨ Vue.js åº”ç”¨ä¸­ç®¡ç†åº”ç”¨çŠ¶æ€ã€‚Vuex 3 æ˜¯ç”¨äº Vue 2 çš„ç‰ˆæœ¬ï¼Œè€Œ Vuex 4 æ˜¯ç”¨äº Vue 3 çš„ç‰ˆæœ¬ã€‚ä¸‹é¢æ˜¯ Vuex 3 å’Œ Vuex 4 åœ¨ä¸€äº›é‡è¦æ–¹é¢çš„å¼‚åŒç‚¹ï¼š åˆ›å»º Store çš„æ–¹å¼ Vuex 3ï¼šä½¿ç”¨ new Vuex.Store() åˆ›å»º store å®ä¾‹ import Vue from &#39;vue&#39; import Vuex from &#39;vuex&#39; â€‹ Vue.use(Vuex) â€‹ const store = new Vuex.Store(&#123; // é…ç½®é¡¹ &#125;) â€‹ export default store Vuex 4ï¼šä½¿ç”¨ createStore å‡½æ•°åˆ›å»º store å®ä¾‹ import &#123; createStore &#125; from &#39;vuex&#39; â€‹ const store = createStore(&#123; // é…ç½®é¡¹ &#125;) â€‹ export default store Vuex 4 ä¸­ä½¿ç”¨ createStore å‡½æ•°æ¥åˆ›å»º store å®ä¾‹ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨ Vue å®ä¾‹ä¸ŠæŒ‚è½½ã€‚ åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Store Vuex 3ï¼šä½¿ç”¨ this.$store è®¿é—® store å®ä¾‹ï¼Œé€šè¿‡ this.$store.state è®¿é—®çŠ¶æ€ï¼Œé€šè¿‡ this.$store.commit() è¿›è¡Œæäº¤ mutationï¼Œé€šè¿‡ this.$store.dispatch() è¿›è¡Œåˆ†å‘ actionã€‚ export default &#123; computed: &#123; count() &#123; return this.$store.state.count &#125; &#125;, methods: &#123; increment() &#123; this.$store.commit(&#39;increment&#39;) &#125;, incrementAsync() &#123; this.$store.dispatch(&#39;incrementAsync&#39;) &#125; &#125; &#125; Vuex 4ï¼šä½¿ç”¨ useStore å‡½æ•°æ¥è·å– store å®ä¾‹ï¼Œé€šè¿‡ store.state è®¿é—®çŠ¶æ€ï¼Œé€šè¿‡ store.commit() è¿›è¡Œæäº¤ mutationï¼Œé€šè¿‡ store.dispatch() è¿›è¡Œåˆ†å‘ actionã€‚ import &#123; useStore &#125; from &#39;vuex&#39; â€‹ export default &#123; setup() &#123; const store = useStore() const count = computed(() =&gt; store.state.count) â€‹ const increment = () =&gt; &#123; store.commit(&#39;increment&#39;) &#125; â€‹ const incrementAsync = () =&gt; &#123; store.dispatch(&#39;incrementAsync&#39;) &#125; â€‹ return &#123; count, increment, incrementAsync &#125; &#125; &#125; è™½ç„¶ Vuex4 æ¨èä½¿ç”¨æ›´ç¬¦åˆ Composition API é£æ ¼çš„ useStore() æ¥è·å– store å®ä¾‹ã€‚ä½†æ˜¯å¹¶æ²¡æœ‰ç§»é™¤ this.$storeï¼Œä½†æ˜¯åœ¨ &lt;template&gt; å’Œ Vue2 é€‰é¡¹å¼å†™æ³•ä¸­è¿˜æ˜¯æ”¯æŒä½¿ç”¨ $store çš„ã€‚ è¾…åŠ©å‡½æ•°çš„ç”¨æ³• Vuex 3ï¼šä½¿ç”¨ mapStateã€mapGettersã€mapMutations å’Œ mapActions è¾…åŠ©å‡½æ•°æ¥è¿›è¡Œæ˜ å°„ï¼Œç®€åŒ–åœ¨ç»„ä»¶ä¸­å¯¹ store çš„è®¿é—®ã€‚ import &#123; mapState, mapGetters, mapMutations, mapActions &#125; from &#39;vuex&#39; â€‹ export default &#123; computed: &#123; ...mapState([&#39;count&#39;]), ...mapGetters([&#39;doubleCount&#39;]), &#125;, methods: &#123; ...mapMutations([&#39;increment&#39;]), ...mapActions([&#39;incrementAsync&#39;]), &#125; &#125; Vuex 4ï¼šä½¿ç”¨ Composition API ä¸­çš„ computed å‡½æ•°å’Œæ™®é€šçš„ JavaScript å‡½æ•°æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚ import &#123; computed, useStore &#125; from &#39;vuex&#39; â€‹ export default &#123; setup() &#123; const store = useStore() â€‹ const count = computed(() =&gt; store.state.count) const doubleCount = computed(() =&gt; store.getters.doubleCount) â€‹ const increment = () =&gt; &#123; store.commit(&#39;increment&#39;) &#125; â€‹ const incrementAsync = () =&gt; &#123; store.dispatch(&#39;incrementAsync&#39;) &#125; â€‹ return &#123; count, doubleCount, increment, incrementAsync &#125; &#125; &#125; Vuex4 æ”¯æŒé€‰é¡¹å¼å†™æ³•çš„è¾…åŠ©å‡½æ•°ï¼Œåœ¨ä½¿ç”¨æ—¶å’Œ Vuex3 ä¸€æ¨¡ä¸€æ ·çš„ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„è¾…åŠ©å‡½æ•°ä¸èƒ½åœ¨ç»„åˆå¼å†™æ³• setup ä¸­ä½¿ç”¨ã€‚ å“åº”å¼çš„æ”¹è¿› Vuex 3ï¼šä½¿ç”¨ Vue 2 çš„å“åº”å¼ç³»ç»Ÿ ( Object.defineProperty ) è¿›è¡ŒçŠ¶æ€çš„ç›‘å¬å’Œæ›´æ–°ã€‚ Vuex 4ï¼šä½¿ç”¨ Vue 3 çš„å“åº”å¼ç³»ç»Ÿ ( proxy ) è¿›è¡ŒçŠ¶æ€çš„ç›‘å¬å’Œæ›´æ–°ï¼Œå¯ä»¥åˆ©ç”¨ Composition API ä¸­çš„ reactive å’Œ computed å‡½æ•°è¿›è¡Œæ›´åŠ çµæ´»å’Œé«˜æ•ˆçš„çŠ¶æ€ç®¡ç†ã€‚ å®è´¨ä¸Šè¿™æ˜¯ Vue2 å’Œ Vue3 çš„åŒºåˆ«ï¼Œåªæ˜¯ç”±äº Vue 2 åŒ¹é…çš„ Vuex 3ï¼ŒVue 3 åŒ¹é…çš„ Vuex 4 çš„åŸå› ï¼Œä¸¥æ ¼æ¥è¯´ä¸èƒ½ç®—ä½œ Vuex3 ä¸ Vuex4 çš„ä¸åŒã€‚ Vuex4 æ”¯æŒå¤šä¾‹æ¨¡å¼Vuex 3 æ˜¯å•ä¾‹æ¨¡å¼çš„ï¼Œå³æ•´ä¸ªåº”ç”¨åªèƒ½æœ‰ä¸€ä¸ªå…¨å±€çš„ Vuex Store å®ä¾‹ã€‚è€Œåœ¨ Vuex 4 ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ useStore å‡½æ•°åœ¨ä¸åŒç»„ä»¶ä¸­åˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„ Vuex Store å®ä¾‹ï¼Œä»è€Œæ”¯æŒå¤šä¾‹æ¨¡å¼ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ Vuex 4 ä¸­ä½¿ç”¨ useStore è¾…åŠ©å‡½æ•°åˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„ Vuex Store å®ä¾‹ï¼š &lt;template&gt; &lt;div&gt; &lt;p&gt;Counter 1: &#123;&#123; counter1 &#125;&#125;&lt;/p&gt; &lt;p&gt;Counter 2: &#123;&#123; counter2 &#125;&#125;&lt;/p&gt; &lt;button @click=&quot;incrementCounter1&quot;&gt;Increment Counter 1&lt;/button&gt; &lt;button @click=&quot;incrementCounter2&quot;&gt;Increment Counter 2&lt;/button&gt; &lt;/div&gt; &lt;/template&gt; â€‹ &lt;script&gt; import &#123; useStore &#125; from &#39;vuex&#39; â€‹ export default &#123; setup() &#123; // ä½¿ç”¨ useStore è¾…åŠ©å‡½æ•°åˆ›å»º Vuex Store å®ä¾‹ const store1 = useStore(&#39;store1&#39;) const store2 = useStore(&#39;store2&#39;) â€‹ // é€šè¿‡ store1.state.count è·å–ç¬¬ä¸€ä¸ª Store çš„çŠ¶æ€ const count1 = store1.state.count // é€šè¿‡ store2.state.count è·å–ç¬¬äºŒä¸ª Store çš„çŠ¶æ€ const count2 = store2.state.count â€‹ // é€šè¿‡ store1.commit() æäº¤ mutations åˆ°ç¬¬ä¸€ä¸ª Store const incrementCounter1 = () =&gt; &#123; store1.commit(&#39;increment&#39;) &#125; â€‹ // é€šè¿‡ store2.commit() æäº¤ mutations åˆ°ç¬¬äºŒä¸ª Store const incrementCounter2 = () =&gt; &#123; store2.commit(&#39;increment&#39;) &#125; â€‹ return &#123; count1, count2, incrementCounter1, incrementCounter2 &#125; &#125; &#125; &lt;/script&gt; ä¸Šè¿°ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ Vue ç»„ä»¶ä¸­ä½¿ç”¨ useStore è¾…åŠ©å‡½æ•°åˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„ Vuex Store å®ä¾‹ï¼Œå¹¶é€šè¿‡è¿™äº›å®ä¾‹åˆ†åˆ«è®¿é—®å’Œä¿®æ”¹å„è‡ªçš„çŠ¶æ€å’Œ mutationsã€‚è¿™æ˜¯ Vuex 4 ç›¸å¯¹äº Vuex 3 çš„ä¸€ä¸ªé‡è¦çš„æ”¹è¿›ï¼Œä½¿å¾— Vuex åœ¨æ”¯æŒå¤šä¾‹æ¨¡å¼çš„åœºæ™¯ä¸‹æ›´åŠ çµæ´»å’Œå¯æ‰©å±•ã€‚ å‚è€ƒé“¾æ¥ï¼š Vuex 4 å®˜æ–¹æ–‡æ¡£ï¼šhttps://vuex.vuejs.org/zh/ Vuex 3 å®˜æ–¹æ–‡æ¡£ï¼šhttps://v3.vuex.vuejs.org/zh/","categories":[{"name":"vuex","slug":"vuex","permalink":"http://example.com/categories/vuex/"}],"tags":[{"name":"vuex","slug":"vuex","permalink":"http://example.com/tags/vuex/"}]},{"title":"[è¯‘] javascript æ£€æµ‹å‰ªè´´æ¿ä¸­çš„å†…å®¹ç±»å‹","slug":"plate","date":"2023-04-14T03:01:42.000Z","updated":"2023-04-14T03:01:42.000Z","comments":true,"path":"2023/04/14/plate/","permalink":"http://example.com/2023/04/14/plate/","excerpt":"","text":"åŸæ–‡åœ°å€ï¼šDetect the Content Type in the Clipboard 2023.03.06 By David Walsh ç”¨æˆ·çš„å‰ªè´´æ¿æ˜¯æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„â€œä¸‡èƒ½æ”¶é›†å™¨â€ã€‚å½“ä½ ä½¿ç”¨ç½‘é¡µæµè§ˆå™¨æ—¶ï¼Œä½ å¯ä»¥é€‰æ‹©æ–‡æœ¬å¹¶å¤åˆ¶ï¼Œä¹Ÿå¯ä»¥å³é”®ç‚¹å‡»å›¾åƒå¹¶é€‰æ‹©â€œå¤åˆ¶å›¾åƒâ€ã€‚è¿™è®©æˆ‘æƒ³åˆ°å¼€å‘äººå‘˜å¦‚ä½•æ£€æµ‹å‰ªè´´æ¿ä¸­çš„å†…å®¹ç±»å‹ã€‚ ä½ å¯ä»¥ä½¿ç”¨ navigator.clipboard API è·å–ç”¨æˆ·å‰ªè´´æ¿çš„å†…å®¹ã€‚ç”±äºå‰ªè´´æ¿å¯èƒ½åŒ…å«æ•æ„Ÿæ•°æ®ï¼Œå› æ­¤è¯¥ API éœ€è¦ç”¨æˆ·æƒé™ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ JavaScript ä»£ç è·å–ä½¿ç”¨å‰ªè´´æ¿ API çš„æƒé™ï¼š 1234const result = await navigator.permissions.query(&#123;name: &quot;clipboard-write&quot;&#125;);if (result.state === &quot;granted&quot; || result.state === &quot;prompt&quot;) &#123; // æƒé™å·²æˆäºˆ&#125; æˆäºˆå‰ªè´´æ¿æƒé™åï¼Œä½ å¯ä»¥æŸ¥è¯¢å‰ªè´´æ¿ä»¥è·å– ClipboardItem å®ä¾‹ï¼Œå…¶ä¸­åŒ…å«å·²å¤åˆ¶çš„è¯¦ç»†ä¿¡æ¯ï¼š 1234567const [item] = await navigator.clipboard.read();// å½“æ–‡æœ¬è¢«å¤åˆ¶åˆ°å‰ªè´´æ¿æ—¶...item.types // [&quot;text/plain&quot;]// å½“ä»ç½‘ç«™å¤åˆ¶å›¾åƒæ—¶...item.types // [&quot;text/html&quot;, &quot;image/png&quot;] ä¸€æ—¦ä½ çŸ¥é“äº†å‰ªè´´æ¿ä¸­çš„å†…å®¹å’ŒMIMEç±»å‹ï¼Œå°±å¯ä»¥ä½¿ç”¨ readText() è·å–å‰ªè´´æ¿ä¸­çš„æ–‡æœ¬ï¼š 1const content = await navigator.clipboard.readText(); å¯¹äºå›¾åƒï¼Œå¦‚æœä½ æœ‰MIMEç±»å‹å’Œå†…å®¹ï¼Œä½ å¯ä»¥ä½¿ç”¨æ•°æ®URIçš„ &lt;img&gt; è¿›è¡Œæ˜¾ç¤ºã€‚äº†è§£ç”¨æˆ·å‰ªè´´æ¿çš„å†…å®¹å¯¹äºå±•ç¤ºä»–ä»¬å¤åˆ¶çš„å†…å®¹éå¸¸æœ‰å¸®åŠ©ï¼","categories":[{"name":"å¤–æ–‡ç¿»è¯‘","slug":"å¤–æ–‡ç¿»è¯‘","permalink":"http://example.com/categories/%E5%A4%96%E6%96%87%E7%BF%BB%E8%AF%91/"}],"tags":[{"name":"js","slug":"js","permalink":"http://example.com/tags/js/"}]},{"title":"æ‰‹å†™ Vuex(ä¸‰)","slug":"vuex3","date":"2023-04-13T03:01:42.000Z","updated":"2023-04-13T03:01:42.000Z","comments":true,"path":"2023/04/13/vuex3/","permalink":"http://example.com/2023/04/13/vuex3/","excerpt":"","text":"map è¾…åŠ©å‡½æ•°æ˜¯ Vuex æä¾›çš„ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼ï¼Œç”¨äºå°† Vuex ä¸­çš„çŠ¶æ€ã€gettersã€mutations å’Œ actions æ˜ å°„åˆ° Vue ç»„ä»¶ä¸­çš„æœ¬åœ°çŠ¶æ€ã€è®¡ç®—å±æ€§ã€æ–¹æ³•å’ŒåŠ¨ä½œã€‚ map è¾…åŠ©å‡½æ•°ä½¿ç”¨æ–¹æ³• mapState(namespace?: string, map: Array&lt;string&gt; | Object&lt;string | function&gt;): Object è¿™é‡Œä»¥ mapState ä¸ºä¾‹ï¼Œç®€å•çœ‹ä¸‹ map è¾…åŠ©å‡½æ•°çš„ä¸‰ç§ä½¿ç”¨æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415export default &#123; // ... computed: mapState(&#123; // ç®­å¤´å‡½æ•°å¯ä½¿ä»£ç æ›´ç®€ç»ƒ count: state =&gt; state.count, // ä¼ å­—ç¬¦ä¸²å‚æ•° &#x27;count&#x27; ç­‰åŒäº `state =&gt; state.count` countAlias: &#x27;count&#x27;, // ä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ `this` è·å–å±€éƒ¨çŠ¶æ€ï¼Œå¿…é¡»ä½¿ç”¨å¸¸è§„å‡½æ•° countPlusLocalState (state) &#123; return state.count + this.localCount &#125; &#125;)&#125; å¦‚æœä¸è€ƒè™‘ namespaceï¼Œä»¥æ•°ç»„ä¸ºä¾‹ï¼Œå¯ä»¥å¾ˆç®€å•çš„å®ç°å®ç° mapState æ–¹æ³•ï¼š 123456789const mapState = args =&gt; &#123; let states = &#123;&#125; args.forEach(item =&gt; &#123; states[item] = function () &#123; return this.$store.state[item] &#125; &#125;) return states&#125; normalizeMapç”±äºç”¨æˆ·ä¼ å…¥å¯èƒ½ä¸ºæ•°ç»„æˆ–å¯¹è±¡ï¼Œé¦–å…ˆéœ€è¦æ ¼å¼åŒ–å‚æ•°æ ¼å¼ 12345function normalizeMap(map) &#123; return Array.isArray(map) ? map.map(key =&gt; (&#123; key, val: key &#125;)) : Object.keys(map).map(key =&gt; (&#123; key, val: map[key] &#125;))&#125; normalizeNamespaceæ ¹æ® namespace é…ç½®ï¼Œå¯¹å¼€å¯å‘½åç©ºé—´çš„æ¨¡å—ï¼Œæ‹¼æ¥è·¯å¾„å‚æ•° 1234567891011function normalizeNamespace(fn) &#123; return (namespace, map) =&gt; &#123; if (typeof namespace !== &#x27;string&#x27;) &#123; map = namespace namespace = &#x27;&#x27; &#125; else if (namespace.charAt(namespace.length - 1) !== &#x27;/&#x27;) &#123; namespace += &#x27;/&#x27; &#125; return fn(namespace, map) &#125;&#125; getModuleByNamespaceè·å– namespace å¯¹åº”çš„ module æ¨¡å—ï¼Œæ³¨ï¼šè¿™é‡Œå¯ä»¥å‚è€ƒ namespace ä¸€èŠ‚ä¸­çš„æ•°æ®ç»“æ„ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£ 1234567function getModuleByNamespace(store, helper, namespace) &#123; const module = store._modulesNamespaceMap[namespace] if (!module) &#123; console.error(`[vuex] module namespace not found in $&#123;helper&#125;(): $&#123;namespace&#125;`) &#125; return module&#125; mapState12345678910111213141516171819202122232425262728export const mapState = normalizeNamespace((namespace, states) =&gt; &#123; const res = &#123;&#125; normalizeMap(states).forEach((&#123; key, val &#125;) =&gt; &#123; res[key] = function mappedState() &#123; // æ ¹æ¨¡å— stateã€getters let state = this.$store.state let getters = this.$store.getters if (namespace) &#123; // é€šè¿‡ namespace æ‹¿åˆ°ç›¸åº”çš„æ¨¡å— const module = getModuleByNamespace(this.$store, &#x27;mapState&#x27;, namespace) if (!module) &#123; return &#125; // å­æ¨¡å— stateã€getter state = module.state getters = module.getters &#125; // å¦‚ï¼šä»¥ä¸‹åœºæ™¯çš„é…ç½®é¡¹ï¼Œéœ€è¦æ‰§è¡Œå‡½æ•°ï¼Œå¾—åˆ°æœ€ç»ˆç»“æœåœ¨è¿”å› // countPlusLocalState (state) &#123; // return state.count + this.localCount //&#125; return typeof val === &#x27;function&#x27; ? val.call(this, state, getters) : state[val] &#125; &#125;) return res&#125;) åŒç†å¯ä¾æ¬¡å®ç° mapGettersã€mapMutationsã€mapActions è¾…åŠ©å‡½æ•° mapGetters123456789101112131415export const mapGetters = normalizeNamespace((namespace, getters) =&gt; &#123; const res = &#123;&#125; normalizeMap(getters).forEach((&#123; key, val &#125;) =&gt; &#123; // The namespace has been mutated by normalizeNamespace val = namespace + val res[key] = function mappedGetter() &#123; if (namespace &amp;&amp; !getModuleByNamespace(this.$store, &#x27;mapGetters&#x27;, namespace)) &#123; return &#125; return this.$store.getters[val] &#125; &#125;) return res&#125;) mapMutations12345678910111213141516171819202122export const mapMutations = normalizeNamespace((namespace, mutations) =&gt; &#123; const res = &#123;&#125; normalizeMap(mutations).forEach((&#123; key, val &#125;) =&gt; &#123; res[key] = function mappedMutation(...args) &#123; // Get the commit method from store let commit = this.$store.commit if (namespace) &#123; const module = getModuleByNamespace(this.$store, &#x27;mapMutations&#x27;, namespace) if (!module) &#123; return &#125; const _type = namespace + val commit = () =&gt; &#123; this.$store.commit(_type) &#125; &#125; return typeof val === &#x27;function&#x27; ? val.apply(this, [commit].concat(args)) : commit.apply(this.$store, [val].concat(args)) &#125; &#125;) return res&#125;) mapActions1234567891011121314151617181920212223export const mapActions = normalizeNamespace((namespace, actions) =&gt; &#123; const res = &#123;&#125; normalizeMap(actions).forEach((&#123; key, val &#125;) =&gt; &#123; res[key] = function mappedAction(...args) &#123; // get dispatch function from store let dispatch = this.$store.dispatch if (namespace) &#123; const module = getModuleByNamespace(this.$store, &#x27;mapActions&#x27;, namespace) if (!module) &#123; return &#125; const _type = namespace + val dispatch = () =&gt; &#123; return this.$store.dispatch(_type) &#125; &#125; return typeof val === &#x27;function&#x27; ? val.apply(this, [dispatch].concat(args)) : dispatch.apply(this.$store, [val].concat(args)) &#125; &#125;) return res&#125;) è‡³æ­¤ï¼Œæ‰‹å†™ Vuex åŸºç¡€åŠŸèƒ½ã€æ¨¡å—åŒ–ã€å‘½åç©ºé—´ã€ä¸¥æ ¼æ¨¡å¼ç­‰å·²å®Œç»“ï¼Œä»¥æºç ä¸ºä¾‹ï¼Œå®ç°äº†ä¸€ä¸ªç®€æ˜“çš„Vuex3ï¼Œå¸®åŠ©æˆ‘ä»¬ç†è§£å…¶åŸç†ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ vuex æºç ã€‚ å®Œæ•´ä»£ç ç³»åˆ—æ–‡ç«  ã€é€ è½®å­ç³»åˆ—ã€‘é¢è¯•å®˜é—®ï¼šä½ èƒ½æ‰‹å†™Vuexå—(ä¸€) ã€é€ è½®å­ç³»åˆ—ã€‘é¢è¯•å®˜é—®ï¼šä½ èƒ½æ‰‹å†™Vuexå—(äºŒ)","categories":[{"name":"vuex","slug":"vuex","permalink":"http://example.com/categories/vuex/"}],"tags":[{"name":"vuex æºç ","slug":"vuex-æºç ","permalink":"http://example.com/tags/vuex-%E6%BA%90%E7%A0%81/"}]},{"title":"æ‰‹å†™ Vuex(äºŒ)","slug":"vuex2","date":"2023-04-11T03:01:42.000Z","updated":"2023-04-11T03:01:42.000Z","comments":true,"path":"2023/04/11/vuex2/","permalink":"http://example.com/2023/04/11/vuex2/","excerpt":"","text":"ä¹¦æ¥ä¸Šæ–‡ï¼šã€é€ è½®å­ç³»åˆ—ã€‘é¢è¯•å®˜é—®ï¼šä½ èƒ½æ‰‹å†™Vuexå—(ä¸€)ï¼Ÿ ä¸­ï¼Œå®ç°äº† Vuex çš„åŸºç¡€åŠŸèƒ½ï¼Œç°åœ¨ç»§ç»­å¯¹å…¶è¿›è¡Œå®Œå–„ï¼Œå®ç°æ¨¡å—åŒ–çš„çŠ¶æ€ç®¡ç†ã€‚æ¨¡å—åŒ–å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç»„ç»‡å’Œç®¡ç†å¤æ‚çš„åº”ç”¨çŠ¶æ€ï¼Œä½¿å¾—çŠ¶æ€çš„ç»“æ„æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤ã€‚ æ ¼å¼åŒ–å‚æ•°å°†å‚æ•°æ¨¡å—æ ¼å¼åŒ–ä¸ºæ¨¡å—åµŒå¥—çš„æ ‘å½¢ç»“æ„ï¼ˆå¦‚ä¸‹ï¼‰ï¼Œæ–¹ä¾¿æˆ‘ä»¬åç»­çš„æ“ä½œã€‚ 1234567891011121314151617//æ ¹æ¨¡å—this.root = &#123; // æ¨¡å—çš„é…ç½®ï¼šåŒ…å«å½“å‰æ¨¡å—çš„ stateã€gettersã€mutationsã€actions _raw: xxx, _children: &#123; // å­æ¨¡å— aæ¨¡å—: &#123; _raw: xxx, _children: &#123;&#125;, state: xxx.state &#125;, bæ¨¡å—: &#123; _raw: xxx, _children: &#123;&#125;, state: xxx.state &#125; &#125;, state: xxx.state&#125; Module ç±»åˆ›å»º Module ç±»ï¼Œé€šè¿‡ new Module ä¾¿å¯ä»¥å¾—åˆ°æ ¼å¼åŒ–åçš„æ ‘å½¢æ•°æ®ç»“æ„ã€‚ 12345678// module.jsexport default class Module &#123; constructor(rootModule) &#123; this._raw = rootModule, this._children = &#123;&#125; this.state = rootModule.state &#125;&#125; ModuleCollection ç±»åœ¨è¿™ä¸ªç±»ä¸­ï¼Œå®ç°å°†ç”¨æˆ·ä¼ å…¥çš„å‚æ•°è½¬åŒ–ä¸ºæ ¼å¼åŒ–åçš„ç»“æœï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728// module-collection.jsimport forEachValue from &quot;./utils&quot;;import Module from &#x27;./module.js&#x27;export default class ModlueCollection &#123; constructor(options) &#123; // æ³¨å†Œæ¨¡å— []è¡¨ç¤ºè·¯å¾„ é€’å½’æ³¨å†Œæ¨¡å— this.register([], options) &#125; register(path, rootModule) &#123; const newModlue = new Module(rootModule) if (path.length == 0) &#123; // æ ¹æ¨¡å— this.root = newModlue &#125; else &#123; const parent = path.slice(0, -1).reduce((pre, next) =&gt; &#123; return pre.getChild(next) &#125;, this.root) parent.addChild(path[path.length - 1], newModlue) &#125; // æ³¨å†Œå­æ¨¡å— if (rootModule.modules) &#123; forEachValue(rootModule.modules, (moduleValue, moduleName) =&gt; &#123; // é€’å½’ this.register([...path, moduleName], moduleValue) &#125;) &#125; &#125;&#125; forEachValueå…¶ä¸­ forEachValue æ–¹æ³•æå–ä¸ºå·¥å…·æ–¹æ³•ï¼Œæ–¹ä¾¿åç»­å¤ç”¨ 123456const forEachValue = (obj = &#123;&#125;, fn) =&gt; &#123; Object.keys(obj).forEach(key =&gt; &#123; fn(obj[key], key) &#125;)&#125;export default forEachValue getChildã€addChildå¢åŠ è·å–å­æ¨¡å—å’Œè¿½åŠ å­æ¨¡å—æ–¹æ³•ï¼Œä¾¿äºè°ƒç”¨ 123456789101112// module.jsexport default class Module &#123; ... // è·å–å­æ¨¡å— getChild(key) &#123; return this._children[key] &#125; // è¿½åŠ å­æ¨¡å— addChild(key, module) &#123; this._children[key] = module &#125;&#125; è‡³æ­¤å®Œæˆæ¨¡å—æ ¼å¼åŒ–ä¸ºæ¨¡å—åµŒå¥—çš„æ ‘å½¢ç»“æ„ï¼Œæ¥ä¸‹æ¥é‡æ„ Storeï¼Œå®ç° stateã€getterã€commitã€dispatchç­‰ installModuleinstallModlueæ–¹æ³•ï¼šå°†åˆ›å»ºçš„æ ‘å½¢ç»“æ„ä¸Šçš„çŠ¶æ€ã€æ–¹æ³•å®‰è£…åˆ° Store å®ä¾‹ä¸Šï¼Œå°±å¯ä»¥é€šè¿‡$storeæ–¹å¼è·å–åˆ°å¯¹åº”çš„æ•°æ®ã€‚ 12345678910111213141516171819202122232425import ModuleCollection from &#x27;./module-collection.js&#x27;import forEachValue from &#x27;./utils&#x27;let Vuefunction installModule(store, rootState, path, module) &#123; // æ”¶é›†æ‰€æœ‰æ¨¡å—çš„çŠ¶æ€ if (path.length &gt; 0) &#123; // å¦‚æœæ˜¯å­æ¨¡å— å°±éœ€è¦å°†å­æ¨¡å—çš„çŠ¶æ€å®šä¹‰åˆ°æ ¹æ¨¡å—ä¸Š let parent = path.slice(0, -1).reduce((pre, next) =&gt; &#123; return pre[next] &#125;, rootState) // å°†å±æ€§è®¾ç½®ä¸ºå“åº”å¼ å¯ä»¥æ–°å¢å±æ€§ Vue.set(parent, path[path.length - 1], module.state) &#125; module.forEachChild((child, key) =&gt; &#123; installModule(store, rootState, path.concat(key), child) &#125;)&#125;class Store &#123; constructor(options) &#123; this._modules = new ModuleCollection(options) // æ³¨å†Œæ‰€æœ‰æ¨¡å—åˆ°Storeå®ä¾‹ä¸Š // thiså½“å‰å®ä¾‹ã€æ ¹çŠ¶æ€ã€è·¯å¾„ã€æ ¹æ¨¡å— const state = this._modules.root.state installModule(this, state, [], this._modules.root) &#125;&#125; forEachChildéå†å®‰è£…å½“å‰æ¨¡å—çš„å­æ¨¡å— 12345678// module.jsexport default class Module &#123; ... // éå†å½“å‰æ¨¡å—çš„child forEachChild(fn) &#123; forEachValue(this._children, fn) &#125;&#125; resetStoreVmå®ç° state æ•°æ®å“åº”å¼å“åº”å¼ 123456789101112131415161718192021222324252627282930313233343536373839function resetStoreVm(store, state) &#123; const wrappedGetters = store._wrappedGetters const computed = &#123;&#125; store.getters = Object.create(null) // é€šè¿‡ä½¿ç”¨vueçš„computedå®ç°ç¼“å­˜ forEachValue(wrappedGetters, (fn, key) =&gt; &#123; computed[key] = () =&gt; &#123; return fn() &#125; // ä»£ç† Object.defineProperty(store.getters, key, &#123; get: () =&gt; &#123; return store._vm[key] &#125; &#125;) &#125;) // å°†çŠ¶æ€å®ç°å“åº”å¼ store._vm = new Vue(&#123; data() &#123; return &#123; $$state: state &#125; &#125;, computed &#125;)&#125;class Store &#123; constructor(options) &#123; ... let state = this._modules.root.state ... //å®ç°stateå“åº”å¼ resetStoreVm(this, state) &#125; get state() &#123; return this._vm._data.$$state &#125; ...&#125; forEachGettersæ‰©å±• Module ç±»ï¼Œéå† getters 1234567891011// module.jsexport default class Module &#123; ... // éå†å½“å‰æ¨¡å—çš„getters forEachGetters(fn) &#123; if (this._raw.getters) &#123; forEachValue(this._raw.getters, fn) &#125; &#125;&#125; getter123456789101112131415161718function installModule(store, rootState, path, module) &#123; ... module.forEachGetters((getters, key) =&gt; &#123; // åŒåè®¡ç®—å±æ€§ä¼šè¦†ç›– æ‰€ä»¥ä¸ç”¨å­˜å‚¨ store._wrappedGetters[key] = () =&gt; &#123; return getters(module.state) &#125; &#125;) ...&#125;class Store &#123; constructor(options) &#123; ... this._wrappedGetters = Object.create(null) // å­˜æ”¾æ‰€æœ‰æ¨¡å—çš„getters ... &#125;&#125; commitï¼ˆmutationsï¼‰1234567891011121314151617181920212223242526function installModule(store, rootState, path, module) &#123; ... module.forEachMutations((mutations, type) =&gt; &#123; // æ”¶é›†æ‰€æœ‰æ¨¡å—çš„mutations å­˜æ”¾åˆ° å®ä¾‹çš„store._mutationsä¸Š // åŒåçš„mutationså’Œ actions å¹¶ä¸ä¼šè¦†ç›– æ‰€ä»¥è¦æœ‰ä¸€ä¸ªæ•°ç»„å­˜å‚¨ &#123;changeAge: [fn,fn,fn]&#125; store._mutations[type] = (store._mutations[type] || []) store._mutations[type].push((payload) =&gt; &#123; // å‡½æ•°åŒ…è£… åŒ…è£…ä¼ å‚æ˜¯çµæ´»çš„ // ä½¿this æ°¸è¿œæŒ‡å‘å®ä¾‹ å½“å‰æ¨¡å—çŠ¶æ€ å…¥å‚æ•° mutations.call(store, module.state, payload) &#125;) &#125;) ...&#125;class Store &#123; constructor(options) &#123; ... this._mutations = Object.create(null) // å­˜æ”¾æ‰€æœ‰æ¨¡å—çš„mutation ... &#125; commit = (type, payload) =&gt; &#123; // è§¦å‘commitä¼šè§¦å‘_mutationsé‡Œé¢çš„æ–¹æ³• this._mutations[type].forEach(fn =&gt; fn(payload)) &#125;&#125; forEachMutations1234567891011// module.jsexport default class Module &#123; ... // éå†å½“å‰æ¨¡å—çš„mutations forEachMutations(fn) &#123; if (this._raw.mutations) &#123; forEachValue(this._raw.mutations, fn) &#125; &#125;&#125; dispatchï¼ˆactionsï¼‰1234567891011121314151617181920212223function installModule(store, rootState, path, module) &#123; ... module.forEachActions((actions, type) =&gt; &#123; store._actions[type] = (store._actions[type] || []) store._actions[type].push((payload) =&gt; &#123; actions.call(store, store, payload) &#125;) &#125;) ...&#125;class Store &#123; constructor(options) &#123; ... this._actions = Object.create(null) // å­˜æ”¾æ‰€æœ‰æ¨¡å—çš„actions ... &#125; // dispatch dispatch = (type, payload) =&gt; &#123; this._actions[type].forEach(fn =&gt; fn(payload)) &#125;&#125; forEachActions1234567891011// module.jsexport default class Module &#123; ... // éå†å½“å‰æ¨¡å—çš„actions forEachActions(fn) &#123; if (this._raw.actions) &#123; forEachValue(this._raw.actions, fn) &#125; &#125;&#125; namespaceé»˜è®¤æƒ…å†µä¸‹ï¼ˆæˆ– namespace: falseï¼‰ï¼Œæ¨¡å—å†…éƒ¨çš„ actionã€mutation å’Œ getter æ˜¯æ³¨å†Œåœ¨å…¨å±€å‘½åç©ºé—´çš„â€”â€”è¿™æ ·ä½¿å¾—å¤šä¸ªæ¨¡å—èƒ½å¤Ÿå¯¹åŒä¸€ mutation æˆ– action ä½œå‡ºå“åº”ã€‚ å¦‚æœæƒ³è¦æ¨¡å—å…·æœ‰æ›´é«˜çš„å°è£…åº¦å’Œå¤ç”¨æ€§ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ  namespaced: true çš„æ–¹å¼ä½¿å…¶æˆä¸ºå¸¦å‘½åç©ºé—´çš„æ¨¡å—ã€‚å½“æ¨¡å—è¢«æ³¨å†Œåï¼Œå®ƒçš„æ‰€æœ‰ getterã€action åŠ mutation éƒ½ä¼šè‡ªåŠ¨æ ¹æ®æ¨¡å—æ³¨å†Œçš„è·¯å¾„è°ƒæ•´å‘½å getNamespaced1234567891011121314// module-collection.jsexport default class ModlueCollection &#123; ... // è·å–å‘½åç©ºé—´ getNamespaced(path) &#123; let root = this.root return path.reduce((pre, next)=&gt;&#123; // è·å–å­æ¨¡å— æŸ¥çœ‹æ˜¯å¦æœ‰namespacedå±æ€§ root = root.getChild(next) // æ‹¼æ¥ä¸Šæœ‰namespaceå±æ€§çš„è·¯å¾„ return pre + (root.namespaced ? next + &#x27;/&#x27; :&#x27;&#x27;) &#125;, &#x27;&#x27;) &#125;&#125; 1234567// module.jsexport default class Module &#123; ... get namespaced () &#123; return this._raw.namespaced &#125;&#125; æ·»åŠ  namespace12345678910111213141516171819202122232425function installModule(store, rootState, path, module) &#123; // è·å–å‘½åç©ºé—´ const namespaced = store._modules.getNamespaced(path) module.forEachMutations((mutations, type) =&gt; &#123; // æ·»åŠ  namespace store._mutations[namespaced + type] = (store._mutations[namespaced + type] || []) store._mutations[namespaced + type].push((payload) =&gt; &#123; mutations.call(store, module.state, payload) &#125;) &#125;) module.forEachActions((actions, type) =&gt; &#123; // æ·»åŠ  namespace store._actions[namespaced + type] = (store._actions[namespaced + type] || []) store._actions[namespaced + type].push((payload) =&gt; &#123; actions.call(store, store, payload) &#125;) &#125;) module.forEachGetters((getters, key) =&gt; &#123; store._wrappedGetters[namespaced + key] = () =&gt; &#123; return getters(module.state) &#125; &#125;) ...&#125; ä¸¥æ ¼æ¨¡å¼åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ— è®ºä½•æ—¶å‘ç”Ÿäº†çŠ¶æ€å˜æ›´ä¸”ä¸æ˜¯ç”± mutation å‡½æ•°å¼•èµ·çš„ï¼Œå°†ä¼šæŠ›å‡ºé”™è¯¯ã€‚è¿™èƒ½ä¿è¯æ‰€æœ‰çš„çŠ¶æ€å˜æ›´éƒ½èƒ½è¢«è°ƒè¯•å·¥å…·è·Ÿè¸ªåˆ°ã€‚ æ¥æ”¶ strict é…ç½®é¡¹ï¼Œæ·»åŠ  mutation æäº¤çŠ¶æ€æ ‡è¯†123456789101112131415161718192021222324252627282930313233343536373839class Store &#123; constructor(options) &#123; ... // strict mode const &#123; strict = false &#125; = options this.strict = strict // æ·»åŠ  committing çŠ¶æ€ this._committing = false //å®ç°çŠ¶æ€å“åº”å¼ resetStoreVm(this, state) &#125; // åœ¨ mutation ä¹‹å‰ï¼Œè®¾ç½® _committing = true, è°ƒç”¨ mutation ä¹‹åæ›´æ”¹çŠ¶æ€ // å¦‚æ­¤å½“çŠ¶æ€å˜åŒ–æ—¶ï¼Œ_committing ä¸º trueï¼Œè¯´æ˜æ˜¯åŒæ­¥æ›´æ”¹ï¼Œfalse è¯´æ˜æ˜¯é mutation æäº¤ _withCommit = (fn) =&gt; &#123; var committing = this._committing; this._committing = true; fn(); this._committing = committing; &#125; // ä¿®æ”¹ commit æ–¹æ³•ï¼Œä½¿ç”¨ _withCommit è°ƒç”¨ mutation commit = (type, payload) =&gt; &#123; if (!this._mutations[type]) &#123; throw new Error(`Mutation &quot;$&#123;type&#125;&quot; not found`); &#125; const entry = this._mutations[type] this._withCommit(() =&gt; &#123; entry.forEach((handler) =&gt; &#123; handler(payload) &#125;) &#125;) &#125;&#125;function resetStoreVm(store, state) &#123; ... // å¦‚æœå¼€å¯äº†ä¸¥æ ¼æ¨¡å¼ï¼Œåˆ™è°ƒç”¨ enableStrictMode if (store.strict) &#123; enableStrictMode(store) &#125;&#125; enableStrictModeç›‘å¬ state æ•°æ®å˜åŒ–ï¼Œåˆ¤æ–­ _committing å¦‚æœæ˜¯ true è¡¨ç¤ºæ˜¯åŒæ­¥æ‰§è¡Œï¼Œå¦‚æœä¸º falseï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯æç¤º 12345function enableStrictMode(store) &#123; store._vm.$watch(function () &#123; return this._data.$$state &#125;, () =&gt; &#123; console.assert(store._committing, `[vuex] do not mutate vuex store state outside mutation handlers.`) &#125;, &#123; deep: true, sync: true &#125;)&#125; ä»¥ä¸Šåªæ˜¯åŸºäºvuexæºç å®ç°äº†æœ€æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œä½†å®ƒå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£äº† Vuex çš„æ¨¡å—åŒ–çš„å®ç°åŸç†ã€‚æœ¬æ¥è®¡åˆ’åœ¨è¿™ç¯‡ä¸­å®ç° mapè¾…åŠ©å‡½æ•°ï¼Œä½†å‘ç°æ¨¡å—åŒ–çš„å†™èµ·æ¥å®åœ¨å¤ªå¤šäº†ï¼Œæ‰€ä»¥å°† mapStateã€ mapGettersã€ mapMutationsã€ mapActions æ”¾åˆ°ä¸‹ç¯‡è®²è§£ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ vuex æºç ã€‚ å®Œæ•´ä»£ç ç³»åˆ—æ–‡ç«  ã€é€ è½®å­ç³»åˆ—ã€‘é¢è¯•å®˜é—®ï¼šä½ èƒ½æ‰‹å†™Vuexå—(ä¸€) ã€é€ è½®å­ç³»åˆ—ã€‘é¢è¯•å®˜é—®ï¼šä½ èƒ½æ‰‹å†™Vuexå—(ä¸‰)","categories":[{"name":"vuex","slug":"vuex","permalink":"http://example.com/categories/vuex/"}],"tags":[{"name":"vuex æºç ","slug":"vuex-æºç ","permalink":"http://example.com/tags/vuex-%E6%BA%90%E7%A0%81/"}]},{"title":"æ‰‹å†™ Vuex(ä¸€)","slug":"vuex1","date":"2023-04-10T03:01:42.000Z","updated":"2023-04-10T03:01:42.000Z","comments":true,"path":"2023/04/10/vuex1/","permalink":"http://example.com/2023/04/10/vuex1/","excerpt":"","text":"Vuex æ˜¯ Vue.js çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼Œå®ƒä¸»è¦è§£å†³äº†ç»„ä»¶ä¹‹é—´å…±äº«çŠ¶æ€æ—¶çš„é—®é¢˜ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç®€å•çš„çŠ¶æ€ç®¡ç†å™¨ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£ Vuex çš„å®ç°åŸç†ã€‚ ä½¿ç”¨ vue.use å¯ç”¨ vuex æ’ä»¶vue.use æ˜¯ vue æä¾›çš„å®‰è£…æ’ä»¶ APIã€‚å¦‚æœæ’ä»¶æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»æä¾› install æ–¹æ³•ã€‚å¦‚æœæ’ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šè¢«ä½œä¸º install æ–¹æ³•ã€‚install æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šå°† Vue ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚è¿™ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Vue æ„é€ å™¨ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰çš„é€‰é¡¹å¯¹è±¡ã€‚ å³éœ€è¦å¯¼å‡º install æ–¹æ³•ï¼ŒåŒæ—¶å¯¼å‡ºä¸€ä¸ªç±» Store ï¼Œäºæ˜¯å¯ä»¥å†™å‡ºä»¥ä¸‹ä»£ç ï¼š let Vue = null â€‹ class Store &#123; constructor(options) &#123;&#125; &#125; â€‹ function install(_Vue) &#123; Vue = _Vue &#125; â€‹ export default &#123; Store, install, &#125; å®ç° install æ–¹æ³•function install(_Vue) &#123; Vue = _Vue // install æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šå°† Vue ä½œä¸ºå‚æ•°ä¼ å…¥ // å®ç°æ¯ä¸€ä¸ªç»„ä»¶ï¼Œéƒ½èƒ½é€šè¿‡ this è°ƒç”¨ $store Vue.mixin(&#123; beforeCreate() &#123; // é€šè¿‡ this.$options å¯ä»¥è·å– new Vue(&#123;å‚æ•°&#125;) ä¼ é€’çš„å‚æ•° if (this.$options &amp;&amp; this.$options.store) &#123; // vueçš„åŸå‹ä¸ŠæŒ‚è½½ storeï¼ˆ Store çš„å®ä¾‹ ï¼‰ this.$store = this.$options.store // ç­‰åŒäº Vue.prototype.$store = this.$options.store &#125; &#125; &#125;) &#125; Storeåœ¨ Vuex ä¸­ï¼ŒStore æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œç”¨äºå­˜å‚¨å’Œç®¡ç†çŠ¶æ€( state )ï¼ŒåŒ…å«äº†ä»¥ä¸‹å‡ ä¸ªä¸»è¦éƒ¨åˆ†ï¼š stateï¼šå­˜å‚¨çŠ¶æ€çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å…¨å±€è¦å…±äº«çš„æ•°æ®ã€‚ gettersï¼šåŒ…å«ä¸€äº›å‡½æ•°ï¼Œç”¨äºå¯¹ state è¿›è¡Œè®¡ç®—æ“ä½œã€‚ mutationsï¼šåŒ…å«ä¸€äº›å‡½æ•°ï¼Œç”¨äºæ”¹å˜ state çš„å€¼ã€‚ actionsï¼šåŒ…å«ä¸€äº›å‡½æ•°ï¼Œç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œæˆ–è€…ä¸€äº›é€»è¾‘å¤„ç†ã€‚ stateé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå­˜å‚¨å¯¹è±¡ï¼Œç”¨äºä¿å­˜åº”ç”¨ç¨‹åºçš„æ‰€æœ‰çŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º Store çš„ç±»ï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ã€‚æˆ‘ä»¬è¿˜å¯ä»¥å°† state å¯¹è±¡å®šä¹‰ä¸ºå“åº”å¼çš„ï¼Œä»¥ä¾¿åœ¨çŠ¶æ€æ›´æ”¹æ—¶é€šçŸ¥ Vue æ›´æ–°è§†å›¾ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨ Vue.observable æ–¹æ³•æ¥å®ç° class Store &#123; constructor(options) &#123; const &#123; state = &#123;&#125; &#125; = options; // ä½¿ç”¨ observable å“åº”åŒ–å¤„ç† this.state = Vue.observable(state); &#125; &#125; getteræ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å®ç° gettersï¼Œä»¥ä¾¿ä»çŠ¶æ€ä¸­æ´¾ç”Ÿè®¡ç®—å±æ€§ã€‚æˆ‘ä»¬å°† getters æ·»åŠ åˆ° Store ç±»ä¸­ï¼š class Store &#123; constructor(options) &#123; const &#123; getters = &#123;&#125; &#125; = options; this.getters = &#123;&#125;; for (const [key, value] of Object.entries(getters)) &#123; Object.defineProperty(this.getters, key, &#123; get: () =&gt; value(this.state), &#125;); &#125; &#125; &#125; commitæœ€åï¼Œæˆ‘ä»¬éœ€è¦å®ç° mutations å’Œ actionsï¼Œä»¥ä¾¿æ›´æ”¹çŠ¶æ€å’Œå¤„ç†å¼‚æ­¥æ“ä½œã€‚mutations æ˜¯å”¯ä¸€å¯ä»¥æ›´æ”¹çŠ¶æ€çš„æ–¹æ³•ï¼Œè€Œ actions åˆ™æ˜¯å¤„ç†å¼‚æ­¥æ“ä½œçš„åœ°æ–¹ï¼Œå®ƒä»¬å¯ä»¥è§¦å‘ mutations æ¥æ›´æ”¹çŠ¶æ€ã€‚æˆ‘ä»¬å°† mutations å’Œ actions æ·»åŠ åˆ° Store ç±»ä¸­ï¼š åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª commit æ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ªç±»å‹å’Œæœ‰æ•ˆè½½è·å‚æ•°ï¼Œå¹¶è°ƒç”¨ä¸ç±»å‹åŒ¹é…çš„ mutation å‡½æ•°æ¥æ›´æ”¹çŠ¶æ€ã€‚ class Store &#123; constructor(options) &#123; const &#123; mutations = &#123;&#125; &#125; = options; this.mutations = mutations; commit(type, payload) &#123; if (!this.mutations[type]) &#123; throw new Error(`Mutation &quot;$&#123;type&#125;&quot; not found`); &#125; this.mutations[type](this.state, payload); &#125; &#125; &#125; dispatchè¿˜éœ€è¦æ·»åŠ äº†ä¸€ä¸ª dispatch æ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ªç±»å‹å’Œæœ‰æ•ˆè½½è·å‚æ•°ï¼Œå¹¶è°ƒç”¨ä¸ç±»å‹åŒ¹é…çš„ action å‡½æ•°ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬å°† commit å’Œ state ä½œä¸ºå‚æ•°ä¼ é€’ç»™ action å‡½æ•°ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ›´æ”¹çŠ¶æ€æ—¶ä½¿ç”¨ã€‚ class Store &#123; constructor(options) &#123; const &#123; actions = &#123;&#125; &#125; = options; this.actions = actions; dispatch(type, payload) &#123; if (!this.actions[type]) &#123; throw new Error(`Action &quot;$&#123;type&#125;&quot; not found`); &#125; return this.actions[type](&#123; commit: this.commit, state: this.state &#125;, payload); &#125; &#125; &#125; è¿™ä¸ªç®€å•çš„çŠ¶æ€ç®¡ç†å™¨åªæ˜¯ Vuex çš„ä¸€éƒ¨åˆ†å®ç°ï¼Œä½†å®ƒå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£äº† Vuex çš„æ¦‚å¿µå’Œå®ç°åŸç†ã€‚ä½ ä¼šå‘ç°è¿˜æ²¡æœ‰å®ç° mapè¾…åŠ©å‡½æ•°ã€æ¨¡å—åŒ–ä»¥åŠä¸¥æ ¼æ¨¡å¼ç­‰ï¼Œåç»­å°†ä¸€æ­¥æ­¥å®Œå–„ï¼Œå¯¹æ¯”ä¸ vuex4ã€pinia çš„å·®å¼‚åŒ–ç­‰ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼ å®Œæ•´ä»£ç ç³»åˆ—æ–‡ç«  ã€é€ è½®å­ç³»åˆ—ã€‘é¢è¯•å®˜é—®ï¼šä½ èƒ½æ‰‹å†™Vuexå—(äºŒ) ã€é€ è½®å­ç³»åˆ—ã€‘é¢è¯•å®˜é—®ï¼šä½ èƒ½æ‰‹å†™Vuexå—(ä¸‰)","categories":[{"name":"vuex","slug":"vuex","permalink":"http://example.com/categories/vuex/"}],"tags":[{"name":"vuex æºç ","slug":"vuex-æºç ","permalink":"http://example.com/tags/vuex-%E6%BA%90%E7%A0%81/"}]},{"title":"[è¯‘] Volar: ä¸€ä¸ªæ–°çš„å¼€å§‹","slug":"volar","date":"2023-04-06T04:00:00.000Z","updated":"2023-04-06T04:00:00.000Z","comments":true,"path":"2023/04/06/volar/","permalink":"http://example.com/2023/04/06/volar/","excerpt":"","text":"åŸæ–‡ https://blog.vuejs.org/posts/volar-a-new-beginning.html å¤§å¤šæ•° Volar ç”¨æˆ·éƒ½çŸ¥é“å®ƒæ˜¯çš„ Vue.js çš„ VSCode æ‰©å±•ã€‚å®ƒæœ€åˆæ˜¯ä¸€ä¸ªä¸ªäººé¡¹ç›®ï¼Œå½“æ—¶å®˜æ–¹æ¨èçš„è¿˜æ˜¯ Vetur ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œç”±äºæ”¹è¿›çš„æ¶æ„å’Œæ€§èƒ½è€Œè¢«é‡‡çº³ä¸ºæ–°çš„å®˜æ–¹æ‰©å±•ã€‚ ä½œä¸ºä¸€ä¸ªæ—¨åœ¨æ”¹å–„å¼€å‘äººå‘˜å¼€å‘è´¨é‡çš„é¡¹ç›®ï¼Œæˆ‘ä»¬èŠ±äº†ä¸¤å¹´å¤šçš„æ—¶é—´æ‰å‘å¸ƒ 1.0 ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä¸€ç›´åœ¨ä¸æ–­æ”¹è¿›ç¨³å®šæ€§ã€‚ ä½†æˆ‘ä»¬è¿˜æœ‰æ›´å¤šå·¥ä½œè¦åšï¼Œ2023 å¹´æœ‰ä»¤äººå…´å¥‹çš„è®¡åˆ’ã€‚ Volar.jsï¼šåµŒå…¥å¼è¯­è¨€å·¥å…·æ¡†æ¶å°½ç®¡æœ€åˆæ˜¯ä¸º Vue å•æ–‡ä»¶ç»„ä»¶çš„ç‰¹å®šéœ€æ±‚è€Œè®¾è®¡çš„ï¼Œä½† Volar çš„ä»£ç åº“åŒ…å«è®¸å¤šä¸ç‰¹å®šäº Vue çš„éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼š åµŒå…¥å¼ç¼–ç¨‹è¯­è¨€çš„å¤„ç†ï¼ˆå¤šå…ƒæ¡†æ¶çš„é€šç—…ï¼‰ Vue è¯­è¨€æœåŠ¡å™¨å®é™…ä¸Šæ˜¯ä¸€ä¸ªæˆç†Ÿçš„ TypeScript è¯­è¨€æœåŠ¡å™¨ å¤„ç†ä¸ LSP &#x2F; Web &#x2F; åµŒå…¥å¼è¯­è¨€æœåŠ¡ç­‰äº¤äº’çš„ä»£ç  æˆ‘ä»¬ç°åœ¨å·²ç»å°†è¿™äº›é€šç”¨éƒ¨åˆ†æå–åˆ°ä¸€ç»„ä¸æ¡†æ¶æ— å…³çš„å·¥å…·ä¸­ã€‚è¿™äº›å·¥å…·ç°åœ¨ä½œä¸ºä¸€ä¸ªæ–°çš„ç‹¬ç«‹é¡¹ç›®è¿›è¡Œç»´æŠ¤ï¼šVolar.jsã€‚ Volar.js çš„æ¶æ„æ”¯æŒä»»ä½•æ¶‰åŠåµŒå…¥å¼è¯­è¨€çš„æ–‡ä»¶æ ¼å¼â€”â€”ä¸ä»…æ˜¯ Vueï¼Œè¿˜åŒ…æ‹¬ Astroã€Svelteï¼Œç”šè‡³ Angularã€‚å®ƒè¿˜èƒ½å¤Ÿå®ç°å¸¸è§„çš„å•è¯­è¨€ LSP æœåŠ¡å™¨ï¼Œä¾‹å¦‚ TypeScriptã€CSS å’Œ HTMLã€‚ Volar.js çš„å¦ä¸€ä¸ªä¸»è¦å…³æ³¨ç‚¹æ˜¯æ€§èƒ½ã€‚å®ƒæ—¨åœ¨æœ€å¤§é™åº¦åœ°å‡å°‘å®ç°æœ¬åœ°åµŒå…¥å¼è¯­è¨€æœåŠ¡æ€§èƒ½çš„å¼€é”€ã€‚æœ‰è®¸å¤šé—®é¢˜å’Œä¼˜åŒ–æœºä¼šåªèƒ½åœ¨ç›¸å½“å¤§çš„ç”¨æˆ·åŸºç¡€ä¸Šæ…¢æ…¢å‘ç°ï¼Œè€Œ Volar.js çš„ä¼˜åŒ–æ˜¯åŸºäºæˆ‘ä»¬ä»æ•°ç™¾ä¸‡æ¬¡ä¸‹è½½ä¸­ç§¯ç´¯çš„ç»éªŒã€‚ ä¾‹å¦‚ï¼Œå­—èŠ‚è·³åŠ¨çš„ Lynx å›¢é˜Ÿæ˜¯ Volar.js çš„æ—©æœŸé‡‡ç”¨è€…ï¼Œä¸€ä¸ªå¼€å‘äººå‘˜ç”¨ä¸¤å‘¨çš„æ—¶é—´äº¤ä»˜äº†ä¸€æ•´å¥—æ”¯æŒå…¶å†…éƒ¨æ¡†æ¶çš„è¯­è¨€å·¥å…·ã€‚å¦‚æœä»å¤´å¼€å§‹æ„å»ºï¼Œå³ä½¿æ˜¯ä¸€ä¸ªå›¢é˜Ÿï¼Œä¹Ÿéœ€è¦å‡ ä¸ªæœˆçš„æ—¶é—´ã€‚ æ—§çš„ Volar ç°åœ¨æ˜¯ vuejs&#x2F;language-toolsæå–æ ¸å¿ƒåï¼ŒåŸå§‹ Volar æ‰©å±•çš„ä»£ç åº“vue-tscå·²ç§»è‡³vuejs/language-toolså­˜å‚¨åº“ã€‚è¿™ä¸ª repo ç°åœ¨ä¾èµ–äº Volar.js å¹¶åŒ…å« Vue ç‰¹å®šæ”¯æŒçš„ä»£ç ã€‚ æˆ‘ä»¬è¿˜å°†æŠŠä¸€äº› npm åŒ…ä»@volar npm ç»„ç»‡ç§»åˆ°@vue- ä½†è¿™äº›æ›´æ”¹ä¸åº”è¯¥å½±å“æœ€ç»ˆç”¨æˆ·ã€‚ å›¢é˜Ÿä¸ç»„ç»‡ç±»ä¼¼äº Vite è¯ç”Ÿäº Vue ç”Ÿæ€ç³»ç»Ÿï¼Œå¹¶æœ€ç»ˆå‘å±•æˆè‡ªå·±çš„ç¤¾åŒºï¼Œè¿æ¥æ•´ä¸ª Web å¼€å‘ç”Ÿæ€ç³»ç»Ÿçš„ç”¨æˆ·ï¼ŒVolar.js å¸Œæœ›éµå¾ªåŒæ ·çš„é“è·¯ã€‚ æˆ‘ ( @johnsoncodehk ) å·²ç»ä¸Astro æ ¸å¿ƒå›¢é˜Ÿæˆå‘˜Erika ( @erika )å»ºç«‹äº† Volar.js æ ¸å¿ƒå›¢é˜Ÿã€‚Erika ä¸æˆ‘ä¸€æ ·ï¼Œè‡´åŠ›äºæ”¹å–„äººä»¬çš„å¼€å‘ä½“éªŒã€‚æˆ‘ä»¬å°†å…±åŒåŠªåŠ›ï¼Œä¸ºæ‰€æœ‰ç½‘ç»œå¼€å‘è€…æ”¹è¿› DXï¼Œè€Œä¸ä»…ä»…æ˜¯ Vue å’Œ Astroã€‚ æˆ‘ä»¬å·²ç»åˆ›å»ºäº† volarjs ç»„ç»‡æ¥ç»´æŠ¤æ¡†æ¶å’Œç›¸å…³çš„å›è´­åè®®ã€‚ volar.js : æ¡†æ¶çš„æ ¸å¿ƒ plugins : å¯ä»¥åœ¨volar.config.jsæ¡†æ¶ä¸­æˆ–æ’ä»¶ä¸­ä½¿ç”¨ volarjs.github.io : å®˜æ–¹ç½‘ç«™ language-tools-starterï¼šå¼€å§‹ä½¿ç”¨ Volar.js æ„å»ºè¯­è¨€æœåŠ¡å™¨çš„æ¨¡æ¿ ecosystem-ciï¼šç”¨äºè¿è¡Œ volar ç”Ÿæ€ç³»ç»Ÿé¡¹ç›®çš„é›†æˆæµ‹è¯• pug-language-tools : åŸºäº language-tools-starter çš„ Pug å·¥å…· angular-language-toolsï¼šåŸºäº language-tools-starter çš„ Angular ç¤ºä¾‹ svelte-language-toolsï¼šåŸºäº language-tools-starter çš„ Svelte ç¤ºä¾‹ æ­¤å¤–ï¼Œæˆ‘å¾ˆé«˜å…´åœ°å®£å¸ƒï¼š StackBlitzå°†å…¨èŒæ”¯æŒæˆ‘åœ¨ Volar.js ä¸Šå·¥ä½œï¼ æˆ‘ä»¬å¯¹æœªæ¥æ„Ÿåˆ°å…´å¥‹ï¼Œè¿«ä¸åŠå¾…åœ°æƒ³çœ‹çœ‹åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªæœˆé‡Œæˆ‘ä»¬èƒ½å–å¾—ä»€ä¹ˆæˆå°±ï¼ ä¸‹ä¸€æ­¥æˆ‘ä»¬æ‰åˆšåˆšèµ·æ­¥ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ²¡æœ‰æ˜ç¡®çš„é•¿æœŸè·¯çº¿å›¾ï¼Œä½†è¿™é‡Œæœ‰ä¸€äº›æˆ‘ä»¬è®¡åˆ’æ¥ä¸‹æ¥æ¢ç´¢å’ŒåŠªåŠ›çš„ä¸»è¦æ–¹å‘ã€‚ Monacoæ”¯æŒMonaco å¯¹ Vue çš„æ”¯æŒç›®å‰ç”± å®ç° monaco-volar å®ç°ï¼Œæˆ‘ä»¬è®¡åˆ’åœ¨æ¡†æ¶ä¸­æ”¯æŒå®ƒï¼Œå› æ­¤æ‰€æœ‰åŸºäº Volar.js çš„è¯­è¨€æœåŠ¡å™¨éƒ½å¯ä»¥è½»æ¾åˆ©ç”¨å®ƒã€‚ æ”¯æŒ VSCode ä»¥å¤–çš„ IDEé™¤äº† VSCode ä¹‹å¤–ï¼Œè®¸å¤šæ…·æ…¨çš„è´¡çŒ®è€…è¿˜ä¸º Volar å®ç°äº†å…¶ä»–IDEçš„è¯­è¨€å®¢æˆ·ç«¯ï¼Œå¦‚ Vimã€Sublimeã€Atomã€Emacsã€Novaã€Lapce ã€‚ æ‹¥æœ‰ä¸€æ•´å¥—çš„IDEæ”¯æŒå¯ä»¥æœ‰å¾ˆå¤§çš„å‚è€ƒä»·å€¼ï¼Œå› ä¸ºå¾ˆå°‘æœ‰äººèƒ½å¤Ÿç²¾é€šæ‰€æœ‰è¿™äº›IDEã€‚ æˆ‘ä»¬å°†å¯»æ‰¾æ–¹æ³•æ¥åˆ©ç”¨è¿™äº›è´¡çŒ®è€…çš„åŠªåŠ›æ¥å‡å°‘æ¡†æ¶é‡‡ç”¨è€…åœ¨ VSCode ä¹‹å¤–å®ç°è¯­è¨€å®¢æˆ·ç«¯çš„å·¥ä½œé‡ã€‚ æ­¤å¤–ï¼Œè™½ç„¶ IntelliJ æ²¡æœ‰ä¸€æµçš„ LSP æ”¯æŒï¼Œä½†æˆ‘ä»¬å°†ç ”ç©¶æ˜¯å¦å¯ä»¥å°†å…¶ä¸æ¡†æ¶é›†æˆã€‚ Bun åŸºç¡€è¯­è¨€æœåŠ¡å™¨ç†è®ºä¸Šï¼ŒVolar çš„æ€§èƒ½åªèƒ½æ— é™æ¥è¿‘ï¼Œä½†ä¸ä¼šå¿«äº vanilla TS è¯­è¨€æœåŠ¡å™¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœ Volar è¯­è¨€æœåŠ¡å™¨å¯ä»¥é€šè¿‡åœ¨ Bun ä¸­è¿è¡Œæ¥è·å¾—æ€§èƒ½æå‡ï¼Œå®ƒå¯èƒ½ä¼šæ”¹å˜æ¸¸æˆè§„åˆ™ã€‚ ä»¥å‰ Bun çš„è¿è¡Œæ—¶è¿˜ä¸å…¼å®¹åŸºäº Node.js çš„ LSP æœåŠ¡å™¨ã€‚æˆ‘ä»¬ä¼šæŒç»­å…³æ³¨ç›¸å…³é—®é¢˜ï¼Œå¾…é—®é¢˜è§£å†³åé‡è¯•ã€‚ åŒæ ·ï¼Œæ‰€æœ‰åŸºäº Volar.js çš„è¯­è¨€æœåŠ¡å™¨éƒ½å°†èƒ½å¤Ÿç›´æ¥ä»ä¸­å—ç›Šã€‚ å•ä½“æœåŠ¡å™¨æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæ¯ä¸€ç§è¯­è¨€éƒ½éœ€è¦æ”¯æŒä¸€äº› TypeScript ç‰¹æ€§ï¼Œé‚£ä¹ˆæ¯ä¸€ç§è¯­è¨€çš„è¯­è¨€æœåŠ¡å™¨éƒ½ä¼šè¿è¡Œè‡ªå·±æ˜‚è´µçš„ TypeScript Language Service å®ä¾‹ï¼Œè¿™è®©äº‹æƒ…å˜å¾—æœ‰ç‚¹å¯æ€•ï¼Œå› ä¸ºå†…å­˜å’Œ CPU ä½¿ç”¨ç‡éƒ½ä¼šæˆå€å¢åŠ ï¼Œè€Œè¿™ç§æƒ…å†µä»Šå¤©å·²ç»å‘ç”Ÿäº†ã€‚ å¦‚æœè¿™äº›è¯­è¨€æœåŠ¡å™¨ä¸­çš„ä¸€äº›æ˜¯åŸºäº Volar.js çš„ï¼Œæˆ‘ä»¬å¯èƒ½æœ‰ä¸€äº›æ–¹æ³•è®©ä»–ä»¬å†³å®šåªæ¿€æ´»ä¸€ä¸ªè¯­è¨€æœåŠ¡å™¨ï¼Œç„¶åå°†å…¶ä½™è¯­è¨€æœåŠ¡å™¨çš„åŠŸèƒ½å…±äº«ç»™æ¿€æ´»çš„æœåŠ¡å™¨ï¼Œè¿™æ ·åœ¨æœ€ç»ˆæˆ‘ä»¬åªéœ€è¦åœ¨ä¸€ä¸ªè¯­è¨€æœåŠ¡å™¨å®ä¾‹è€Œä¸æ˜¯å¤šä¸ªè¯­è¨€æœåŠ¡å™¨ä¸­è¿è¡Œ TypeScript è¯­è¨€æœåŠ¡ã€‚ è¿™ä¹Ÿå¯ä»¥è§£å†³ TypeScript æ’ä»¶æ— æ³•æ”¯æŒçš„ä¸€äº›ç”¨ä¾‹ã€‚ åŸºäº Volar.js æ¶æ„ï¼Œæˆ‘ä»¬å·²ç»éå¸¸æ¥è¿‘è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘å’Œ Erika å°†ä¸º Vue å’Œ Astro è¯­è¨€æœåŠ¡å™¨æ¢ç´¢è¿™ä¸ªç‰¹æ€§ã€‚ è§„åˆ™ APIï¼ˆå†…ç½® Linterï¼‰ä½ å¯èƒ½åœ¨ ESLint å’Œ Prettier ä¸€èµ·ä½¿ç”¨æ—¶é‡åˆ°å„ç§é—®é¢˜ï¼Œè€Œæˆ‘ä»¬è¿‡å»åŸºäº Plugin API çš„å°è¯•å¹¶æ²¡æœ‰å¾ˆå¥½åœ°é¿å…è¿™ä¸ªé—®é¢˜ã€‚ Rules API æ˜¯é¿å…ä¸åŒ linting å·¥å…·ä¹‹é—´å†²çªçš„å¦ä¸€ç§å°è¯•ï¼ŒåŒæ—¶ä¹Ÿç¡®ä¿æ€§èƒ½å’Œç‰¹æ€§ä¸ IDE å®Œç¾é›†æˆã€‚ å¯¹äºå…ƒæ¡†æ¶ï¼Œä»–ä»¬éœ€è¦ä¸º ESLint å’Œ Prettier å®ç°è‡ªå·±çš„è§£æå™¨ï¼Œä½†æ˜¯æœ‰äº† Rules APIï¼Œä»–ä»¬ç”šè‡³ä¸éœ€è¦è¿™æ ·åšï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥å¤ç”¨ Volar è¯­è¨€æœåŠ¡å™¨çš„è§£æå™¨ã€‚ å› æ­¤ï¼Œå¦‚æœæ‚¨ç¼–å†™äº†ä¸€ä¸ª TS è§„åˆ™ï¼Œå®ƒå°†ç›´æ¥é€šè¿‡ Rules API ç”¨äº Vue&lt;script&gt;å’Œæ¨¡æ¿ä¸­çš„ TypeScript ä»£ç ï¼Œè€Œæ— éœ€é¢å¤–çš„è§£æå™¨ã€‚ è¿™å¹¶ä¸æ„å‘³ç€æ‚¨éœ€è¦é‡å†™æ‰€æœ‰è§„åˆ™ï¼›Rules API åªæ˜¯ä¸€ä¸ª APIï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„ linterï¼Œå› æ­¤ä»ç„¶å¯ä»¥å¤ç”¨ ESLintã€TSLint ç”šè‡³ Rome ä¸­çš„ä¸€äº›è§„åˆ™ã€‚ è„šæœ¬APIå¯¹äº Vue æˆ‘ä»¬æœ‰vue-tscæ£€æŸ¥ TS ä»£ç ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¹Ÿæƒ³åœ¨ CI ä¸­åŒæ—¶æ£€æŸ¥ CSS å’Œ Vue Template ä»£ç ã€‚ Scripts API æ—¨åœ¨å…¬å¼€è¯­è¨€æœåŠ¡å™¨çš„æ ¼å¼åŒ–å’Œ linting åŠŸèƒ½ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥åœ¨è„šæœ¬ä¸­ä½¿ç”¨ï¼Œå…è®¸æ‚¨åœ¨ CI æˆ– git é¢„æäº¤é’©å­ä¸­ä½¿ç”¨å®ƒå¹¶è·å¾—ä¸åœ¨ IDE ä¸­ç›¸åŒçš„ç»“æœã€‚","categories":[{"name":"å¤–æ–‡ç¿»è¯‘","slug":"å¤–æ–‡ç¿»è¯‘","permalink":"http://example.com/categories/%E5%A4%96%E6%96%87%E7%BF%BB%E8%AF%91/"}],"tags":[{"name":"vue","slug":"vue","permalink":"http://example.com/tags/vue/"},{"name":"å¤–æ–‡ç¿»è¯‘","slug":"å¤–æ–‡ç¿»è¯‘","permalink":"http://example.com/tags/%E5%A4%96%E6%96%87%E7%BF%BB%E8%AF%91/"},{"name":"Volar","slug":"Volar","permalink":"http://example.com/tags/Volar/"}]},{"title":"[è¯‘] TypeScript 5.0 å‘å¸ƒ","slug":"typescript","date":"2023-03-19T04:00:00.000Z","updated":"2023-03-19T04:00:00.000Z","comments":true,"path":"2023/03/19/typescript/","permalink":"http://example.com/2023/03/19/typescript/","excerpt":"","text":"åŸæ–‡åœ°å€ï¼šAnnouncing TypeScript 5.0 2023.3.16 by Daniel Rosenwasser and the TypeScript Team ä»Šå¤©ï¼Œæˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒ TypeScript 5.0 çš„å‘å¸ƒï¼ æ­¤ç‰ˆæœ¬å¸¦æ¥äº†è®¸å¤šæ–°åŠŸèƒ½ï¼ŒåŒæ—¶æ—¨åœ¨ä½¿ TypeScript æ›´å°ã€æ›´ç®€å•ã€æ›´å¿«ã€‚æˆ‘ä»¬å·²ç»å®æ–½äº†æ–°çš„è£…é¥°å™¨æ ‡å‡†ï¼Œæ·»åŠ äº†æ›´å¥½åœ°æ”¯æŒ Node å’Œ bundlers ä¸­çš„ ESM é¡¹ç›®çš„åŠŸèƒ½ï¼Œä¸ºåº“ä½œè€…æä¾›äº†æ§åˆ¶æ³›å‹æ¨ç†çš„æ–°æ–¹æ³•ï¼Œæ‰©å±•äº†æˆ‘ä»¬çš„ JSDoc åŠŸèƒ½ï¼Œç®€åŒ–äº†é…ç½®ï¼Œå¹¶è¿›è¡Œäº†è®¸å¤šå…¶ä»–æ”¹è¿›ã€‚ å¦‚æœæ‚¨è¿˜ä¸ç†Ÿæ‚‰ TypeScriptï¼Œå®ƒæ˜¯ä¸€ç§åŸºäº JavaScript çš„è¯­è¨€ï¼Œé€šè¿‡æ·»åŠ ç±»å‹è¯­æ³•æ¥è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ç±»å‹æ£€æŸ¥å¯ä»¥å¸®åŠ©å‘ç°è®¸å¤šå¸¸è§é”™è¯¯ï¼Œä»é”™åˆ«å­—åˆ°é€»è¾‘é”™è¯¯ã€‚å°†ç±»å‹å¼•å…¥ JavaScript è¿˜ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ„å»ºå‡ºè‰²çš„å·¥å…·ï¼Œå› ä¸ºç±»å‹å¯ä»¥åœ¨æ‚¨å–œæ¬¢çš„ç¼–è¾‘å™¨ä¸­æ”¯æŒä»£ç è¡¥å…¨ã€ç›´æ¥å®šä¹‰å’Œé‡æ„ç­‰åŠŸèƒ½ã€‚äº‹å®ä¸Šï¼Œå¦‚æœæ‚¨ä½¿ç”¨è¿‡ Visual Studio æˆ– VS Code ç­‰ç¼–è¾‘å™¨ï¼ŒTypeScript å·²ç»æä¾›äº† JavaScript ä½“éªŒï¼æ‚¨å¯ä»¥åœ¨ https://typescriptlang.org ä¸Šäº†è§£è¿™é—¨è¯­è¨€ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å·²ç»ç†Ÿæ‚‰ TypeScriptï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒï¼5.0 ä¸æ˜¯ç ´åæ€§ç‰ˆæœ¬ï¼Œä½ æ‰€çŸ¥é“çš„ä¸€åˆ‡ä»ç„¶é€‚ç”¨ã€‚è™½ç„¶ TypeScript 5.0 åŒ…æ‹¬æ­£ç¡®æ€§æ›´æ”¹å’Œä¸€äº›ä¸å¸¸ç”¨é€‰é¡¹çš„å¼ƒç”¨ï¼Œä½†æˆ‘ä»¬ç›¸ä¿¡å¤§å¤šæ•°å¼€å‘äººå‘˜éƒ½ä¼šæœ‰ä¸ä»¥å‰ç‰ˆæœ¬ç±»ä¼¼çš„å‡çº§ä½“éªŒã€‚ è¦å¼€å§‹ä½¿ç”¨ TypeScript 5.0ï¼Œæ‚¨å¯ä»¥é€šè¿‡ NuGetè·å–å®ƒï¼Œæˆ–è€…ä½¿ç”¨ npm å’Œä¸‹é¢çš„å‘½ä»¤ï¼š 1npm install -D typescript ä½ ä¹Ÿå¯ä»¥æŒ‰ç…§æŒ‡ç¤ºåœ¨ Visual Studio Code ä¸­ä½¿ç”¨æ–°ç‰ˆæœ¬çš„ TypeScript çš„è¯´æ˜è¿›è¡Œæ“ä½œã€‚ è¿™æ˜¯ TypeScript 5.0 ä¸­æ–°åŠŸèƒ½çš„å¿«é€Ÿåˆ—è¡¨ï¼ è£…é¥°å™¨ const æ³›å‹å‚æ•° extends æ”¯æŒå¤šä¸ªé…ç½®æ–‡ä»¶ æ‰€æœ‰çš„æšä¸¾éƒ½æ˜¯è”åˆæšä¸¾ --moduleResolution é…ç½®æ–°å¢ bundler æ”¯æŒ è‡ªå®šä¹‰è§£ææ ‡å¿— --verbatimModuleSyntax æ”¯æŒ export type * JSDoc æ”¯æŒ @satisfies JSDoc æ”¯æŒ @overload è¿è¡Œ tsc --build å¯ä»¥ä¼ å…¥çš„æ–°æŒ‡ä»¤ ç¼–è¾‘å™¨ä¸­ä¸åŒºåˆ†å¤§å°å†™çš„å¯¼å…¥æ’åº switch&#x2F;case è¯­æ³•è¡¥è¶³ é€Ÿåº¦ã€å†…å­˜å’ŒåŒ…å¤§å°ä¼˜åŒ– é‡å¤§æ›´æ”¹å’Œå¼ƒç”¨ ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Ÿ è‡ª Beta å’Œ RC ä»¥æ¥æœ‰ä»€ä¹ˆæ–°åŠŸèƒ½ï¼Ÿè‡ª beta ç‰ˆå‘å¸ƒä»¥æ¥ï¼Œ TypeScript 5.0 æœ‰å‡ ä¸ªæ˜¾è‘—çš„å˜åŒ–ã€‚ è‡ª TypeScript 5.0 Beta ä»¥æ¥ï¼Œä¸€ä¸ªæ–°åŒºåˆ«æ˜¯ TypeScript å…è®¸å°†è£…é¥°å™¨æ”¾ç½®åœ¨ export å’Œ export default ä¹‹å‰æˆ–ä¹‹åã€‚è¿™ä¸€å˜åŒ–åæ˜ äº† TC39ï¼ˆECMAScript&#x2F;JavaScript çš„æ ‡å‡†æœºæ„ï¼‰å†…éƒ¨çš„è®¨è®ºå’Œå…±è¯†ã€‚ å¦ä¸€ä¸ªæ˜¯æ–°çš„ bundler æ¨¡å—è§£æé€‰é¡¹åªèƒ½åœ¨ --module é€‰é¡¹è®¾ç½®ä¸º esnext æ—¶ä½¿ç”¨ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†ç¡®ä¿åœ¨è¾“å…¥æ–‡ä»¶ä¸­å†™å…¥çš„ import è¯­å¥ä¸ä¼šåœ¨æ†ç»‘å™¨è§£æå®ƒä»¬ä¹‹å‰è½¬æ¢ä¸º require è°ƒç”¨ï¼Œæ— è®ºæ†ç»‘å™¨æˆ–åŠ è½½å™¨æ˜¯å¦éµä» TypeScript çš„ module é€‰é¡¹ã€‚æˆ‘ä»¬è¿˜åœ¨è¿™äº›å‘å¸ƒè¯´æ˜ä¸­æä¾›äº†ä¸€äº›ä¸Šä¸‹æ–‡ï¼Œå»ºè®®å¤§å¤šæ•°åº“ä½œè€…åšæŒä½¿ç”¨ node16 or nodenextã€‚ è™½ç„¶ TypeScript 5.0 Beta é™„å¸¦äº†æ­¤åŠŸèƒ½ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰è®°å½•æˆ‘ä»¬åœ¨ç¼–è¾‘å™¨åœºæ™¯ä¸­æ”¯æŒä¸åŒºåˆ†å¤§å°å†™çš„å¯¼å…¥æ’åºçš„å·¥ä½œã€‚è¿™éƒ¨åˆ†æ˜¯å› ä¸ºç”¨äºè‡ªå®šä¹‰çš„ UX ä»åœ¨è®¨è®ºä¸­ï¼Œä½†é»˜è®¤æƒ…å†µä¸‹ï¼ŒTypeScript ç°åœ¨åº”è¯¥å¯ä»¥æ›´å¥½åœ°ä¸æ‚¨çš„å…¶ä»–å·¥å…·ä¸€èµ·ä½¿ç”¨ã€‚ è‡ªæˆ‘ä»¬çš„ RC ä»¥æ¥ï¼Œæˆ‘ä»¬æœ€æ˜¾è‘—çš„å˜åŒ–æ˜¯ TypeScript 5.0 ç°åœ¨åœ¨ package.json ä¸­æŒ‡å®šäº† Node.js çš„æœ€ä½ç‰ˆæœ¬ä¸º 12.20ã€‚ æˆ‘ä»¬è¿˜å‘å¸ƒäº†ä¸€ç¯‡å…³äº TypeScript 5.0 å‘ modules è¿ç§»çš„æ–‡ç« ï¼Œå¹¶æä¾›äº†é“¾æ¥ã€‚ è‡ª TypeScript 5.0 Beta å’Œ RC å‘å¸ƒä»¥æ¥ï¼Œé€Ÿåº¦åŸºå‡†å’ŒåŒ…å¤§å°å¢é‡çš„å…·ä½“æ•°å­—ä¹Ÿè¿›è¡Œäº†è°ƒæ•´ï¼Œå°½ç®¡å™ªéŸ³ä¸€ç›´æ˜¯è¿è¡Œè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªå› ç´ ã€‚ä¸ºäº†æ¸…æ™°èµ·è§ï¼Œè¿˜å¯¹ä¸€äº›åŸºå‡†çš„åç§°è¿›è¡Œäº†è°ƒæ•´ï¼ŒåŒ…å¤§å°çš„æ”¹è¿›ä¹Ÿè¢«ç§»è‡³å•ç‹¬çš„å›¾è¡¨ä¸­ã€‚ è£…é¥°å™¨è£…é¥°å™¨æ˜¯å³å°†æ¨å‡ºçš„ ECMAScript åŠŸèƒ½ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä»¥å¯é‡ç”¨çš„æ–¹å¼è‡ªå®šä¹‰ç±»åŠå…¶æˆå‘˜ã€‚ è®©æˆ‘ä»¬æ€è€ƒä»¥ä¸‹ä»£ç ï¼š 12345678910111213class Person &#123; name: string; constructor(name: string) &#123; this.name = name; &#125;â€‹ greet() &#123; console.log(`Hello, my name is $&#123;this.name&#125;.`); &#125;&#125;â€‹const p = new Person(&quot;Ron&quot;);p.greet(); greet è¿™é‡Œå¾ˆç®€å•ï¼Œä½†è®©æˆ‘ä»¬æƒ³è±¡å®ƒæ›´å¤æ‚â€”â€”ä¹Ÿè®¸å®ƒæ‰§è¡Œä¸€äº›å¼‚æ­¥é€»è¾‘ï¼Œå®ƒæ˜¯é€’å½’çš„ï¼Œå®ƒæœ‰å‰¯ä½œç”¨ç­‰ç­‰ã€‚ä¸ç®¡ä½ æƒ³è±¡çš„æ˜¯å“ªç§åœºæ™¯ï¼Œå‡è®¾ä½ æŠ›å‡ºäº†ä¸€äº› console.log è°ƒç”¨æ¥å¸®åŠ©è°ƒè¯• greetã€‚ 1234567891011121314class Person &#123; name: string; constructor(name: string) &#123; this.name = name; &#125;â€‹ greet() &#123; console.log(&quot;LOG: Entering method.&quot;);â€‹ console.log(`Hello, my name is $&#123;this.name&#125;.`);â€‹ console.log(&quot;LOG: Exiting method.&quot;) &#125;&#125; è¿™ç§æ¨¡å¼ç›¸å½“æ™®éã€‚å¦‚æœæœ‰ä¸€ç§æ–¹æ³•æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ç§æ–¹æ³•åšåˆ°è¿™ä¸€ç‚¹ï¼Œé‚£å°±å¤ªå¥½äº†ï¼ è¿™å°±æ˜¯è£…é¥°å™¨çš„ç”¨æ­¦ä¹‹åœ°ã€‚æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ª loggedMethod çš„å‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011function loggedMethod(originalMethod: any, _context: any) &#123;â€‹ function replacementMethod(this: any, ...args: any[]) &#123; console.log(&quot;LOG: Entering method.&quot;) const result = originalMethod.call(this, ...args); console.log(&quot;LOG: Exiting method.&quot;) return result; &#125;â€‹ return replacementMethod;&#125; â€œè¿™äº› any éƒ½æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿè¿™æ˜¯ä»€ä¹ˆï¼ŒanyScriptï¼ï¼Ÿâ€ è¯·è€å¿ƒç­‰å¾…â€”â€”æˆ‘ä»¬æš‚æ—¶ä¿æŒç®€å•ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä¸“æ³¨äºæ­¤å‡½æ•°åœ¨åšä»€ä¹ˆã€‚è¯·æ³¨æ„ï¼ŒloggedMethod æ¥æ”¶åŸå§‹æ–¹æ³• ( originalMethod) å¹¶è¿”å›ä¸€ä¸ªå‡½æ•° è¾“å‡ºâ€œEnteringâ€¦â€æ—¥å¿— this å°†å…¶æ‰€æœ‰å‚æ•°ä¼ é€’ç»™åŸå§‹æ–¹æ³• è¾“å‡ºä¸€æ¡â€œExitingâ€¦â€æ—¥å¿—ï¼Œå¹¶ä¸” è¿”å›åŸå§‹æ–¹æ³•è¿”å›çš„ä»»ä½•å†…å®¹ã€‚ ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ loggedMethod æ¥è£…é¥°æ–¹æ³• greet ï¼š 1234567891011121314151617181920class Person &#123; name: string; constructor(name: string) &#123; this.name = name; &#125;â€‹ @loggedMethod greet() &#123; console.log(`Hello, my name is $&#123;this.name&#125;.`); &#125;&#125;â€‹const p = new Person(&quot;Ron&quot;);p.greet();â€‹// Output://// LOG: Entering method.// Hello, my name is Ron.// LOG: Exiting method. æˆ‘ä»¬åªæ˜¯åœ¨ greet ä¸Šé¢ä½¿ç”¨äº† loggedMethod ä½œä¸ºè£…é¥°å™¨ â€”â€”æ³¨æ„æˆ‘ä»¬æŠŠå®ƒå†™æˆäº† @loggedMethodã€‚å½“æˆ‘ä»¬è¿™æ ·åšæ—¶ï¼Œå®ƒä¼šè¢« target æ–¹æ³•å’Œ context å¯¹è±¡è°ƒç”¨ã€‚å› ä¸º loggedMethod è¿”å›äº†ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥å‡½æ•°æ›¿æ¢äº†greet. æˆ‘ä»¬è¿˜æ²¡æœ‰æåˆ°å®ƒï¼Œè€Œæ˜¯ loggedMethod ç”¨ç¬¬äºŒä¸ªå‚æ•°å®šä¹‰çš„ã€‚å®ƒè¢«ç§°ä¸ºâ€œä¸Šä¸‹æ–‡å¯¹è±¡â€ï¼Œå®ƒæœ‰ä¸€äº›å…³äºå¦‚ä½•å£°æ˜ä¿®é¥°æ–¹æ³•çš„æœ‰ç”¨ä¿¡æ¯â€”â€”æ¯”å¦‚å®ƒæ˜¯ #private æˆå‘˜è¿˜æ˜¯é™æ€æˆå‘˜ï¼Œæˆ–è€…æ–¹æ³•çš„åç§°æ˜¯ä»€ä¹ˆã€‚è®©æˆ‘ä»¬é‡å†™ loggedMethod ä»¥åˆ©ç”¨å®ƒå¹¶æ‰“å°å‡ºè¢«è£…é¥°çš„æ–¹æ³•çš„åç§°ã€‚ 123456789101112function loggedMethod(originalMethod: any, context: ClassMethodDecoratorContext) &#123; const methodName = String(context.name);â€‹ function replacementMethod(this: any, ...args: any[]) &#123; console.log(`LOG: Entering method &#x27;$&#123;methodName&#125;&#x27;.`) const result = originalMethod.call(this, ...args); console.log(`LOG: Exiting method &#x27;$&#123;methodName&#125;&#x27;.`) return result; &#125;â€‹ return replacementMethod;&#125; æˆ‘ä»¬ç°åœ¨ä½¿ç”¨ context å‚æ•°â€”â€”å®ƒæ˜¯ loggedMethod ä¸­ç¬¬ä¸€ä¸ªå…·æœ‰æ¯” any å’Œ any[] æ›´ä¸¥æ ¼çš„å‚æ•°ç±»å‹ã€‚TypeScript æä¾›äº†ä¸€ä¸ªåä¸º ClassMethodDecoratorContext çš„ç±»å‹ï¼Œä»–å¯¹æ–¹æ³•è£…é¥°å™¨æ‰€æ¥æ”¶çš„ä¸Šä¸‹æ–‡å¯¹è±¡è¿›è¡Œå»ºæ¨¡ã€‚ é™¤äº†å…ƒæ•°æ®ä¹‹å¤–ï¼Œæ–¹æ³•çš„ä¸Šä¸‹æ–‡å¯¹è±¡è¿˜æœ‰ä¸€ä¸ªæœ‰ç”¨çš„å‡½æ•°ï¼Œç§°ä¸º addInitializerã€‚ è¿™æ˜¯ä¸€ç§æŒ‚é’©åˆ°æ„é€ å‡½æ•°å¼€å¤´çš„æ–¹æ³•ï¼ˆå¦‚æœæˆ‘ä»¬ä½¿ç”¨staticï¼Œåˆ™æŒ‚é’©åˆ°ç±»æœ¬èº«çš„åˆå§‹åŒ–ï¼‰ã€‚ ä¾‹å¦‚â€”â€”åœ¨ JavaScript ä¸­ï¼Œé€šå¸¸ä¼šç¼–å†™ç±»ä¼¼ä»¥ä¸‹æ¨¡å¼çš„å†…å®¹ï¼š 123456789101112class Person &#123; name: string; constructor(name: string) &#123; this.name = name;â€‹ this.greet = this.greet.bind(this); &#125;â€‹ greet() &#123; console.log(`Hello, my name is $&#123;this.name&#125;.`); &#125;&#125; æˆ–è€…ï¼Œgreet å¯ä»¥å£°æ˜ä¸ºåˆå§‹åŒ–ä¸ºç®­å¤´å‡½æ•°çš„å±æ€§ã€‚ 12345678910class Person &#123; name: string; constructor(name: string) &#123; this.name = name; &#125;â€‹ greet = () =&gt; &#123; console.log(`Hello, my name is $&#123;this.name&#125;.`); &#125;;&#125; ç¼–å†™æ­¤ä»£ç æ˜¯ä¸ºäº†ç¡®ä¿åœ¨ greet ä½œä¸ºç‹¬ç«‹å‡½æ•°è°ƒç”¨æˆ–ä½œä¸ºå›è°ƒä¼ é€’ this æ—¶ä¸ä¼šé‡æ–°ç»‘å®šã€‚ 1234const greet = new Person(&quot;Ron&quot;).greet;â€‹// We don&#x27;t want this to fail!greet(); æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªè£…é¥°å™¨ï¼Œä½¿ç”¨ addInitializer åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨ bind ã€‚ 123456789function bound(originalMethod: any, context: ClassMethodDecoratorContext) &#123; const methodName = context.name; if (context.private) &#123; throw new Error(`&#x27;bound&#x27; cannot decorate private properties like $&#123;methodName as string&#125;.`); &#125; context.addInitializer(function () &#123; this[methodName] = this[methodName].bind(this); &#125;);&#125; bound ä¸è¿”å›ä»»ä½•ä¸œè¥¿â€”â€”æ‰€ä»¥å½“å®ƒè£…é¥°ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå®ƒä¼šä¿ç•™åŸæ¥çš„æ–¹æ³•ã€‚ç›¸åï¼Œå®ƒå°†åœ¨ä»»ä½•å…¶ä»–å­—æ®µåˆå§‹åŒ–ä¹‹å‰æ·»åŠ é€»è¾‘ã€‚ 123456789101112131415161718class Person &#123; name: string; constructor(name: string) &#123; this.name = name; &#125;â€‹ @bound @loggedMethod greet() &#123; console.log(`Hello, my name is $&#123;this.name&#125;.`); &#125;&#125;â€‹const p = new Person(&quot;Ron&quot;);const greet = p.greet;â€‹// Works!greet(); è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å †å äº†ä¸¤ä¸ªè£…é¥°å™¨â€”â€” @bound å’Œ @loggedMethodã€‚è¿™äº›è£…é¥°ä»¥â€œç›¸åçš„é¡ºåºâ€è¿è¡Œã€‚å³ @loggedMethod è£…é¥°åŸå§‹æ–¹æ³• greetï¼Œ@bound è£…é¥° @loggedMethod çš„ç»“æœ ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œè¿™å¹¶ä¸é‡è¦â€”â€”ä½†å¦‚æœæ‚¨çš„è£…é¥°å™¨æœ‰å‰¯ä½œç”¨æˆ–æœŸæœ›ç‰¹å®šé¡ºåºï¼Œåˆ™å¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚ åŒæ ·å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šæ ¹æ®ä½ å–œæ¬¢ä»£ç é£æ ¼ï¼Œå¯ä»¥å°†è¿™äº›è£…é¥°å™¨æ”¾åœ¨åŒä¸€è¡Œã€‚ 123@bound @loggedMethod greet() &#123; console.log(`Hello, my name is $&#123;this.name&#125;.`);&#125; å¯èƒ½ä¸å¤ªæ˜æ˜¾çš„æ˜¯ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥åˆ›å»ºè¿”å›è£…é¥°å™¨å‡½æ•°çš„å‡½æ•°ã€‚è¿™ä½¿å¾—å®šåˆ¶æœ€ç»ˆçš„è£…é¥°å™¨æˆä¸ºå¯èƒ½ã€‚å¦‚æœæˆ‘ä»¬æ„¿æ„ï¼Œæˆ‘ä»¬å¯ä»¥è®© loggedMethod è¿”å›ä¸€ä¸ªè£…é¥°å™¨å¹¶è‡ªå®šä¹‰å®ƒè®°å½•æ¶ˆæ¯çš„æ–¹å¼ã€‚ 1234567891011121314function loggedMethod(headMessage = &quot;LOG:&quot;) &#123; return function actualDecorator(originalMethod: any, context: ClassMethodDecoratorContext) &#123; const methodName = String(context.name);â€‹ function replacementMethod(this: any, ...args: any[]) &#123; console.log(`$&#123;headMessage&#125; Entering method &#x27;$&#123;methodName&#125;&#x27;.`) const result = originalMethod.call(this, ...args); console.log(`$&#123;headMessage&#125; Exiting method &#x27;$&#123;methodName&#125;&#x27;.`) return result; &#125;â€‹ return replacementMethod; &#125;&#125; å¦‚æœæˆ‘ä»¬è¿™æ ·åšï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ä½¿ç”¨ loggedMethod ä½œä¸ºè£…é¥°å™¨ä¹‹å‰è°ƒç”¨å®ƒã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä»»ä½•å­—ç¬¦ä¸²ä½œä¸ºè¾“å‡ºåˆ°æ§åˆ¶å°çš„æ—¥å¿—çš„å‰ç¼€ã€‚ 1234567891011121314151617181920class Person &#123; name: string; constructor(name: string) &#123; this.name = name; &#125;â€‹ @loggedMethod(&quot;&quot;) greet() &#123; console.log(`Hello, my name is $&#123;this.name&#125;.`); &#125;&#125;â€‹const p = new Person(&quot;Ron&quot;);p.greet();â€‹// Output://// Entering method &#x27;greet&#x27;.// Hello, my name is Ron.// Exiting method &#x27;greet&#x27;. è£…é¥°å™¨ä¸ä»…ä»…å¯ä»¥ç”¨åœ¨æ–¹æ³•ä¸Šï¼å®ƒä»¬å¯ç”¨äºå±æ€§&#x2F;å­—æ®µã€getterã€setter å’Œè‡ªåŠ¨è®¿é—®å™¨ã€‚ç”šè‡³ç±»æœ¬èº«ä¹Ÿå¯ä»¥ä¸ºå­ç±»åŒ–å’Œæ³¨å†Œä¹‹ç±»çš„äº‹æƒ…è¿›è¡Œè£…é¥°ã€‚ è¦æ·±å…¥äº†è§£æœ‰å…³è£…é¥°å™¨çš„æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥é˜…è¯» Axel Rauschmayer çš„è¯¦å°½æ‘˜è¦ã€‚ æœ‰å…³æ¶‰åŠçš„æ›´æ”¹çš„æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹åŸå§‹ pull requestã€‚ ä¸å®éªŒæ€§é—ç•™è£…é¥°å™¨çš„å·®å¼‚å¦‚æœæ‚¨å·²ç»ä½¿ç”¨ TypeScript ä¸€æ®µæ—¶é—´ï¼Œæ‚¨å¯èƒ½ä¼šæ„è¯†åˆ°å®ƒå¤šå¹´æ¥ä¸€ç›´æ”¯æŒâ€œå®éªŒæ€§â€è£…é¥°å™¨ã€‚è™½ç„¶è¿™äº›å®éªŒæ€§è£…é¥°å™¨éå¸¸æœ‰ç”¨ï¼Œä½†å®ƒä»¬æ¨¡æ‹Ÿäº†ä¸€ä¸ªæ›´æ—§ç‰ˆæœ¬çš„è£…é¥°å™¨ææ¡ˆï¼Œå¹¶ä¸”å§‹ç»ˆéœ€è¦ä¸€ä¸ªåä¸º --experimentalDecoratorsã€‚ ä»»ä½•åœ¨æ²¡æœ‰æ­¤æ ‡å¿—çš„æƒ…å†µä¸‹å°è¯•åœ¨ TypeScript ä¸­ä½¿ç”¨è£…é¥°å™¨éƒ½ä¼šæç¤ºé”™è¯¯æ¶ˆæ¯ã€‚ --experimentalDecorators åœ¨å¯é¢„è§çš„æœªæ¥å°†ç»§ç»­å­˜åœ¨ï¼›ç„¶è€Œï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ ‡å¿—ï¼Œè£…é¥°å™¨ç°åœ¨å°†æˆä¸ºæ‰€æœ‰æ–°ä»£ç çš„æœ‰æ•ˆè¯­æ³•ã€‚åœ¨ä¹‹å¤–--experimentalDecoratorsï¼Œå®ƒä»¬å°†ä»¥ä¸åŒæ–¹å¼è¿›è¡Œç±»å‹æ£€æŸ¥å’Œé‡Šæ”¾ã€‚ç±»å‹æ£€æŸ¥è§„åˆ™å’Œ emit å®Œå…¨ä¸åŒï¼Œè™½ç„¶å¯ä»¥ç¼–å†™è£…é¥°å™¨æ¥æ”¯æŒæ—§çš„å’Œæ–°çš„è£…é¥°å™¨è¡Œä¸ºï¼Œä½†ä»»ä½•ç°æœ‰çš„è£…é¥°å™¨å‡½æ•°éƒ½ä¸å¤ªå¯èƒ½è¿™æ ·åšã€‚ è¿™ä¸ªæ–°çš„è£…é¥°å™¨ææ¡ˆä¸ --emitDecoratorMetadata ä¸å…¼å®¹ï¼Œå®ƒä¸å…è®¸è£…é¥°å‚æ•°ã€‚æœªæ¥çš„ ECMAScript ææ¡ˆå¯èƒ½ä¼šå¸®åŠ©å¼¥åˆè¿™ä¸€å·®è·ã€‚ æœ€åä¸€ç‚¹ï¼šé™¤äº†å…è®¸å°†è£…é¥°å™¨æ”¾åœ¨ export å…³é”®å­—ä¹‹å‰ï¼Œè£…é¥°å™¨ææ¡ˆç°åœ¨è¿˜æä¾›äº†åœ¨ export æˆ– export default ä¹‹åæ”¾ç½®è£…é¥°å™¨çš„é€‰é¡¹ã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯ä¸å…è®¸æ··åˆä½¿ç”¨è¿™ä¸¤ç§æ ·å¼ã€‚ 1234567891011121314// allowed@register export default class Foo &#123; // ...&#125;â€‹// also allowedexport default @register class Bar &#123; // ...&#125;â€‹// error - before *and* after is not allowed@before export @after class Bar &#123; // ...&#125; ç¼–å†™ç±»å‹è‰¯å¥½çš„è£…é¥°å™¨ä¸Šé¢çš„ loggedMethod å’Œ bound è£…é¥°å™¨ç¤ºä¾‹æœ‰æ„ç®€å•åŒ–å¹¶çœç•¥äº†å¾ˆå¤šå…³äºç±»å‹çš„ç»†èŠ‚ã€‚ é”®å…¥è£…é¥°å™¨å¯èƒ½ç›¸å½“å¤æ‚ã€‚ä¾‹å¦‚ï¼Œä¸Šé¢çš„ç±»å‹æ­£ç¡®çš„ç‰ˆæœ¬ loggedMethod å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š 123456789101112131415function loggedMethod&lt;This, Args extends any[], Return&gt;( target: (this: This, ...args: Args) =&gt; Return, context: ClassMethodDecoratorContext&lt;This, (this: This, ...args: Args) =&gt; Return&gt;) &#123; const methodName = String(context.name);â€‹ function replacementMethod(this: This, ...args: Args): Return &#123; console.log(`LOG: Entering method &#x27;$&#123;methodName&#125;&#x27;.`) const result = target.call(this, ...args); console.log(`LOG: Exiting method &#x27;$&#123;methodName&#125;&#x27;.`) return result; &#125;â€‹ return replacementMethod;&#125; æˆ‘ä»¬å¿…é¡»ä½¿ç”¨ç±»å‹å‚æ•° Thisã€Args å’Œ Return åˆ†åˆ«å®šä¹‰ this çš„ç±»å‹ã€å‚æ•°å’ŒåŸå§‹æ–¹æ³•çš„è¿”å›ç±»å‹ã€‚ è£…é¥°å™¨å‡½æ•°å®šä¹‰çš„å…·ä½“å¤æ‚ç¨‹åº¦å–å†³äºæ‚¨è¦ä¿è¯çš„å†…å®¹ã€‚è¯·è®°ä½ï¼Œæ‚¨çš„è£…é¥°å™¨å°†è¢«ä½¿ç”¨çš„æ¬¡æ•°å¤šäºå®ƒä»¬è¢«ç¼–å†™çš„æ¬¡æ•°ï¼Œå› æ­¤ç±»å‹è‰¯å¥½çš„ç‰ˆæœ¬é€šå¸¸æ›´å¯å–â€”â€”ä½†æ˜¾ç„¶éœ€è¦ä¸å¯è¯»æ€§è¿›è¡Œæƒè¡¡ï¼Œå› æ­¤è¯·å°½é‡ä¿æŒç®€å•ã€‚ å°†æ¥ä¼šæä¾›æ›´å¤šå…³äºç¼–å†™è£…é¥°å™¨çš„æ–‡æ¡£â€”â€”ä½†è¿™ç¯‡æ–‡ç« åº”è¯¥æœ‰å¤§é‡å…³äºè£…é¥°å™¨æœºåˆ¶çš„ç»†èŠ‚ã€‚ const æ³›å‹å‚æ•°åœ¨æ¨æ–­å¯¹è±¡çš„ç±»å‹æ—¶ï¼ŒTypeScript é€šå¸¸ä¼šé€‰æ‹©ä¸€ç§é€šç”¨çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œnames çš„æ¨æ–­ç±»å‹æ˜¯ string[] ï¼š 1234567type HasNames = &#123; readonly names: string[] &#125;;function getNamesExactly&lt;T extends HasNames&gt;(arg: T): T[&quot;names&quot;] &#123; return arg.names;&#125;â€‹// Inferred type: string[]const names = getNamesExactly(&#123; names: [&quot;Alice&quot;, &quot;Bob&quot;, &quot;Eve&quot;]&#125;); é€šå¸¸è¿™æ ·åšçš„ç›®çš„æ˜¯ä½¿çªå˜æˆä¸ºå¯èƒ½ã€‚ ä½†æ˜¯ï¼Œæ ¹æ® getNamesExactly çš„å…·ä½“åŠŸèƒ½å’Œç”¨é€”ï¼Œé€šå¸¸éœ€è¦æ›´å…·ä½“çš„ç±»å‹ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒAPI ä½œè€…é€šå¸¸ä¸å¾—ä¸å»ºåœ¨æŸäº›åœ°æ–¹æ·»åŠ  as const ä»¥å®ç°æ‰€éœ€çš„æ¨ç†ï¼š 123456789// The type we wanted:// readonly [&quot;Alice&quot;, &quot;Bob&quot;, &quot;Eve&quot;]// The type we got:// string[]const names1 = getNamesExactly(&#123; names: [&quot;Alice&quot;, &quot;Bob&quot;, &quot;Eve&quot;]&#125;);â€‹// Correctly gets what we wanted:// readonly [&quot;Alice&quot;, &quot;Bob&quot;, &quot;Eve&quot;]const names2 = getNamesExactly(&#123; names: [&quot;Alice&quot;, &quot;Bob&quot;, &quot;Eve&quot;]&#125; as const); è¿™å¯èƒ½å¾ˆéº»çƒ¦ä¸”å®¹æ˜“å¿˜è®°ã€‚åœ¨ TypeScript 5.0 ä¸­ï¼Œæ‚¨ç°åœ¨å¯ä»¥å°† const ä¿®é¥°ç¬¦æ·»åŠ åˆ°ç±»å‹å‚æ•°å£°æ˜ä¸­ï¼Œä»¥ä½¿const-like æ¨ç†æˆä¸ºé»˜è®¤å€¼ï¼š 123456789type HasNames = &#123; names: readonly string[] &#125;;function getNamesExactly&lt;const T extends HasNames&gt;(arg: T): T[&quot;names&quot;] &#123;// ^^^^^ return arg.names;&#125;â€‹// Inferred type: readonly [&quot;Alice&quot;, &quot;Bob&quot;, &quot;Eve&quot;]// Note: Didn&#x27;t need to write &#x27;as const&#x27; hereconst names = getNamesExactly(&#123; names: [&quot;Alice&quot;, &quot;Bob&quot;, &quot;Eve&quot;] &#125;); è¯·æ³¨æ„ï¼Œconst ä¿®é¥°ç¬¦ä¸æ‹’ç»å¯å˜å€¼ï¼Œä¹Ÿä¸éœ€è¦ä¸å¯å˜çº¦æŸã€‚ä½¿ç”¨å¯å˜ç±»å‹çº¦æŸå¯èƒ½ä¼šäº§ç”Ÿä»¤äººæƒŠè®¶çš„ç»“æœã€‚ä¾‹å¦‚ï¼š 1234declare function fnBad&lt;const T extends string[]&gt;(args: T): void;â€‹// &#x27;T&#x27; is still &#x27;string[]&#x27; since &#x27;readonly [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]&#x27; is not assignable to &#x27;string[]&#x27;fnBad([&quot;a&quot;, &quot;b&quot; ,&quot;c&quot;]); åœ¨è¿™é‡Œï¼Œæ¨æ–­çš„å€™é€‰é¡¹ T æ˜¯ readonly [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]ï¼Œå¹¶ä¸” readonly ä¸èƒ½åœ¨éœ€è¦å¯å˜æ•°ç»„çš„åœ°æ–¹ä½¿ç”¨æ•°ç»„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¨ç†å›é€€åˆ°çº¦æŸæ¡ä»¶ï¼Œæ•°ç»„è¢«è§†ä¸º string[]ï¼Œå¹¶ä¸”è°ƒç”¨ä»ç„¶æˆåŠŸè¿›è¡Œã€‚ æ­¤å‡½æ•°çš„æ›´å¥½å®šä¹‰åº”è¯¥ä½¿ç”¨ readonly string[]ï¼š 1234declare function fnGood&lt;const T extends readonly string[]&gt;(args: T): void;â€‹// T is readonly [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]fnGood([&quot;a&quot;, &quot;b&quot; ,&quot;c&quot;]); åŒæ ·ï¼Œè¯·è®°ä½ä¿®é¥°ç¬¦ const ä»…å½±å“åœ¨è°ƒç”¨ä¸­ç¼–å†™çš„å¯¹è±¡ã€æ•°ç»„å’ŒåŸå§‹è¡¨è¾¾å¼çš„æ¨æ–­ï¼Œå› æ­¤ä¸ä¼šï¼ˆæˆ–ä¸èƒ½ï¼‰ä¿®æ”¹çš„å‚æ•°ä¸ä¼šçœ‹åˆ° as const ä»»ä½•è¡Œä¸ºå˜åŒ–: 12345declare function fnGood&lt;const T extends readonly string[]&gt;(args: T): void;const arr = [&quot;a&quot;, &quot;b&quot; ,&quot;c&quot;];â€‹// &#x27;T&#x27; is still &#x27;string[]&#x27;-- the &#x27;const&#x27; modifier has no effect herefnGood(arr); æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æ‹‰å–è¯·æ±‚å’Œï¼ˆç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªï¼‰æ¿€åŠ±é—®é¢˜ã€‚ extends æ”¯æŒå¤šä¸ªé…ç½®æ–‡ä»¶tsconfig.json ç®¡ç†å¤šä¸ªé¡¹ç›®æ—¶ï¼Œæ‹¥æœ‰ä¸€ä¸ªå…¶ä»–æ–‡ä»¶å¯ä»¥æ‰©å±•çš„â€œåŸºæœ¬â€é…ç½®æ–‡ä»¶ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ TypeScript æ”¯æŒ extendsä» compilerOptions. 12345678// packages/front-end/src/tsconfig.json&#123; &quot;extends&quot;: &quot;../../../tsconfig.base.json&quot;, &quot;compilerOptions&quot;: &#123; &quot;outDir&quot;: &quot;../lib&quot;, // ... &#125;&#125; ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä»å¤šä¸ªé…ç½®æ–‡ä»¶è¿›è¡Œæ‰©å±•ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½¿ç”¨å‘é€åˆ° npm çš„ TypeScript åŸºæœ¬é…ç½®æ–‡ä»¶ã€‚å¦‚æœæ‚¨å¸Œæœ›æ‰€æœ‰é¡¹ç›®ä¹Ÿä½¿ç”¨ npm åŒ…ä¸­çš„é€‰é¡¹ @tsconfig/strictestï¼Œé‚£ä¹ˆæœ‰ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆï¼šæ‰©å±• tsconfig.base.json è‡ª@tsconfig/strictestï¼š 1234567// tsconfig.base.json&#123; &quot;extends&quot;: &quot;@tsconfig/strictest/tsconfig.json&quot;, &quot;compilerOptions&quot;: &#123; // ... &#125;&#125; è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šèµ·ä½œç”¨ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•é¡¹ç›®ä¸æƒ³ä½¿ç”¨ @tsconfig/strictestï¼Œä»–ä»¬å¿…é¡»æ‰‹åŠ¨ç¦ç”¨è¿™äº›é€‰é¡¹ï¼Œæˆ–è€…åˆ›å»ºä¸€ä¸ªçŸ­åº¦çš„ tsconfig.base.json ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬ä¸æ‰©å±• @tsconfig/strictest ä¸ºäº†åœ¨æ­¤å¤„æä¾›æ›´å¤šçµæ´»æ€§ï¼ŒTypescript 5.0 ç°åœ¨å…è®¸è¯¥ extends å­—æ®µé‡‡ç”¨å¤šä¸ªæ¡ç›®ã€‚ä¾‹å¦‚ï¼Œåœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼š 123456&#123; &quot;extends&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;], &quot;compilerOptions&quot;: &#123; // ... &#125;&#125; å†™è¿™ä¸ªæœ‰ç‚¹åƒ c ç›´æ¥æ‰©å±•ï¼Œå…¶ä¸­ c extends b å’Œ b extends aã€‚å¦‚æœä»»ä½•å­—æ®µâ€œå†²çªâ€ï¼Œåˆ™åä¸€ä¸ªæ¡ç›®è·èƒœã€‚ æ‰€ä»¥åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ å’Œ strictNullChecks éƒ½ noImplicitAnyåœ¨æœ€ç»ˆçš„ tsconfig.json. 12345678910111213141516171819// tsconfig1.json&#123; &quot;compilerOptions&quot;: &#123; &quot;strictNullChecks&quot;: true &#125;&#125;â€‹// tsconfig2.json&#123; &quot;compilerOptions&quot;: &#123; &quot;noImplicitAny&quot;: true &#125;&#125;â€‹// tsconfig.json&#123; &quot;extends&quot;: [&quot;./tsconfig1.json&quot;, &quot;./tsconfig2.json&quot;], &quot;files&quot;: [&quot;./index.ts&quot;]&#125; å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼é‡å†™æˆ‘ä»¬åŸæ¥çš„ä¾‹å­ã€‚ 12345678// packages/front-end/src/tsconfig.json&#123; &quot;extends&quot;: [&quot;@tsconfig/strictest/tsconfig.json&quot;, &quot;../../../tsconfig.base.json&quot;], &quot;compilerOptions&quot;: &#123; &quot;outDir&quot;: &quot;../lib&quot;, // ... &#125;&#125; æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯»æœ‰å…³åŸå§‹æ‹‰å–è¯·æ±‚çš„æ›´å¤šä¿¡æ¯ã€‚ æ‰€æœ‰æšä¸¾éƒ½æ˜¯è”åˆæšä¸¾å½“ TypeScript æœ€åˆå¼•å…¥æšä¸¾æ—¶ï¼Œå®ƒä»¬åªä¸è¿‡æ˜¯ä¸€ç»„å…·æœ‰ç›¸åŒç±»å‹çš„æ•°å­—å¸¸é‡ã€‚ 1234enum E &#123; Foo = 10, Bar = 20,&#125; E.Foo å’Œ E.Bar çš„å”¯ä¸€ç‰¹åˆ«ä¹‹å¤„åœ¨äºå®ƒä»¬å¯ä»¥èµ‹å€¼ç»™é™¤ E ç±»å‹ä¹‹å¤–çš„ä»»ä½•ç±»å‹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä»–ä»¬å‡ ä¹åªæ˜¯ numbersã€‚ 1234function takeValue(e: E) &#123;&#125;â€‹takeValue(E.Foo); // workstakeValue(123); // error! ç›´åˆ° TypeScript 2.0 å¼•å…¥äº†æšä¸¾æ–‡å­—ç±»å‹ï¼Œæšä¸¾æ‰å˜å¾—æ›´åŠ ç‰¹æ®Šã€‚æšä¸¾æ–‡å­—ç±»å‹ä¸ºæ¯ä¸ªæšä¸¾æˆå‘˜æä¾›äº†è‡ªå·±çš„ç±»å‹ï¼Œå¹¶å°†æšä¸¾æœ¬èº«å˜æˆäº†æ¯ä¸ªæˆå‘˜ç±»å‹çš„è”åˆã€‚å®ƒä»¬è¿˜å…è®¸æˆ‘ä»¬ä»…å¼•ç”¨æšä¸¾ç±»å‹çš„ä¸€ä¸ªå­é›†ï¼Œå¹¶ç¼©å°è¿™äº›ç±»å‹çš„èŒƒå›´ã€‚ 123456789101112131415// Color is like a union of Red | Orange | Yellow | Green | Blue | Violetenum Color &#123; Red, Orange, Yellow, Green, Blue, /* Indigo */, Violet&#125;â€‹// Each enum member has its own type that we can refer to!type PrimaryColor = Color.Red | Color.Green | Color.Blue;â€‹function isPrimaryColor(c: Color): c is PrimaryColor &#123; // Narrowing literal types can catch bugs. // TypeScript will error here because // we&#x27;ll end up comparing &#x27;Color.Red&#x27; to &#x27;Color.Green&#x27;. // We meant to use ||, but accidentally wrote &amp;&amp;. return c === Color.Red &amp;&amp; c === Color.Green &amp;&amp; c === Color.Blue;&#125; ä¸ºæ¯ä¸ªæšä¸¾æˆå‘˜èµ‹äºˆå…¶è‡ªå·±çš„ç±»å‹çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œè¿™äº›ç±»å‹åœ¨æŸäº›éƒ¨åˆ†ä¸æˆå‘˜çš„å®é™…å€¼ç›¸å…³è”ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ— æ³•è®¡ç®—è¯¥å€¼â€”â€”ä¾‹å¦‚ï¼Œæšä¸¾æˆå‘˜å¯ä»¥é€šè¿‡å‡½æ•°è°ƒç”¨è¿›è¡Œåˆå§‹åŒ–ã€‚ 123enum E &#123; Blah = Math.random()&#125; æ¯å½“ TypeScript é‡åˆ°è¿™äº›é—®é¢˜æ—¶ï¼Œå®ƒéƒ½ä¼šæ‚„æ‚„é€€å‡ºå¹¶ä½¿ç”¨æ—§çš„æšä¸¾ç­–ç•¥ã€‚è¿™æ„å‘³ç€æ”¾å¼ƒè”åˆå’Œæ–‡å­—ç±»å‹çš„æ‰€æœ‰ä¼˜åŠ¿ã€‚ TypeScript 5.0 é€šè¿‡ä¸ºæ¯ä¸ªè®¡ç®—æˆå‘˜åˆ›å»ºå”¯ä¸€ç±»å‹ï¼Œè®¾æ³•å°†æ‰€æœ‰æšä¸¾å˜æˆè”åˆæšä¸¾ã€‚è¿™æ„å‘³ç€ç°åœ¨å¯ä»¥ç¼©å°æ‰€æœ‰æšä¸¾çš„èŒƒå›´ï¼Œå¹¶å°†å…¶æˆå‘˜ä¹Ÿä½œä¸ºç±»å‹å¼•ç”¨ã€‚ æœ‰å…³æ­¤æ›´æ”¹çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥é˜…è¯» GitHub ä¸Šçš„è¯¦ç»†ä¿¡æ¯ã€‚ --moduleResolution æ–°å¢ bundler æ”¯æŒTypeScript 4.7 åœ¨ --module å’Œ --moduleResolution è®¾ç½®ä¸­å¼•å…¥äº† node16 å’Œ nodenext é€‰é¡¹ã€‚è¿™äº›é€‰é¡¹çš„ç›®çš„æ˜¯æ›´å¥½åœ°æ¨¡æ‹Ÿ Node.js ä¸­ ECMAScript æ¨¡å—çš„ç²¾ç¡®æŸ¥æ‰¾è§„åˆ™ï¼›ç„¶è€Œï¼Œè¿™ç§æ¨¡å¼æœ‰å¾ˆå¤šé™åˆ¶ï¼Œå…¶ä»–å·¥å…·å¹¶æ²¡æœ‰çœŸæ­£å¼ºåˆ¶æ‰§è¡Œã€‚ ä¾‹å¦‚ï¼Œåœ¨ Node.js çš„ ECMAScript æ¨¡å—ä¸­ï¼Œä»»ä½•ç›¸å¯¹å¯¼å…¥éƒ½éœ€è¦åŒ…å«æ–‡ä»¶æ‰©å±•åã€‚ 1234// entry.mjsimport * as utils from &quot;./utils&quot;; // wrong - we need to include the file extension.â€‹import * as utils from &quot;./utils.mjs&quot;; // works åœ¨ Node.js å’Œæµè§ˆå™¨ä¸­è¿™æ ·åšæœ‰ä¸€å®šçš„åŸå› â€”â€”å®ƒä½¿æ–‡ä»¶æŸ¥æ‰¾æ›´å¿«ï¼Œå¹¶ä¸”æ›´é€‚åˆåŸå§‹æ–‡ä»¶æœåŠ¡å™¨ã€‚ä½†æ˜¯å¯¹äºè®¸å¤šä½¿ç”¨æ†ç»‘å™¨ç­‰å·¥å…·çš„å¼€å‘äººå‘˜æ¥è¯´ï¼Œnode16&#x2F;nodenextè®¾ç½®å¾ˆéº»çƒ¦ï¼Œå› ä¸ºæ†ç»‘å™¨æ²¡æœ‰è¿™äº›é™åˆ¶ä¸­çš„å¤§éƒ¨åˆ†ã€‚åœ¨æŸäº›æ–¹é¢ï¼Œnodeè§£ææ¨¡å¼å¯¹ä»»ä½•ä½¿ç”¨æ†ç»‘å™¨çš„äººæ¥è¯´éƒ½æ›´å¥½ã€‚ ä½†åœ¨æŸäº›æ–¹é¢ï¼ŒåŸæœ‰çš„ node è§£å†³æ¨¡å¼å·²ç»è½ä¼äº†ã€‚å¤§å¤šæ•°ç°ä»£æ†ç»‘å™¨åœ¨ Node.js ä¸­ä½¿ç”¨ ECMAScript æ¨¡å—å’Œ CommonJS æŸ¥æ‰¾è§„åˆ™çš„èåˆã€‚ä¾‹å¦‚ï¼Œæ— æ‰©å±•åçš„å¯¼å…¥å°±åƒåœ¨ CommonJS ä¸­ä¸€æ ·å·¥ä½œå¾—å¾ˆå¥½ï¼Œä½†æ˜¯åœ¨æŸ¥çœ‹åŒ…çš„ exportæ¡ä»¶æ—¶ï¼Œä»–ä»¬ä¼šæ›´å–œæ¬¢ ECMAScript æ–‡ä»¶ä¸­çš„ import æ¡ä»¶ã€‚ ä¸ºäº†æ¨¡æ‹Ÿæ‰“åŒ…å™¨çš„å·¥ä½œæ–¹å¼ï¼ŒTypeScript ç°åœ¨å¼•å…¥äº†ä¸€ç§æ–°ç­–ç•¥ï¼š--moduleResolution bundlerã€‚ 123456&#123; &quot;compilerOptions&quot;: &#123; &quot;target&quot;: &quot;esnext&quot;, &quot;moduleResolution&quot;: &quot;bundler&quot; &#125;&#125; å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨åƒ Viteã€esbuildã€swcã€Webpackã€Parcel å’Œå…¶ä»–å®æ–½æ··åˆæŸ¥æ‰¾ç­–ç•¥çš„ç°ä»£æ†ç»‘å™¨ï¼Œé‚£ä¹ˆæ–°é€‰é¡¹ bundler åº”è¯¥éå¸¸é€‚åˆæ‚¨ã€‚ å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæ‚¨æ­£åœ¨ç¼–å†™ä¸€ä¸ªæ‰“ç®—åœ¨ npm ä¸Šå‘å¸ƒçš„åº“ï¼Œåˆ™ä½¿ç”¨è¯¥ bundler é€‰é¡¹å¯ä»¥éšè—å…¼å®¹æ€§é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å¯èƒ½ä¼šå‡ºç°åœ¨æ‚¨ä¸ä½¿ç”¨æ†ç»‘å™¨çš„ç”¨æˆ·èº«ä¸Šã€‚å› æ­¤ï¼Œåœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨ node16 æˆ– nodenext è§£å†³æ–¹æ¡ˆå¯èƒ½æ˜¯æ›´å¥½çš„é€”å¾„ã€‚ è¦äº†è§£æ›´å¤šä¿¡æ¯ --moduleResolution bundlerï¼Œè¯·æŸ¥çœ‹å®æ–½æ‹‰å–è¯·æ±‚ã€‚ è‡ªå®šä¹‰è§£ææ ‡å¿—JavaScript å·¥å…·ç°åœ¨å¯ä»¥æ¨¡æ‹Ÿâ€œæ··åˆâ€è§£æè§„åˆ™ï¼Œå°±åƒ bundler æˆ‘ä»¬ä¸Šé¢æè¿°çš„æ¨¡å¼ä¸€æ ·ã€‚ç”±äºå·¥å…·çš„æ”¯æŒå¯èƒ½ç•¥æœ‰ä¸åŒï¼ŒTypeScript 5.0 æä¾›äº†å¯ç”¨æˆ–ç¦ç”¨ä¸€äº›åŠŸèƒ½çš„æ–¹æ³•ï¼Œè¿™äº›åŠŸèƒ½å¯èƒ½é€‚ç”¨äºæ‚¨çš„é…ç½®ï¼Œä¹Ÿå¯èƒ½ä¸é€‚ç”¨äºæ‚¨çš„é…ç½®ã€‚ allowImportingTsExtensions--allowImportingTsExtensions å…è®¸ä½¿ç”¨ç‰¹å®šäº TypeScript çš„æ‰©å±•åï¼ˆå¦‚.tsã€.mtsæˆ–.tsxï¼‰ã€‚ æ­¤æ ‡å¿—ä»…åœ¨ --noEmit æˆ– --emitDeclarationOnly å¯ç”¨æ—¶æ‰è¢«å…è®¸ï¼Œå› ä¸ºè¿™äº›å¯¼å…¥è·¯å¾„åœ¨è¿è¡Œæ—¶æ— æ³•åœ¨ JavaScript è¾“å‡ºæ–‡ä»¶ä¸­è§£æã€‚è¿™é‡Œçš„æœŸæœ›æ˜¯æ‚¨çš„è§£æå™¨ï¼ˆä¾‹å¦‚æ‚¨çš„æ†ç»‘å™¨ã€è¿è¡Œæ—¶æˆ–å…¶ä»–ä¸€äº›å·¥å…·ï¼‰å°†ä½¿è¿™äº› .ts æ–‡ä»¶ä¹‹é—´çš„å¯¼å…¥å·¥ä½œã€‚ resolvePackageJsonExports--resolvePackageJsonExports å¼ºåˆ¶ TypeScript è§£æ package.jsonçš„ exports å­—æ®µï¼Œå¦‚æœæ›¾ç»ä» node_modules ä¸­çš„è¯»å–è¿‡jsonæ–‡ä»¶ã€‚ å½“é…ç½®é¡¹ --modulerresolve ä¸º node16ã€nodenext å’Œ bundler æ—¶ï¼Œè¯¥é€‰é¡¹é»˜è®¤ä¸ºtrueã€‚ resolvePackageJsonImports--resolvePackageJsonImports å¼ºåˆ¶ TypeScript åœ¨ä»å…¶ç¥–å…ˆç›®å½•åŒ…å« package.json çš„æ–‡ä»¶æ‰§è¡Œä»¥ # å¼€å¤´çš„æŸ¥æ‰¾æ—¶æŸ¥è¯¢ package.json æ–‡ä»¶çš„å¯¼å…¥å­—æ®µã€‚ å½“é…ç½®é¡¹ --modulerresolve ä¸º node16ã€nodenext å’Œ bundler æ—¶ï¼Œè¯¥é€‰é¡¹é»˜è®¤ä¸ºtrueã€‚ allowArbitraryExtensionsåœ¨ TypeScript 5.0 ä¸­ï¼Œå½“å¯¼å…¥è·¯å¾„ä»¥ä¸æ˜¯å·²çŸ¥ JavaScript æˆ– TypeScript æ–‡ä»¶æ‰©å±•åçš„æ‰©å±•åç»“å°¾æ—¶ï¼Œç¼–è¯‘å™¨å°†ä»¥ &#123;file basename&#125;.d.&#123;extension&#125;.tsã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨åœ¨æ†ç»‘é¡¹ç›®ä¸­ä½¿ç”¨ CSS åŠ è½½å™¨ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä¸ºè¿™äº›æ ·å¼è¡¨ç¼–å†™ï¼ˆæˆ–ç”Ÿæˆï¼‰å£°æ˜æ–‡ä»¶ï¼š 12345678910111213/* app.css */.cookie-banner &#123; display: none;&#125;// app.d.css.tsdeclare const css: &#123; cookieBanner: string;&#125;;export default css;// App.tsximport styles from &quot;./app.css&quot;;â€‹styles.cookieBanner; // string é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤å¯¼å…¥ä¼šå¼•å‘é”™è¯¯ï¼Œè®©æ‚¨çŸ¥é“ TypeScript ä¸ç†è§£æ­¤æ–‡ä»¶ç±»å‹ï¼Œå¹¶ä¸”æ‚¨çš„è¿è¡Œæ—¶å¯èƒ½ä¸æ”¯æŒå¯¼å…¥å®ƒã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å·²é…ç½®è¿è¡Œæ—¶æˆ–æ†ç»‘ç¨‹åºæ¥å¤„ç†å®ƒï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ–°çš„ --allowArbitraryExtensions ç¼–è¯‘å™¨é€‰é¡¹æ¥æŠ‘åˆ¶é”™è¯¯ã€‚ è¯·æ³¨æ„ï¼Œä»å†å²ä¸Šçœ‹ï¼Œé€šè¿‡æ·»åŠ åä¸º app.css.d.ts çš„å£°æ˜æ–‡ä»¶è€Œä¸æ˜¯ app.d.css.ts ï¼Œé€šå¸¸å¯ä»¥è¾¾åˆ°ç±»ä¼¼çš„æ•ˆæœ â€”â€”ç„¶è€Œï¼Œè¿™åªæ˜¯é€šè¿‡ Node å¯¹ CommonJS çš„ require è§£æè§„åˆ™èµ·ä½œç”¨ã€‚ä¸¥æ ¼æ¥è¯´ï¼Œå‰è€…è¢«è§£é‡Šä¸ºä¸€ä¸ªåä¸ºapp.css.js çš„ JavaScript æ–‡ä»¶çš„å£°æ˜æ–‡ä»¶ ã€‚å› ä¸ºç›¸å¯¹æ–‡ä»¶å¯¼å…¥éœ€è¦åœ¨ Node çš„ ESM æ”¯æŒä¸­åŒ…å«æ‰©å±•åï¼Œæ‰€ä»¥ TypeScript ä¼šåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ --moduleResolution node16 åœ¨æˆ– nodenext ä¸‹çš„ ESM æ–‡ä»¶ä¸­å‡ºé”™ ã€‚ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·é˜…è¯»æ­¤åŠŸèƒ½çš„ææ¡ˆåŠå…¶ç›¸åº”çš„æ‹‰å–è¯·æ±‚ã€‚ customConditions--customConditions æ¥æ”¶ä¸€ä¸ªé™„åŠ æ¡ä»¶åˆ—è¡¨ï¼Œå½“ TypeScript ä» package.jsonçš„ exports æˆ– imports å­—æ®µè§£ææ—¶ï¼Œè¿™äº›æ¡ä»¶å°†æ·»åŠ åˆ°è§£æå™¨é»˜è®¤ä½¿ç”¨çš„ä»»ä½•ç°æœ‰æ¡ä»¶ä¸­ã€‚ ä¾‹å¦‚ï¼Œå½“åœ¨ tsconfig.json ä¸­è®¾ç½®æ­¤å­—æ®µæ—¶ï¼š 1234567&#123; &quot;compilerOptions&quot;: &#123; &quot;target&quot;: &quot;es2022&quot;, &quot;moduleResolution&quot;: &quot;bundler&quot;, &quot;customConditions&quot;: [&quot;my-condition&quot;] &#125;&#125; ä»»ä½•æ—¶å€™åœ¨ package.json ä¸­å¼•ç”¨ exports æˆ– imports å­—æ®µæ—¶ï¼ŒTypeScript éƒ½ä¼šè€ƒè™‘è°ƒç”¨ my-condition çš„æ¡ä»¶ã€‚ å› æ­¤ï¼Œå½“ä»å…·æœ‰ä»¥ä¸‹å†…å®¹çš„åŒ…ä¸­å¯¼å…¥æ—¶ package.json 1234567891011&#123; // ... &quot;exports&quot;: &#123; &quot;.&quot;: &#123; &quot;my-condition&quot;: &quot;./foo.mjs&quot;, &quot;node&quot;: &quot;./bar.mjs&quot;, &quot;import&quot;: &quot;./baz.mjs&quot;, &quot;require&quot;: &quot;./biz.mjs&quot; &#125; &#125;&#125; TypeScript å°†å°è¯•æŸ¥æ‰¾ä¸ foo.mjs å¯¹åº”çš„æ–‡ä»¶ã€‚ è¯¥å­—æ®µä»…åœ¨ --moduleResolution çš„ node16ã€nodenext å’Œ bundler é€‰é¡¹ä¸‹æœ‰æ•ˆ --verbatimModuleSyntaxé»˜è®¤æƒ…å†µä¸‹ï¼ŒTypeScript ä¼šåšä¸€äº›å«åš import elision çš„äº‹æƒ…ã€‚åŸºæœ¬ä¸Šï¼Œå¦‚æœä½ å†™ç±»ä¼¼ 12345import &#123; Car &#125; from &quot;./car&quot;;â€‹export function drive(car: Car) &#123; // ...&#125; TypeScript æ£€æµ‹åˆ°æ‚¨åªå¯¹ç±»å‹ä½¿ç”¨å¯¼å…¥ï¼Œæ‰€ä»¥è¾“å‡ºç»“æœä¼šå°†æ­¤å¯¼å…¥ä»£ç åˆ é™¤ã€‚æ‚¨çš„è¾“å‡º JavaScript å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š 123export function drive(car) &#123; // ...&#125; å¤§å¤šæ•°æ—¶å€™è¿™å¾ˆå¥½ï¼Œå› ä¸ºå¦‚æœ Car ä¸æ˜¯ä» ./car å¯¼å‡ºçš„å€¼ï¼Œæˆ‘ä»¬å°†æ”¶åˆ°è¿è¡Œæ—¶é”™è¯¯ã€‚ ä½†å®ƒç¡®å®ä¸ºæŸäº›è¾¹ç¼˜æƒ…å†µå¢åŠ äº†ä¸€å±‚å¤æ‚æ€§ã€‚ä¾‹å¦‚ï¼Œè¯·æ³¨æ„æ²¡æœ‰åƒè¿™æ ·çš„è¯­å¥ import &quot;./car&quot;;â€”â€”å¯¼å…¥è¢«å®Œå…¨åˆ é™¤ã€‚è¿™å®é™…ä¸Šå¯¹æœ‰æ— å‰¯ä½œç”¨çš„æ¨¡å—äº§ç”Ÿå½±å“ã€‚ TypeScript é’ˆå¯¹ JavaScript çš„ emit ç­–ç•¥è¿˜æœ‰å¦å¤–å‡ å±‚å¤æ‚æ€§â€”â€”å¯¼å…¥çœç•¥å¹¶ä¸æ€»æ˜¯ç”±å¯¼å…¥çš„ä½¿ç”¨æ–¹å¼é©±åŠ¨â€”â€”å®ƒé€šå¸¸è¿˜ä¼šå‚è€ƒå€¼çš„å£°æ˜æ–¹å¼ã€‚æ‰€ä»¥å¹¶ä¸æ€»æ˜¯å¾ˆæ¸…æ¥šæ˜¯å¦åƒä¸‹é¢è¿™æ ·çš„ä»£ç  1export &#123; Car &#125; from &quot;./car&quot;; åº”è¯¥ä¿ç•™æˆ–ä¸¢å¼ƒã€‚å¦‚æœ Car ç”¨ class ä¹‹ç±»çš„ä¸œè¥¿å£°æ˜ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥ä¿å­˜åœ¨ç”Ÿæˆçš„ JavaScript æ–‡ä»¶ä¸­ã€‚ä½†å¦‚æœ Car ä»…å£°æ˜ä¸º type åˆ«åæˆ– interfaceï¼Œåˆ™ JavaScript æ–‡ä»¶ Car æ ¹æœ¬ä¸åº”å¯¼å‡ºã€‚ è™½ç„¶ TypeScript å¯èƒ½èƒ½å¤Ÿæ ¹æ®æ¥è‡ªè·¨æ–‡ä»¶çš„ä¿¡æ¯åšå‡ºè¿™äº›å‘å‡ºå†³å®šï¼Œä½†å¹¶éæ¯ä¸ªç¼–è¯‘å™¨éƒ½å¯ä»¥ã€‚ imports å’Œ exports çš„ä¿®é¥°ç¬¦ type å¯¹è¿™äº›æƒ…å†µæœ‰ç‚¹å¸®åŠ©ã€‚æˆ‘ä»¬å¯ä»¥æ˜ç¡®æŒ‡å‡ºå¯¼å…¥æˆ–å¯¼å‡ºæ˜¯å¦ä»…ç”¨äºç±»å‹åˆ†æï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ä½¿ç”¨ä¿®é¥°ç¬¦å°†å…¶å®Œå…¨åˆ é™¤åˆ° JavaScript æ–‡ä»¶ä¸­ typeã€‚ 123456// This statement can be dropped entirely in JS outputimport type * as car from &quot;./car&quot;;â€‹// The named import/export &#x27;Car&#x27; can be dropped in JS outputimport &#123; type Car &#125; from &quot;./car&quot;;export &#123; type Car &#125; from &quot;./car&quot;; type ä¿®é¥°ç¬¦æœ¬èº«å¹¶ä¸æ˜¯å¾ˆæœ‰ç”¨â€”â€”é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¨¡å—çœç•¥ä»ç„¶ä¼šåˆ é™¤å¯¼å…¥ï¼Œå¹¶ä¸”æ²¡æœ‰ä»€ä¹ˆå¼ºåˆ¶æ‚¨åŒºåˆ† type æ™®é€šå¯¼å…¥å’Œå¯¼å‡ºã€‚æ‰€ä»¥ TypeScript æœ‰æ ‡å¿— --importsNotUsedAsValues æ¥ç¡®ä¿ä½ ä½¿ç”¨ type ä¿®é¥°ç¬¦ï¼Œ--preserveValueImportsä»¥é˜²æ­¢æŸäº›æ¨¡å—çœç•¥è¡Œä¸ºï¼Œå¹¶ --isolatedModules ç¡®ä¿ä½ çš„ TypeScript ä»£ç é€‚ç”¨äºä¸åŒçš„ç¼–è¯‘å™¨ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå¾ˆéš¾ç†è§£è¿™ 3 ä¸ªæ ‡å¿—çš„ç»†èŠ‚ï¼Œå¹¶ä¸”ä»ç„¶å­˜åœ¨ä¸€äº›å…·æœ‰æ„å¤–è¡Œä¸ºçš„è¾¹ç¼˜æƒ…å†µã€‚ --verbatimModuleSyntaxTypeScript 5.0 å¼•å…¥äº†ä¸€ä¸ªåä¸ºç®€åŒ–æƒ…å†µçš„æ–°é€‰é¡¹ã€‚è§„åˆ™è¦ç®€å•å¾—å¤šâ€”â€”ä»»ä½•æ²¡æœ‰ type ä¿®é¥°ç¬¦çš„å¯¼å…¥æˆ–å¯¼å‡ºéƒ½ä¼šè¢«ä¿ç•™ã€‚ä»»ä½•ä½¿ç”¨ type ä¿®é¥°ç¬¦çš„ä¸œè¥¿éƒ½ä¼šè¢«å®Œå…¨ä¸¢å¼ƒã€‚ 12345678// Erased away entirely.import type &#123; A &#125; from &quot;a&quot;;â€‹// Rewritten to &#x27;import &#123; b &#125; from &quot;bcd&quot;;&#x27;import &#123; b, type c, type d &#125; from &quot;bcd&quot;;â€‹// Rewritten to &#x27;import &#123;&#125; from &quot;xyz&quot;;&#x27;import &#123; type xyz &#125; from &quot;xyz&quot;; æœ‰äº†è¿™ä¸ªæ–°é€‰é¡¹ï¼Œæ‰€è§å³æ‰€å¾—ã€‚ ä¸è¿‡ï¼Œå½“æ¶‰åŠåˆ°æ¨¡å—äº’æ“ä½œæ—¶ï¼Œè¿™ç¡®å®æœ‰ä¸€äº›å½±å“ã€‚åœ¨æ­¤æ ‡å¿—ä¸‹ï¼Œå½“æ‚¨çš„è®¾ç½®æˆ–æ–‡ä»¶æ‰©å±•åæš—ç¤ºä¸åŒçš„æ¨¡å—ç³»ç»Ÿæ—¶ï¼ŒECMAScript imports å’Œ exports ä¸ä¼šè¢«é‡å†™ä¸º require è°ƒç”¨ã€‚ç›¸åï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚å¦‚æœæ‚¨éœ€è¦å‘å‡ºä½¿ç”¨ require å’Œ module.exports çš„ä»£ç ï¼Œåˆ™å¿…é¡»ä½¿ç”¨æ—©äº ES2015 çš„ TypeScript æ¨¡å—è¯­æ³•ï¼š è¾“å…¥TypeScript è¾“å‡º JavaScript import foo = require(&quot;foo&quot;); const foo = require(&quot;foo&quot;); function foo() &#123;&#125; function bar() &#123;&#125; function baz() &#123;&#125; export = &#123; foo, bar, baz &#125;; function foo() &#123;&#125; function bar() &#123;&#125; function baz() &#123;&#125; module.exports = &#123; foo, bar, baz &#125;; è™½ç„¶è¿™æ˜¯ä¸€ä¸ªé™åˆ¶ï¼Œä½†å®ƒç¡®å®æœ‰åŠ©äºä½¿ä¸€äº›é—®é¢˜æ›´åŠ æ˜æ˜¾ã€‚ä¾‹å¦‚ï¼Œå¿˜è®°åœ¨ package.json ä¸­è®¾ç½® type å­—æ®µ æ˜¯å¾ˆå¸¸è§çš„ã€‚--module node16ã€‚å› æ­¤ï¼Œå¼€å‘äººå‘˜ä¼šåœ¨æ²¡æœ‰æ„è¯†åˆ°çš„æƒ…å†µä¸‹å¼€å§‹ç¼–å†™ CommonJS æ¨¡å—è€Œä¸æ˜¯ ES æ¨¡å—ï¼Œä»è€Œæä¾›ä»¤äººæƒŠè®¶çš„æŸ¥æ‰¾è§„åˆ™å’Œ JavaScript è¾“å‡ºã€‚è¿™ä¸ªæ–°æ ‡å¿—ç¡®ä¿æ‚¨æœ‰æ„ä½¿ç”¨æ‚¨æ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶ç±»å‹ï¼Œå› ä¸ºè¯­æ³•æ˜¯æœ‰æ„ä¸åŒçš„ã€‚ å› ä¸º --verbatimModuleSyntax æä¾›äº†æ¯” --importsNotUsedAsValues å’Œ --preserveValueImports æ›´ä¸€è‡´çš„æ•…äº‹ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªç°æœ‰çš„æ ‡å¿—å·²è¢«å¼ƒç”¨ã€‚ æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯»åŸå§‹æ‹‰å–è¯·æ±‚åŠå…¶ææ¡ˆé—®é¢˜ã€‚ æ”¯æŒ export type *å½“ TypeScript 3.8 å¼•å…¥çº¯ç±»å‹å¯¼å…¥æ—¶ï¼Œæ–°è¯­æ³•ä¸å…è®¸ç”¨äº export * from &quot;module&quot; æˆ– export * as ns from &quot;module&quot; é‡æ–°å¯¼å‡ºã€‚TypeScript 5.0 æ·»åŠ äº†å¯¹è¿™ä¸¤ç§å½¢å¼çš„æ”¯æŒï¼š 1234567891011121314151617181920// models/vehicles.tsexport class Spaceship &#123; // ...&#125;â€‹// models/index.tsexport type * as vehicles from &quot;./vehicles&quot;;â€‹// main.tsimport &#123; vehicles &#125; from &quot;./models&quot;;â€‹function takeASpaceship(s: vehicles.Spaceship) &#123; // ok - `vehicles` only used in a type position&#125;â€‹function makeASpaceship() &#123; return new vehicles.Spaceship(); // ^^^^^^^^ // &#x27;vehicles&#x27; cannot be used as a value because it was exported using &#x27;export type&#x27;.&#125; æ‚¨å¯ä»¥åœ¨æ­¤å¤„é˜…è¯»æœ‰å…³å®æ–½çš„æ›´å¤šä¿¡æ¯ã€‚ JSDoc æ”¯æŒ @satisfiesTypeScript 4.9 å¼•å…¥äº† satisfies è¿ç®—ç¬¦ã€‚å®ƒç¡®ä¿è¡¨è¾¾å¼çš„ç±»å‹å…¼å®¹ï¼Œè€Œä¸å½±å“ç±»å‹æœ¬èº«ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä»£ç ï¼š 12345678910111213141516171819202122232425interface CompilerOptions &#123; strict?: boolean; outDir?: string; // ...&#125;â€‹interface ConfigSettings &#123; compilerOptions?: CompilerOptions; extends?: string | string[]; // ...&#125;â€‹let myConfigSettings = &#123; compilerOptions: &#123; strict: true, outDir: &quot;../lib&quot;, // ... &#125;,â€‹ extends: [ &quot;@tsconfig/strictest/tsconfig.json&quot;, &quot;../../../tsconfig.base.json&quot; ],â€‹&#125; satisfies ConfigSettings; åœ¨è¿™é‡Œï¼ŒTypeScript çŸ¥é“å®ƒ myConfigSettings.extends æ˜¯ç”¨æ•°ç»„å£°æ˜çš„â€”â€”å› ä¸ºåœ¨ satisfies éªŒè¯æˆ‘ä»¬å¯¹è±¡çš„ç±»å‹æ—¶ï¼Œå®ƒå¹¶æ²¡æœ‰ç›´æ¥å°†å…¶æ›´æ”¹ä¸º ConfigSettings å¹¶ä¸¢å¤±ä¿¡æ¯ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³æ˜ å°„è¿‡æ¥ extendsï¼Œé‚£å¾ˆå¥½ã€‚ 123declare function resolveConfig(configPath: string): CompilerOptions;â€‹let inheritedConfigs = myConfigSettings.extends.map(resolveConfig); è¿™å¯¹ TypeScript ç”¨æˆ·å¾ˆæœ‰å¸®åŠ©ï¼Œä½†æ˜¯å¾ˆå¤šäººä½¿ç”¨ TypeScript æ¥ä½¿ç”¨ JSDoc æ³¨é‡Šå¯¹ä»–ä»¬çš„ JavaScript ä»£ç è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ TypeScript 5.0 æ”¯æŒä¸€ä¸ªåä¸º JSDoc çš„æ–°æ ‡ç­¾ï¼Œ@satisfieså®ƒåšçš„äº‹æƒ…å®Œå…¨ä¸€æ ·ã€‚ /** @satisfies */ å¯ä»¥æ•è·ç±»å‹ä¸åŒ¹é…ï¼š 123456789101112131415// @ts-checkâ€‹/** * @typedef CompilerOptions * @prop &#123;boolean&#125; [strict] * @prop &#123;string&#125; [outDir] */â€‹/** * @satisfies &#123;CompilerOptions&#125; */let myCompilerOptions = &#123; outdir: &quot;../lib&quot;,// ~~~~~~ oops! we meant outDir&#125;; ä½†å®ƒä¼šä¿ç•™æˆ‘ä»¬è¡¨è¾¾å¼çš„åŸå§‹ç±»å‹ï¼Œå…è®¸æˆ‘ä»¬ç¨ååœ¨ä»£ç ä¸­æ›´ç²¾ç¡®åœ°ä½¿ç”¨æˆ‘ä»¬çš„å€¼ã€‚ 123456789101112131415161718192021222324252627282930// @ts-checkâ€‹/** * @typedef CompilerOptions * @prop &#123;boolean&#125; [strict] * @prop &#123;string&#125; [outDir] */â€‹/** * @typedef ConfigSettings * @prop &#123;CompilerOptions&#125; [compilerOptions] * @prop &#123;string | string[]&#125; [extends] */â€‹â€‹/** * @satisfies &#123;ConfigSettings&#125; */let myConfigSettings = &#123; compilerOptions: &#123; strict: true, outDir: &quot;../lib&quot;, &#125;, extends: [ &quot;@tsconfig/strictest/tsconfig.json&quot;, &quot;../../../tsconfig.base.json&quot; ],&#125;;â€‹let inheritedConfigs = myConfigSettings.extends.map(resolveConfig); /** @satisfies */ä¹Ÿå¯ä»¥åœ¨ä»»ä½•å¸¦æ‹¬å·çš„è¡¨è¾¾å¼ä¸Šå†…è”ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥ myConfigSettingsè¿™æ ·å†™ï¼š 12345678910let myConfigSettings = /** @satisfies &#123;ConfigSettings&#125; */ (&#123; compilerOptions: &#123; strict: true, outDir: &quot;../lib&quot;, &#125;, extends: [ &quot;@tsconfig/strictest/tsconfig.json&quot;, &quot;../../../tsconfig.base.json&quot; ],&#125;); ä¸ºä»€ä¹ˆï¼Ÿå¥½å§ï¼Œå½“æ‚¨æ›´æ·±å…¥åœ°äº†è§£å…¶ä»–ä¸€äº›ä»£ç ï¼ˆä¾‹å¦‚å‡½æ•°è°ƒç”¨ï¼‰æ—¶ï¼Œå®ƒé€šå¸¸æ›´æœ‰æ„ä¹‰ã€‚ 123compileCode(/** @satisfies &#123;ConfigSettings&#125; */ (&#123; // ...&#125;)); æ­¤åŠŸèƒ½ç”±Oleksandr Tarasiukæä¾›ï¼ JSDoc æ”¯æŒ @overloadåœ¨ TypeScript ä¸­ï¼Œæ‚¨å¯ä»¥ä¸ºå‡½æ•°æŒ‡å®šé‡è½½ã€‚é‡è½½ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥ç”¨ä¸åŒçš„å‚æ•°è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶å¯èƒ½è¿”å›ä¸åŒçš„ç»“æœã€‚ä»–ä»¬å¯ä»¥é™åˆ¶è°ƒç”¨è€…å®é™…ä½¿ç”¨æˆ‘ä»¬å‡½æ•°çš„æ–¹å¼ï¼Œå¹¶ä¼˜åŒ–ä»–ä»¬å°†è¿”å›çš„ç»“æœã€‚ 123456789101112131415// Our overloads:function printValue(str: string): void;function printValue(num: number, maxFractionDigits?: number): void;â€‹// Our implementation:function printValue(value: string | number, maximumFractionDigits?: number) &#123; if (typeof value === &quot;number&quot;) &#123; const formatter = Intl.NumberFormat(&quot;en-US&quot;, &#123; maximumFractionDigits, &#125;); value = formatter.format(value); &#125;â€‹ console.log(value);&#125; åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è¯´è¿‡ printValue å°† stringæˆ– number ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å¦‚æœå®ƒéœ€è¦ä¸€ä¸ª numberï¼Œå®ƒå¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°æ¥ç¡®å®šæˆ‘ä»¬å¯ä»¥æ‰“å°å¤šå°‘ä¸ªå°æ•°ä½ã€‚ TypeScript 5.0 ç°åœ¨å…è®¸ JSDoc ä½¿ç”¨æ–°æ ‡ç­¾å£°æ˜é‡è½½ @overloadã€‚æ¯ä¸ªå¸¦æœ‰æ ‡è®°çš„ JSDoc æ³¨é‡Šéƒ½ @overload è¢«è§†ä¸ºä»¥ä¸‹å‡½æ•°å£°æ˜çš„ä¸åŒé‡è½½ã€‚ 1234567891011121314151617181920212223242526272829// @ts-checkâ€‹/** * @overload * @param &#123;string&#125; value * @return &#123;void&#125; */â€‹/** * @overload * @param &#123;number&#125; value * @param &#123;number&#125; [maximumFractionDigits] * @return &#123;void&#125; */â€‹/** * @param &#123;string | number&#125; value * @param &#123;number&#125; [maximumFractionDigits] */function printValue(value, maximumFractionDigits) &#123; if (typeof value === &quot;number&quot;) &#123; const formatter = Intl.NumberFormat(&quot;en-US&quot;, &#123; maximumFractionDigits, &#125;); value = formatter.format(value); &#125;â€‹ console.log(value);&#125; ç°åœ¨ï¼Œæ— è®ºæˆ‘ä»¬æ˜¯åœ¨ TypeScript è¿˜æ˜¯ JavaScript æ–‡ä»¶ä¸­ç¼–å†™ï¼ŒTypeScript éƒ½å¯ä»¥è®©æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬æ˜¯å¦é”™è¯¯åœ°è°ƒç”¨äº†æˆ‘ä»¬çš„å‡½æ•°ã€‚ 123456// all allowedprintValue(&quot;hello!&quot;);printValue(123.45);printValue(123.45, 2);â€‹printValue(&quot;hello!&quot;, 123); // error! è¿™ä¸ªæ–°æ ‡ç­¾çš„å®ç°è¦å½’åŠŸäºTomasz Lenarcikã€‚ åœ¨tsc --build æ—¶å¯ä»¥ä¼ å…¥çš„æ–°æŒ‡ä»¤TypeScript ç°åœ¨å…è®¸åœ¨ --build æ¨¡å¼ä¸‹ä¼ é€’ä»¥ä¸‹æŒ‡ä»¤ --declaration --emitDeclarationOnly --declarationMap --sourceMap --inlineSourceMap è¿™ä½¿å¾—è‡ªå®šä¹‰æ„å»ºçš„æŸäº›éƒ¨åˆ†å˜å¾—æ›´åŠ å®¹æ˜“ï¼Œæ‚¨å¯èƒ½æœ‰ä¸åŒçš„å¼€å‘å’Œç”Ÿäº§æ„å»ºã€‚ ä¾‹å¦‚ï¼Œåº“çš„å¼€å‘æ„å»ºå¯èƒ½ä¸éœ€è¦ç”Ÿæˆå£°æ˜æ–‡ä»¶ï¼Œä½†ç”Ÿäº§æ„å»ºéœ€è¦ã€‚é¡¹ç›®å¯ä»¥å°†å£°æ˜å‘å°„é…ç½®ä¸ºé»˜è®¤å…³é—­ï¼Œåªéœ€ä½¿ç”¨ 1tsc --build -p ./my-project-dir ä¸€æ—¦åœ¨å†…å¾ªç¯ä¸­å®Œæˆè¿­ä»£ï¼Œâ€œç”Ÿäº§â€æ„å»ºå°±å¯ä»¥ä¼ é€’æŒ‡ä»¤ --declarationã€‚ 1tsc --build -p ./my-project-dir --declaration æœ‰å…³æ­¤æ›´æ”¹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§æ­¤å¤„ã€‚ ç¼–è¾‘å™¨ä¸­ä¸åŒºåˆ†å¤§å°å†™çš„å¯¼å…¥æ’åºåœ¨ Visual Studio å’Œ VS Code ç­‰ç¼–è¾‘å™¨ä¸­ï¼ŒTypeScript æ”¯æŒç»„ç»‡å’Œæ’åºå¯¼å…¥å’Œå¯¼å‡ºçš„ä½“éªŒã€‚ä½†æ˜¯ï¼Œå¯¹äºåˆ—è¡¨ä½•æ—¶â€œæ’åºâ€ï¼Œé€šå¸¸ä¼šæœ‰ä¸åŒçš„è§£é‡Šã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„å¯¼å…¥åˆ—è¡¨æ˜¯å¦æ’åºï¼Ÿ 12345import &#123; Toggle, freeze, toBoolean,&#125; from &quot;./utils&quot;; ç­”æ¡ˆå¯èƒ½ä»¤äººæƒŠè®¶åœ°æ˜¯â€œè§†æƒ…å†µè€Œå®šâ€ã€‚å¦‚æœæˆ‘ä»¬ä¸å…³å¿ƒåŒºåˆ†å¤§å°å†™ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ—è¡¨æ˜¾ç„¶æ²¡æœ‰æ’åºã€‚è¿™å°ä¿¡ f å‡ºç°åœ¨ t å’Œä¹‹å‰ Tã€‚ ä½†åœ¨å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ’åºé»˜è®¤æ˜¯æ¯”è¾ƒå­—ç¬¦ä¸²çš„å­—èŠ‚å€¼ã€‚JavaScript æ¯”è¾ƒå­—ç¬¦ä¸²çš„æ–¹å¼æ„å‘³ç€ &quot;Toggle&quot; æ€»æ˜¯åœ¨å‰é¢ &quot;freeze&quot; ï¼Œå› ä¸ºæ ¹æ® ASCII å­—ç¬¦ç¼–ç ï¼Œå¤§å†™å­—æ¯åœ¨å°å†™å­—æ¯ä¹‹å‰ã€‚æ‰€ä»¥ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œå¯¼å…¥åˆ—è¡¨æ˜¯æ’åºçš„ã€‚ TypeScript ä¹‹å‰è€ƒè™‘å¯¹å¯¼å…¥åˆ—è¡¨è¿›è¡Œæ’åºï¼Œå› ä¸ºå®ƒæ­£åœ¨è¿›è¡ŒåŸºæœ¬çš„åŒºåˆ†å¤§å°å†™çš„æ’åºã€‚å¯¹äºå–œæ¬¢ä¸åŒºåˆ†å¤§å°å†™æ’åºçš„å¼€å‘äººå‘˜ï¼Œæˆ–è€…ä½¿ç”¨åƒ ESLint è¿™æ ·é»˜è®¤éœ€è¦ä¸åŒºåˆ†å¤§å°å†™æ’åºçš„å·¥å…·çš„å¼€å‘äººå‘˜æ¥è¯´ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªä»¤äººæ²®ä¸§çš„åœ°æ–¹ã€‚ TypeScript ç°åœ¨é»˜è®¤æ£€æµ‹åŒºåˆ†å¤§å°å†™ã€‚è¿™æ„å‘³ç€ TypeScript å’Œ ESLint ç­‰å·¥å…·é€šå¸¸ä¸ä¼šå°±å¦‚ä½•æœ€å¥½åœ°å¯¹å¯¼å…¥è¿›è¡Œæ’åºè€Œç›¸äº’â€œäº‰åµâ€ã€‚ æˆ‘ä»¬çš„å›¢é˜Ÿä¹Ÿä¸€ç›´åœ¨è¯•éªŒè¿›ä¸€æ­¥çš„æ’åºç­–ç•¥ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤å¤„é˜…è¯»æœ‰å…³å†…å®¹ã€‚è¿™äº›é€‰é¡¹æœ€ç»ˆå¯èƒ½ç”±ç¼–è¾‘å™¨é…ç½®ã€‚ç›®å‰ï¼Œå®ƒä»¬ä»ç„¶ä¸ç¨³å®šä¸”å¤„äºè¯•éªŒé˜¶æ®µï¼Œæ‚¨ç°åœ¨å¯ä»¥é€šè¿‡ä½¿ç”¨ typescript.unstable JSON é€‰é¡¹ä¸­çš„æ¡ç›®åœ¨ VS Code ä¸­é€‰æ‹©åŠ å…¥å®ƒä»¬ã€‚ä»¥ä¸‹æ˜¯æ‚¨å¯ä»¥å°è¯•çš„æ‰€æœ‰é€‰é¡¹ï¼ˆè®¾ç½®ä¸ºé»˜è®¤å€¼ï¼‰ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243&#123; &quot;typescript.unstable&quot;: &#123; // Should sorting be case-sensitive? Can be: // - true // - false // - &quot;auto&quot; (auto-detect) &quot;organizeImportsIgnoreCase&quot;: &quot;auto&quot;,â€‹ // Should sorting be &quot;ordinal&quot; and use code points or consider Unicode rules? Can be: // - &quot;ordinal&quot; // - &quot;unicode&quot; &quot;organizeImportsCollation&quot;: &quot;ordinal&quot;,â€‹ // Under `&quot;organizeImportsCollation&quot;: &quot;unicode&quot;`, // what is the current locale? Can be: // - [any other locale code] // - &quot;auto&quot; (use the editor&#x27;s locale) &quot;organizeImportsLocale&quot;: &quot;en&quot;,â€‹ // Under `&quot;organizeImportsCollation&quot;: &quot;unicode&quot;`, // should upper-case letters or lower-case letters come first? Can be: // - false (locale-specific) // - &quot;upper&quot; // - &quot;lower&quot; &quot;organizeImportsCaseFirst&quot;: false,â€‹ // Under `&quot;organizeImportsCollation&quot;: &quot;unicode&quot;`, // do runs of numbers get compared numerically (i.e. &quot;a1&quot; &lt; &quot;a2&quot; &lt; &quot;a100&quot;)? Can be: // - true // - false &quot;organizeImportsNumericCollation&quot;: true,â€‹ // Under `&quot;organizeImportsCollation&quot;: &quot;unicode&quot;`, // do letters with accent marks/diacritics get sorted distinctly // from their &quot;base&quot; letter (i.e. is Ã© different from e)? Can be // - true // - false &quot;organizeImportsAccentCollation&quot;: true &#125;, &quot;javascript.unstable&quot;: &#123; // same options valid here... &#125;,&#125; æ‚¨å¯ä»¥é˜…è¯»æœ‰å…³è‡ªåŠ¨æ£€æµ‹å’ŒæŒ‡å®šä¸åŒºåˆ†å¤§å°å†™çš„åŸå§‹å·¥ä½œçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œç„¶åæ˜¯æ›´å¹¿æ³›çš„é€‰é¡¹é›†ã€‚ switch&#x2F;case è¯­æ³•è¡¥è¶³åœ¨ç¼–å†™ switch è¯­å¥æ—¶ï¼ŒTypeScript ç°åœ¨ä¼šæ£€æµ‹è¢«æ£€æŸ¥çš„å€¼ä½•æ—¶å…·æœ‰æ–‡å­—ç±»å‹ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œå®ƒå°†æä¾›ä¸€ä¸ªå®Œæˆæ¯ä¸ªæœªå‘ç°çš„è„šæ‰‹æ¶ caseã€‚ æ‚¨å¯ä»¥åœ¨ GitHub ä¸ŠæŸ¥çœ‹å®æ–½ç»†èŠ‚ã€‚ é€Ÿåº¦ã€å†…å­˜å’ŒåŒ…å¤§å°ä¼˜åŒ–TypeScript 5.0 åœ¨æˆ‘ä»¬çš„ä»£ç ç»“æ„ã€æ•°æ®ç»“æ„å’Œç®—æ³•å®ç°ä¸­åŒ…å«è®¸å¤šå¼ºå¤§çš„å˜åŒ–ã€‚è¿™äº›éƒ½æ„å‘³ç€ä½ çš„æ•´ä¸ªä½“éªŒåº”è¯¥æ›´å¿«â€”â€”ä¸ä»…ä»…æ˜¯è¿è¡Œ TypeScriptï¼Œç”šè‡³å®‰è£…å®ƒã€‚ ä»¥ä¸‹æ˜¯æˆ‘ä»¬ç›¸å¯¹äº TypeScript 4.9 åœ¨é€Ÿåº¦å’Œå¤§å°æ–¹é¢å–å¾—çš„ä¸€äº›æœ‰è¶£çš„èƒœåˆ©ã€‚ è®¾æƒ³ æ—¶é—´æˆ–å¤§å°ç›¸å¯¹äº TS 4.9 material-ui æ„å»ºæ—¶é—´ 90% TypeScript ç¼–è¯‘å™¨å¯åŠ¨æ—¶é—´ 89% ç¼–å‰§å»ºé€ æ—¶é—´ 88% TypeScript Compiler è‡ªå»ºæ—¶é—´ 87% Outlook Web æ„å»ºæ—¶é—´ 82% VS ä»£ç æ„å»ºæ—¶é—´ 80% æ‰“å­—ç¨¿ npm åŒ…å¤§å° 59% å¦‚ä½•ï¼Ÿæœ‰ä¸€äº›æ˜¾ç€çš„æ”¹è¿›ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æœªæ¥æä¾›æ›´å¤šç»†èŠ‚ã€‚ä½†æˆ‘ä»¬ä¸ä¼šè®©æ‚¨ç­‰å¾…é‚£ç¯‡åšæ–‡ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬æœ€è¿‘å°† TypeScript ä»å‘½åç©ºé—´è¿ç§»åˆ°æ¨¡å—ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿåˆ©ç”¨ç°ä»£æ„å»ºå·¥å…·æ¥æ‰§è¡ŒèŒƒå›´æå‡ç­‰ä¼˜åŒ–ã€‚ä½¿ç”¨æ­¤å·¥å…·ã€é‡æ–°å®¡è§†æˆ‘ä»¬çš„æ‰“åŒ…ç­–ç•¥å¹¶åˆ é™¤ä¸€äº›å·²å¼ƒç”¨çš„ä»£ç ï¼Œå·²å°† TypeScript 4.9 çš„ 63.8 MB åŒ…å¤§å°å‡å°‘äº†çº¦ 26.4 MBã€‚å®ƒè¿˜é€šè¿‡ç›´æ¥å‡½æ•°è°ƒç”¨ä¸ºæˆ‘ä»¬å¸¦æ¥äº†æ˜¾ç€çš„åŠ é€Ÿã€‚æˆ‘ä»¬åœ¨è¿™é‡Œæ•´ç†äº†ä¸€ä»½å…³äºæˆ‘ä»¬è¿ç§»åˆ°æ¨¡å—çš„è¯¦ç»†æ–‡ç« ã€‚ TypeScript è¿˜ä¸ºç¼–è¯‘å™¨ä¸­çš„å†…éƒ¨å¯¹è±¡ç±»å‹å¢åŠ äº†æ›´å¤šçš„ç»Ÿä¸€æ€§ï¼Œå¹¶ä¸”è¿˜ç²¾ç®€äº†å­˜å‚¨åœ¨å…¶ä¸­ä¸€äº›å¯¹è±¡ç±»å‹ä¸Šçš„æ•°æ®ã€‚è¿™å‡å°‘äº†å¤šæ€æ“ä½œï¼ŒåŒæ—¶å¹³è¡¡äº†å› ä½¿æˆ‘ä»¬çš„å¯¹è±¡å½¢çŠ¶æ›´ç»Ÿä¸€è€Œå¢åŠ çš„å†…å­˜ä½¿ç”¨é‡ã€‚ åœ¨å°†ä¿¡æ¯åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œæˆ‘ä»¬è¿˜æ‰§è¡Œäº†ä¸€äº›ç¼“å­˜ã€‚ç±»å‹æ˜¾ç¤ºå¯èƒ½ä½œä¸ºé”™è¯¯æŠ¥å‘Šã€å£°æ˜å‘å‡ºã€ä»£ç å®Œæˆç­‰çš„ä¸€éƒ¨åˆ†å‘ç”Ÿï¼Œæœ€ç»ˆå¯èƒ½ä¼šç›¸å½“æ˜‚è´µã€‚TypeScript ç°åœ¨ç¼“å­˜äº†ä¸€äº›å¸¸ç”¨çš„æœºåˆ¶ä»¥åœ¨è¿™äº›æ“ä½œä¸­é‡ç”¨ã€‚ æˆ‘ä»¬åšå‡ºçš„å¦ä¸€ä¸ªæ”¹è¿›è§£æå™¨çš„æ˜¾ç€å˜åŒ–æ˜¯åˆ©ç”¨ var å¶å°”å›é¿ä½¿ç”¨ let å’Œ const è·¨é—­åŒ…çš„æˆæœ¬ã€‚è¿™æé«˜äº†æˆ‘ä»¬çš„ä¸€äº›è§£ææ€§èƒ½ã€‚ æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬é¢„è®¡å¤§å¤šæ•°ä»£ç åº“åº”è¯¥ä¼šçœ‹åˆ° TypeScript 5.0 çš„é€Ÿåº¦æå‡ï¼Œå¹¶ä¸”å§‹ç»ˆèƒ½å¤Ÿé‡ç° 10% åˆ° 20% ä¹‹é—´çš„èƒœåˆ©ã€‚å½“ç„¶ï¼Œè¿™å°†å–å†³äºç¡¬ä»¶å’Œä»£ç åº“ç‰¹æ€§ï¼Œä½†æˆ‘ä»¬é¼“åŠ±æ‚¨ä»Šå¤©å°±åœ¨æ‚¨çš„ä»£ç åº“ä¸Šå°è¯•ä¸€ä¸‹ï¼ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æˆ‘ä»¬çš„ä¸€äº›æ˜¾ç€ä¼˜åŒ–ï¼š è¿ç§»åˆ°æ¨¡å— Node å•ä½“åŒ– Symbol å•ä½“åŒ– Identifier ç¼©å°å°ºå¯¸ Printer ç¼“å­˜ é™åˆ¶ä½¿ç”¨ var é‡å¤§æ›´æ”¹å’Œå¼ƒç”¨è¿è¡Œæ—¶è¦æ±‚TypeScript ç°åœ¨ä»¥ ECMAScript 2018 ä¸ºç›®æ ‡ã€‚TypeScript åŒ…è¿˜è®¾ç½®äº†æœ€ä½é¢„æœŸå¼•æ“ 12.20ã€‚å¯¹äº Node ç”¨æˆ·ï¼Œè¿™æ„å‘³ç€ TypeScript 5.0 çš„æœ€ä½ç‰ˆæœ¬è¦æ±‚è‡³å°‘ä¸º Node.js 12.20 åŠæ›´é«˜ç‰ˆæœ¬ã€‚ lib.d.tså˜åŒ–æ›´æ”¹ DOM ç±»å‹çš„ç”Ÿæˆæ–¹å¼å¯èƒ½ä¼šå¯¹ç°æœ‰ä»£ç äº§ç”Ÿå½±å“ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒæŸäº›å±æ€§å·²ä» number æ•°å­—æ–‡å­—ç±»å‹è½¬æ¢ä¸ºæ•°å­—æ–‡å­—ç±»å‹ï¼Œå¹¶ä¸”ç”¨äºå‰ªåˆ‡ã€å¤åˆ¶å’Œç²˜è´´äº‹ä»¶å¤„ç†çš„å±æ€§å’Œæ–¹æ³•å·²è·¨ç•Œé¢ç§»åŠ¨ã€‚ API é‡å¤§å˜æ›´åœ¨ TypeScript 5.0 ä¸­ï¼Œæˆ‘ä»¬è½¬å‘äº†æ¨¡å—ï¼Œåˆ é™¤äº†ä¸€äº›ä¸å¿…è¦çš„æ¥å£ï¼Œå¹¶è¿›è¡Œäº†ä¸€äº›æ­£ç¡®æ€§æ”¹è¿›ã€‚æœ‰å…³æ›´æ”¹å†…å®¹çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æˆ‘ä»¬çš„API é‡å¤§æ›´æ”¹é¡µé¢ã€‚ å…³ç³»è¿ç®—ç¬¦ä¸­ç¦æ­¢çš„éšå¼å¼ºåˆ¶è½¬æ¢å¦‚æœæ‚¨ç¼–å†™çš„ä»£ç å¯èƒ½ä¼šå¯¼è‡´éšå¼çš„å­—ç¬¦ä¸²åˆ°æ•°å­—å¼ºåˆ¶è½¬æ¢ï¼Œåˆ™ TypeScript ä¸­çš„æŸäº›æ“ä½œä¼šè­¦å‘Šæ‚¨ï¼š 123function func(ns: number | string) &#123; return ns * 4; // Error, possible implicit coercion&#125; åœ¨ 5.0 ä¸­ï¼Œè¿™ä¹Ÿå°†åº”ç”¨äºå…³ç³»è¿ç®—ç¬¦&gt;ã€&lt;ã€&lt;=å’Œ&gt;=ï¼š 123function func(ns: number | string) &#123; return ns &gt; 4; // Now also an error&#125; å¦‚æœéœ€è¦ï¼Œè¦å…è®¸è¿™æ ·åšï¼Œæ‚¨å¯ä»¥æ˜¾å¼åœ°å°†æ“ä½œæ•°å¼ºåˆ¶ä¸ºnumberusing +ï¼š 123function func(ns: number | string) &#123; return +ns &gt; 4; // OK&#125; æ­¤æ­£ç¡®æ€§æ”¹è¿›ç”± Mateusz BurzyÅ„ski æä¾›ã€‚ æšä¸¾å¤§ä¿®enum è‡ªä»å®ƒçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä»¥æ¥ï¼ŒTypeScript å°±ä¸€ç›´å­˜åœ¨ä¸€äº›å…³äº s çš„å¥‡æ€ªä¹‹å¤„ã€‚åœ¨ 5.0 ä¸­ï¼Œæˆ‘ä»¬æ­£åœ¨æ¸…ç†å…¶ä¸­çš„ä¸€äº›é—®é¢˜ï¼Œå¹¶å‡å°‘ç†è§£ enum æ‚¨å¯ä»¥å£°æ˜çš„å„ç§ s æ‰€éœ€çš„æ¦‚å¿µæ•°ã€‚ ä½œä¸ºå…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°ä¸¤ä¸ªä¸»è¦çš„æ–°é”™è¯¯ã€‚é¦–å…ˆæ˜¯å°†åŸŸå¤–æ–‡å­—åˆ†é…ç»™ç±»å‹ enum ç°åœ¨ä¼šåƒäººä»¬é¢„æœŸçš„é‚£æ ·å‡ºé”™ï¼š 12345678enum SomeEvenDigit &#123; Zero = 0, Two = 2, Four = 4&#125;â€‹// Now correctly an errorlet m: SomeEvenDigit = 1; å¦ä¸€ä¸ªæ˜¯ç”¨æ··åˆæ•°å­—å’Œé—´æ¥å­—ç¬¦ä¸²æšä¸¾å¼•ç”¨å£°æ˜å€¼çš„æšä¸¾ä¼šé”™è¯¯åœ°åˆ›å»ºä¸€ä¸ªå…¨æ•°å­— enumï¼š 12345678910enum Letters &#123; A = &quot;a&quot;&#125;enum Numbers &#123; one = 1, two = Letters.A&#125;â€‹// Now correctly an errorconst t: number = Numbers.two; æ‚¨å¯ä»¥åœ¨ç›¸å…³æ›´æ”¹ä¸­æŸ¥çœ‹æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ å¯¹æ„é€ å‡½æ•°ä¸­çš„å‚æ•°è£…é¥°å™¨è¿›è¡Œæ›´å‡†ç¡®çš„ç±»å‹æ£€æŸ¥--experimentalDecoratorsTypeScript 5.0 ä½¿ --experimentalDecoratorsã€‚è¿™ä¸€ç‚¹å˜å¾—æ˜æ˜¾çš„ä¸€ä¸ªåœ°æ–¹æ˜¯åœ¨æ„é€ å‡½æ•°å‚æ•°ä¸Šä½¿ç”¨è£…é¥°å™¨æ—¶ã€‚ 12345678910export declare const inject: (entity: any) =&gt; (target: object, key: string | symbol, index?: number) =&gt; void;â€‹export class Foo &#123;&#125;â€‹export class C &#123; constructor(@inject(Foo) private x: any) &#123; &#125;&#125; æ­¤è°ƒç”¨å°†å¤±è´¥ï¼Œå› ä¸ºkeyéœ€è¦ä¸€ä¸ª string | symbolï¼Œä½†æ„é€ å‡½æ•°å‚æ•°æ”¶åˆ°ä¸€ä¸ªé”® undefinedã€‚key æ­£ç¡®çš„è§£å†³æ–¹æ³•æ˜¯æ›´æ”¹ within çš„ç±»å‹ injectã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯æ— æ³•å‡çº§çš„åº“ï¼Œä¸€ä¸ªåˆç†çš„è§£å†³æ–¹æ³•æ˜¯åŒ…è£… inject ä¸€ä¸ªç±»å‹æ›´å®‰å…¨çš„è£…é¥°å™¨å‡½æ•°ï¼Œå¹¶åœ¨key. æ›´å¤šè¯¦æƒ…ï¼Œè¯·å‚é˜…æœ¬æœŸã€‚ å¼ƒç”¨å’Œé»˜è®¤æ›´æ”¹åœ¨ TypeScript 5.0 ä¸­ï¼Œæˆ‘ä»¬å¼ƒç”¨äº†ä»¥ä¸‹è®¾ç½®å’Œè®¾ç½®å€¼ï¼š --target: ES3 --out --noImplicitUseStrict --keyofStringsOnly --suppressExcessPropertyErrors --suppressImplicitAnyIndexErrors --noStrictGenericChecks --charset --importsNotUsedAsValues --preserveValueImports prependåœ¨é¡¹ç›®å‚è€ƒä¸­ åœ¨ TypeScript 5.5 ä¹‹å‰ï¼Œè¿™äº›é…ç½®å°†ç»§ç»­è¢«å…è®¸ï¼Œå±Šæ—¶å®ƒä»¬å°†è¢«å®Œå…¨åˆ é™¤ï¼Œä½†æ˜¯ï¼Œå¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨è¿™äº›è®¾ç½®ï¼Œæ‚¨å°†æ”¶åˆ°è­¦å‘Šã€‚åœ¨ TypeScript 5.0 ä»¥åŠæœªæ¥ç‰ˆæœ¬ 5.1ã€5.2ã€5.3 å’Œ 5.4 ä¸­ï¼Œæ‚¨å¯ä»¥æŒ‡å®š &quot;ignoreDeprecations&quot;: &quot;5.0&quot; å±è”½è¿™äº›è­¦å‘Šæç¤ºã€‚æˆ‘ä»¬è¿˜å°†å¾ˆå¿«å‘å¸ƒä¸€ä¸ª 4.9 è¡¥ä¸ï¼Œä»¥å…è®¸æŒ‡å®š ignoreDeprecations ä»¥å…è®¸æ›´å¹³æ»‘çš„å‡çº§ã€‚é™¤äº†å¼ƒç”¨ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æ›´æ”¹äº†ä¸€äº›è®¾ç½®ä»¥æ›´å¥½åœ°æ”¹è¿› TypeScript ä¸­çš„è·¨å¹³å°è¡Œä¸ºã€‚ --newLineï¼Œå®ƒæ§åˆ¶ JavaScript æ–‡ä»¶ä¸­å‘å‡ºçš„è¡Œå°¾ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œè¿‡å»å¸¸å¸¸æ ¹æ®å½“å‰æ“ä½œç³»ç»Ÿè¿›è¡Œæ¨æ–­ã€‚æˆ‘ä»¬è®¤ä¸ºæ„å»ºåº”è¯¥å°½å¯èƒ½å…·æœ‰ç¡®å®šæ€§ï¼Œå¹¶ä¸” Windows è®°äº‹æœ¬ç°åœ¨æ”¯æŒæ¢è¡Œç¬¦è¡Œç»“å°¾ï¼Œå› æ­¤æ–°çš„é»˜è®¤è®¾ç½®æ˜¯ LFã€‚ æ—§çš„ç‰¹å®šäºæ“ä½œç³»ç»Ÿçš„æ¨ç†è¡Œä¸ºä¸å†å¯ç”¨ã€‚ --forceConsistentCasingInFileNames, è¿™ç¡®ä¿äº†é¡¹ç›®ä¸­å¯¹åŒä¸€æ–‡ä»¶åçš„æ‰€æœ‰å¼•ç”¨éƒ½åœ¨å¤§å°å†™ä¸­è¾¾æˆä¸€è‡´ï¼Œç°åœ¨é»˜è®¤ä¸º trueã€‚ è¿™æœ‰åŠ©äºæ•è·åœ¨ä¸åŒºåˆ†å¤§å°å†™çš„æ–‡ä»¶ç³»ç»Ÿä¸Šç¼–å†™çš„ä»£ç çš„å·®å¼‚é—®é¢˜ã€‚ æ‚¨å¯ä»¥ç•™ä¸‹åé¦ˆå¹¶æŸ¥çœ‹æœ‰å…³ 5.0 å¼ƒç”¨è·Ÿè¸ªé—®é¢˜çš„æ›´å¤šä¿¡æ¯ ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Ÿä¸è¦æ“ä¹‹è¿‡æ€¥ï¼ŒTypeScript 5.1 å·²ç»åœ¨å¼€å‘ä¸­äº†ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„è®¡åˆ’éƒ½å·²ç»åœ¨ GitHub ä¸Šäº†ã€‚å¦‚æœä½ è·ƒè·ƒæ¬²è¯•ï¼Œæˆ‘ä»¬é¼“åŠ±ä½ å°è¯• TypeScript çš„æ¯æ—¥æ„å»ºç‰ˆæœ¬æˆ–é’ˆå¯¹ VS Code çš„ JavaScript å’Œ TypeScript Nightly æ‰©å±•ï¼ å½“ç„¶ï¼Œå¦‚æœæ‚¨é€‰æ‹©åªäº«å— TypeScript çš„æ–°ç¨³å®šç‰ˆï¼Œæˆ‘ä»¬ä¹Ÿä¸ä¼šæ„Ÿåˆ°å—ä¼¤ã€‚æˆ‘ä»¬å¸Œæœ› TypeScript 5.0 è®©æ¯ä¸ªäººçš„ç¼–ç æ›´å¿«ã€æ›´æœ‰è¶£ã€‚ Happy Hacking! â€“ Daniel Rosenwasser å’Œ TypeScript å›¢é˜Ÿ","categories":[{"name":"å¤–æ–‡ç¿»è¯‘","slug":"å¤–æ–‡ç¿»è¯‘","permalink":"http://example.com/categories/%E5%A4%96%E6%96%87%E7%BF%BB%E8%AF%91/"}],"tags":[{"name":"å¤–æ–‡ç¿»è¯‘","slug":"å¤–æ–‡ç¿»è¯‘","permalink":"http://example.com/tags/%E5%A4%96%E6%96%87%E7%BF%BB%E8%AF%91/"},{"name":"typescript","slug":"typescript","permalink":"http://example.com/tags/typescript/"}]},{"title":"[è¯‘] å°¤é›¨æºªï¼šVue 2022 å›é¡¾åŠ 2023 å±•æœ›","slug":"review2022","date":"2023-03-01T02:09:31.000Z","updated":"2023-03-01T02:09:31.000Z","comments":true,"path":"2023/03/01/review2022/","permalink":"http://example.com/2023/03/01/review2022/","excerpt":"","text":"åŸæ–‡ å°¤é›¨æºªyoutobeæ¼”è¿›ï¼šVue.js Nation 2023 æ–°å¹´å¿«ä¹ï¼ŒVue ç¤¾åŒºï¼2023 å¹´å³å°†åˆ°æ¥ï¼Œæˆ‘ä»¬æƒ³å€Ÿæ­¤æœºä¼šå›é¡¾ä¸€ä¸‹ 2022 å¹´å‘ç”Ÿçš„äº‹æƒ…ï¼Œå¹¶è®¨è®º 2023 å¹´çš„æœŸæœ› å›é¡¾ 2022 å¹´2022 å¹´ 2 æœˆï¼Œæˆ‘ä»¬å°† Vue çš„é»˜è®¤ç‰ˆæœ¬åˆ‡æ¢ä¸º 3.xã€‚è¿™ä¸€è½¬å˜æ ‡å¿—ç€ v3 æ¡†æ¶çš„æ‰€æœ‰å®˜æ–¹éƒ¨åˆ†éƒ½å·²å‡†å¤‡å°±ç»ªï¼ŒåŒ…æ‹¬å¯¹æä¾›æœ€æ–°æœ€ä½³å®è·µæŒ‡å—çš„æ–‡æ¡£è¿›è¡Œé‡å¤§ä¿®æ”¹ã€‚ æˆ‘ä»¬ä»å¤„äºç”Ÿæ€ç³»ç»Ÿè¿ç§»åˆ° Vue 3 çš„è¿‡æ¸¡æœŸã€‚å› æ­¤ï¼Œåœ¨è½¬æ¢ä¹‹åï¼Œæˆ‘ä»¬æ›´ä¸“æ³¨äºé€šè¿‡å¼€å‘å·¥å…·æ¥æ”¹å–„ Vue çš„å¼€å‘äººå‘˜ä½“éªŒã€‚æˆ‘ä»¬çš„å›¢é˜Ÿæˆå‘˜ä¸€ç›´ç§¯æå‚ä¸ Vite çš„å¼€å‘ï¼Œæˆ‘ä»¬é€šè¿‡å‘å¸ƒ Volar 1.0 å¯¹ Vue çš„ IDE å’Œ TypeScript æ”¯æŒè¿›è¡Œäº†é‡å¤§æ”¹è¿›ã€‚ åœ¨ 2022 å¹´æœŸé—´ï¼Œæˆ‘ä»¬çœ‹åˆ° Vue 3 çš„ NPM ä½¿ç”¨ç‡å¢é•¿äº†è¿‘ 200% ã€‚åœ¨ç¤¾åŒºæ–¹é¢ï¼ŒVue 3ç”Ÿæ€ç³»ç»Ÿç°åœ¨å·²ç»æˆç†Ÿï¼Œæä¾›äº†å‡ºè‰²çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥å¸®åŠ©æé«˜ä½ çš„å¼€å‘æ•ˆç‡ã€‚Nuxt 3 å’Œ Vuetify 3 å‡åœ¨ 2022 å¹´ 11 æœˆè¾¾åˆ°ç¨³å®šçŠ¶æ€ï¼ŒNativeScript for Vue 3 æœ€è¿‘æ¨å‡ºäº†æµ‹è¯•ç‰ˆã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬æƒ³å¯¹é•¿æ—¶é—´æ”¯æŒ Vue 3 çš„ä¼˜ç§€é¡¹ç›®è¡¨ç¤ºæ„Ÿè°¢ï¼šQuasarã€NaiveUIã€Ionic Vueã€PrimeVueã€InkLineã€ElementPlusã€æ›´å¤šâ€¦ã€‚ å°½ç®¡ Vue 3 ç°åœ¨æ˜¯é»˜è®¤çš„ï¼Œä½†æˆ‘ä»¬çŸ¥é“ç”±äºè¿ç§»æˆæœ¬ï¼Œè®¸å¤šç”¨æˆ·ä¸å¾—ä¸ç»§ç»­ä½¿ç”¨ Vue 2ã€‚ä¸ºäº†ç¡®ä¿ Vue 2 ç”¨æˆ·ä»æ¡†æ¶çš„è¿›æ­¥ä¸­å—ç›Šï¼Œæˆ‘ä»¬å†³å®šå°† Vue 2 çš„æºä»£ç è½¬ç§»åˆ° TypeScriptï¼Œå¹¶åœ¨ Vue 2.7 ä¸­å‘åç§»æ¤äº†ä¸€äº›æœ€é‡è¦çš„ Vue 3 åŠŸèƒ½ã€‚æˆ‘ä»¬è¿˜ç¡®ä¿ Viteã€Vue Devtools å’Œ Volar éƒ½åŒæ—¶æ”¯æŒ Vue 2 å’Œ Vue 3ã€‚ 2023 å¹´ä¼šå‘ç”Ÿä»€ä¹ˆè¾ƒå°å’Œæ›´é¢‘ç¹çš„æ¬¡è¦ç‰ˆæœ¬éšç€æœ€åä¸€ä¸ª Vue 2 æ¬¡è¦ç‰ˆæœ¬ (2.7) çš„å‘å¸ƒï¼Œæˆ‘ä»¬é¢„è®¡å°†åœ¨ 2023 å¹´å…¨é€Ÿæ¨å‡º Vue 3 æ ¸å¿ƒçš„åŠŸèƒ½ã€‚æˆ‘ä»¬æœ‰å¾ˆé•¿çš„åŠŸèƒ½åˆ—è¡¨ï¼Œæˆ‘ä»¬å¾ˆé«˜å…´èƒ½ç»§ç»­åŠªåŠ›ï¼ æˆ‘ä»¬æƒ³è¦æ”¹è¿›æˆ‘ä»¬çš„å‘å¸ƒèŠ‚å¥ã€‚Vue éµå¾ª semverï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬åº”è¯¥åªå‘å¸ƒæ¬¡è¦ç‰ˆæœ¬çš„åŠŸèƒ½ã€‚è¿‡å»ï¼Œæˆ‘ä»¬é‡‡ç”¨â€œå¤§æ¬¡è¦â€æ–¹æ³•ï¼Œæˆ‘ä»¬å°†è®¸å¤šåŠŸèƒ½ç»„åˆåœ¨å¤§çš„ã€ä¸é¢‘ç¹çš„æ¬¡è¦ç‰ˆæœ¬ä¸­ã€‚è¿™å¯¼è‡´åœ¨æˆ‘ä»¬å¤„ç†å…¶ä»–é«˜å¤æ‚æ€§åŠŸèƒ½æ—¶ï¼Œç›¸å½“å¤šçš„ä½å¤æ‚æ€§åŠŸèƒ½è¢«é˜»æ­¢ã€‚åœ¨ 2023 å¹´ï¼Œæˆ‘ä»¬å¸Œæœ›å‘å¸ƒæ›´å°ã€æ›´é¢‘ç¹çš„æ¬¡è¦ç‰ˆæœ¬ï¼Œä»¥ä¾¿æˆ‘ä»¬èƒ½å¤Ÿæ›´å¿«åœ°æ¨å‡ºæ›´å¤šåŠŸèƒ½ã€‚ è¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬å°†è°ƒæ•´ 3.3 ä¸­çš„å†…å®¹ã€‚æœ¬æ¥ï¼Œæˆ‘ä»¬è®¡åˆ’åœ¨ 3.3 ä¸­å°† Suspense å’Œ Reactivity Transform è„±ç¦»å®éªŒé˜¶æ®µã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬è®¤ä¸ºä¸¤è€…ä»éœ€è¦è¿›ä¸€æ­¥çš„ RFC è®¨è®ºï¼Œå¹¶ä¸”å®ƒä»¬ä¸åº”é˜»ç¢å…¶ä»–æ›´ç›´æ¥çš„åŠŸèƒ½è½åœ°ã€‚ç°åœ¨ï¼Œ3.3 çš„ç›®æ ‡æ˜¯æ˜ç¡®ä¸”ä¸éœ€è¦ RFC è®¨è®ºçš„æè®®&#x2F;è®¡åˆ’åŠŸèƒ½ - ä¾‹å¦‚ï¼Œæ”¯æŒ&lt;script setup&gt;å®ä¸­çš„å¤–éƒ¨å¯¼å…¥ç±»å‹ã€‚ ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬å°†ï¼š è¿›ä¸€æ­¥è¯„ä¼° Suspense å’Œ Reactivity Transform çš„å‡†å¤‡æƒ…å†µã€‚ èŠ±æ—¶é—´è¯„ä¼°æœªå®Œæˆçš„ç”¨æˆ·æäº¤çš„ RFC å’ŒåŠŸèƒ½è¯·æ±‚ã€‚ å‘å¸ƒæˆ‘ä»¬æ‰“ç®—åœ¨ 3.4 åŠæ›´é«˜ç‰ˆæœ¬ä¸­å®ç°çš„åŠŸèƒ½çš„ RFCï¼Œä¾‹å¦‚ SSR æ‡’æƒ°æ°´åˆï¼ˆSSR lazy hydrationï¼‰ã€‚ é¢„è®¡æœ¬æœˆæ™šäº›æ—¶å€™ä¼šæœ‰æ›´å¤šç»†èŠ‚ã€‚ å¦ä¸€ä»¶éœ€è¦æ³¨æ„çš„äº‹æƒ…æ˜¯ï¼Œåœ¨å¯é¢„è§çš„æœªæ¥æ²¡æœ‰é‡å¤§çªç ´æ€§å˜åŒ–çš„è®¡åˆ’ã€‚è®¤è¯†åˆ°ç”¨æˆ·åœ¨ v2 åˆ° v3 è¿‡æ¸¡æœŸé—´é¢ä¸´çš„æŒ‘æˆ˜ï¼Œæˆ‘ä»¬å¸Œæœ› Vue æœ‰ä¸€ä¸ªæ›´å¥½çš„é•¿æœŸå‡çº§æ•…äº‹ã€‚ Vaporæ¨¡å¼Vapor Mode æ˜¯æˆ‘ä»¬ä¸€ç›´åœ¨è¯•éªŒçš„å¦ä¸€ç§ç¼–è¯‘ç­–ç•¥ï¼Œå…¶çµæ„Ÿæ¥è‡ªSolidã€‚ç»™å®šç›¸åŒçš„ Vue SFCï¼Œä¸å½“å‰åŸºäºè™šæ‹Ÿ DOM çš„è¾“å‡ºç›¸æ¯”ï¼ŒVapor Mode å°†å…¶ç¼–è¯‘æˆæ€§èƒ½æ›´é«˜ã€ä½¿ç”¨æ›´å°‘å†…å­˜ä¸”éœ€è¦æ›´å°‘è¿è¡Œæ—¶æ”¯æŒä»£ç çš„ JavaScript è¾“å‡ºã€‚å®ƒä»å¤„äºæ—©æœŸé˜¶æ®µï¼Œä½†è¿™é‡Œæœ‰ä¸€äº›é«˜å±‚æ¬¡çš„è¦ç‚¹ï¼š Vapor æ¨¡å¼é€‚ç”¨äºä¸»è¦å…³æ³¨æ€§èƒ½çš„ç”¨ä¾‹ã€‚å®ƒæ˜¯å¯é€‰çš„ï¼Œä¸ä¼šå½±å“ç°æœ‰çš„ä»£ç åº“ã€‚ è‡³å°‘ï¼Œæ‚¨å°†èƒ½å¤Ÿå°† Vapor ç»„ä»¶å­æ ‘åµŒå…¥åˆ°ä»»ä½•ç°æœ‰çš„ Vue 3 åº”ç”¨ç¨‹åºä¸­ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ç»„ä»¶çº§åˆ«å®ç°ç²¾ç»†çš„é€‰æ‹©åŠ å…¥ï¼Œè¿™æ„å‘³ç€åœ¨åŒä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­è‡ªç”±æ··åˆ Vapor å’Œé Vapor ç»„ä»¶ã€‚ åªä½¿ç”¨ Vapor ç»„ä»¶æ„å»ºåº”ç”¨ç¨‹åºå…è®¸æ‚¨ä»åŒ…ä¸­åˆ é™¤è™šæ‹Ÿ DOM è¿è¡Œæ—¶ï¼Œæå¤§åœ°å‡å°‘åŸºçº¿è¿è¡Œæ—¶å¤§å°ã€‚ ä¸ºäº†è·å¾—æœ€ä½³æ€§èƒ½ï¼ŒVapor æ¨¡å¼å°†åªæ”¯æŒ Vue åŠŸèƒ½çš„ä¸€ä¸ªå­é›†ã€‚ç‰¹åˆ«æ˜¯ï¼ŒVapor Mode ç»„ä»¶å°†ä»…æ”¯æŒ Composition API å’Œ&lt;script setup&gt;ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªå—æ”¯æŒçš„å­é›†åœ¨ Vapor å’Œé Vapor ç»„ä»¶ä¹‹é—´çš„å·¥ä½œæ–¹å¼å®Œå…¨ç›¸åŒã€‚","categories":[{"name":"å¤–æ–‡ç¿»è¯‘","slug":"å¤–æ–‡ç¿»è¯‘","permalink":"http://example.com/categories/%E5%A4%96%E6%96%87%E7%BF%BB%E8%AF%91/"}],"tags":[{"name":"vue","slug":"vue","permalink":"http://example.com/tags/vue/"},{"name":"å¤–æ–‡ç¿»è¯‘","slug":"å¤–æ–‡ç¿»è¯‘","permalink":"http://example.com/tags/%E5%A4%96%E6%96%87%E7%BF%BB%E8%AF%91/"}]},{"title":"[è¯‘] 2023å¹´JavaScriptçš„å‘å±•è¶‹åŠ¿","slug":"trends","date":"2023-02-24T04:00:00.000Z","updated":"2023-02-24T04:00:00.000Z","comments":true,"path":"2023/02/24/trends/","permalink":"http://example.com/2023/02/24/trends/","excerpt":"","text":"åŸæ–‡åœ°å€ï¼šhttps://www.jamesqquick.com/blog/javascript-trends-2023/ å‰è¨€2022å¹´ï¼Œæ¯” Node.js å¿«ä¸‰å€çš„ Bun ç«é€Ÿå‡ºåœˆï¼Œæˆä¸º JavaScript æ¡†æ¶ä¸­çš„å½“çº¢ç‚¸å­é¸¡ï¼Œå¦‚ä½•æŠŠæ¡JavaScript å‘å±•è¶‹åŠ¿å’Œé€‰æ‹©æ­£ç¡®çš„æŠ€æœ¯æ–¹å‘å¯¹äºå‰ç«¯å¼€å‘è€Œè¨€è‡³å…³é‡è¦ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScript çš„ç”Ÿæ€ç³»ç»Ÿå‘å±•éå¸¸è¿…é€Ÿã€‚äº‹å®ä¸Šæˆ‘ä»¬å¾ˆéš¾å®Œå…¨è·Ÿä¸Šå®ƒçš„å‘å±•èŠ‚å¥ï¼Œä¸‹é¢è®©æˆ‘ä»¬å¿«é€Ÿäº†è§£ä¸€ä¸‹2023å¹´åº”è¯¥å…³æ³¨çš„ JavaScript å‘å±•è¶‹åŠ¿ã€‚ éœ€è¦å†™çš„ Javascript ä»£ç é‡ä¼šæ›´å°‘ä¸‹é¢æˆ‘åˆ—äº†å‡ ä¸ªåŸå› æ¥è§£é‡Šï¼šä¸ºä»€ä¹ˆä»Šå¹´æˆ‘ä»¬ä¸å†éœ€è¦å†™é‚£ä¹ˆå¤š JavaScript ä»£ç äº†ã€‚ 1. TypeScriptè¿™ä¸ªå¬èµ·æ¥å¯èƒ½æœ‰ç‚¹éª‡äººå¬é—»ï¼Œä½†äº‹å®ç¡®å®å¦‚æ­¤ã€‚TypeScript çš„å¢é•¿é€Ÿåº¦éå¸¸å¿«ã€‚æ¯å¤©æˆ‘éƒ½ä¼šå¬åˆ°è¶Šæ¥è¶Šå¤šçš„äººè¯´ä»–ä»¬ç¦»ä¸å¼€ TypeScriptã€‚å°½ç®¡ TypeScript å¾ˆæ˜æ˜¾éå¸¸ç±»ä¼¼äº JavaScriptï¼Œä½†ä»æŠ€æœ¯ä¸Šå±‚é¢æ¥è®²ï¼Œå®ƒå’Œ JavaScript è¿¥ç„¶ä¸åŒã€‚ 2. AIæœåŠ¡è¯´å®è¯ï¼Œæˆ‘ä¸€ç›´å¯¹ AI æœåŠ¡èƒ½å¦ä¸ºæˆ‘ä»¬æä¾›å»ºè®®å’Œç¼–å†™ä»£ç æŒæ€€ç–‘æ€åº¦ã€‚ä½†æ˜¯æˆ‘å¯¹è¯¸å¦‚Github Copilot å’Œ ChatGPTè¿™æ ·çš„å·¥å…·æ„Ÿåˆ°éå¸¸æƒŠè®¶ã€‚ä»–ä»¬æ‰€èƒ½åšçš„çœŸçš„éš¾ä»¥ä»¤äººç½®ä¿¡ã€‚å°½ç®¡æˆ‘è®¤ä¸ºä»–ä»¬ä¸ä¼šå–ä»£æˆ‘ä»¬çš„å·¥ä½œï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºä»–ä»¬ä¼šä¸ºæˆ‘ä»¬ç¼–å†™è¶Šæ¥è¶Šå¤šçš„ä»£ç ï¼Œä»¥è‡³äºæˆ‘ä»¬éœ€è¦è‡ªå·±å»å†™çš„ä»£ç è¶Šæ¥è¶Šå°‘äº†ã€‚ 3. åç«¯å³æœåŠ¡å¹³å° â€œæˆ‘æ¯”è¾ƒå€¾å‘äºé¡¹ç›®çš„æ„å»ºé€Ÿåº¦ï¼Œå¦‚æœå¯ä»¥ä½¿ç”¨ç±»ä¼¼è¿™æ ·çš„å¹³å°ä¸ºæˆ‘å¤„ç†åç«¯ï¼Œæˆ‘å®Œå…¨èµæˆï¼â€ åç«¯å³æœåŠ¡å¹³å°çš„å¢é•¿æ„å‘³ç€æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ä»£ç ä¼šå‡å°‘ï¼ŒåƒSupabase, Appwriteç­‰å¹³å°å¯ä»¥å¤„ç†æ•°æ®åº“äº¤äº’ï¼Œèº«ä»½è®¤è¯ï¼Œå®æ—¶æ›´æ–°ç­‰ç­‰ï¼Œä½¿æˆ‘ä»¬æ²¡æœ‰å¿…è¦äº²è‡ªå»å†™è¿™äº›ä»£ç ã€‚æœ‰äº›äººå¯èƒ½æ›´å–œæ¬¢è‡ªå·±å»ç¼–å†™æ‰€æœ‰ä»£ç ï¼Œä½†æˆ‘ä¸æ˜¯è¿™æ ·ã€‚æˆ‘æ›´å–œæ¬¢å¿«é€Ÿæ„å»ºé¡¹ç›®ï¼Œå¦‚æœæœ‰åƒè¿™æ ·çš„ä¸€ä¸ªå¹³å°å¯ä»¥ä¸ºæˆ‘å¤„ç†åç«¯ï¼Œæˆ‘å®Œå…¨èµæˆï¼ 4. æˆ‘ä»¬ä½¿ç”¨ JavaScript è¯­è¨€æ¥ç¼–å†™å·¥å…·æ›´å°‘äº† â€œä¹Ÿè®¸ç°åœ¨æ˜¯æ—¶å€™å»å­¦å…¶ä»–è¯­è¨€äº†â€¦â€¦â€ ä½¿ç”¨JavaScriptç¼–å†™JavaScriptå¼€å‘å·¥å…·çš„ç°è±¡å°†ä¼šè¶Šæ¥è¶Šå°‘äº†ï¼Œå¬èµ·æ¥æœ‰ç‚¹å¥‡æ€ªï¼Œå¯¹å§ï¼Ÿä»¥ä¸‹æ˜¯ä¸€äº›ç”¨ä¸åŒè¯­è¨€ç¼–å†™çš„JavaScriptå·¥å…·ç¤ºä¾‹ã€‚ esbuild - Go Turbopack - Rust Bun - Zig è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…æ­£åœ¨ä½¿ç”¨å…¶ä»–çš„è¯­è¨€ç¼–å†™ JavaScript å·¥å…·ï¼Œå› ä¸ºä»–ä»¬çš„æ€§èƒ½ä¼šæ›´å¥½ã€‚é¢„è®¡è¿™ç§è¶‹åŠ¿ä¼šæŒç»­ä¸‹å»ï¼ 5. ä½¿ç”¨æ›´å¤šçš„ JavaScript è¿è¡Œç¯å¢ƒï¼ˆä¸ä»…ä»…æ˜¯ Node.jsï¼‰é•¿æœŸä»¥æ¥ï¼ŒNode.js ä¸€ç›´æ˜¯â€œå¦‚ä½•åœ¨æœåŠ¡ä¸Šä½¿ç”¨ JavaScript ï¼Ÿâ€çš„é»˜è®¤ç­”æ¡ˆï¼Œä½†æ˜¯ç°åœ¨è¦è¢«æ”¹å˜äº†ã€‚æˆ‘è®¤ä¸ºå¼€å‘è€…ç¤¾åŒºå·²ç»æ„è¯†åˆ° Node çš„å±€é™æ€§ï¼Œå¹¶æ›´å€¾å‘äºä½¿ç”¨å…¶ä»–æ›¿ä»£æ–¹æ¡ˆã€‚ç°åœ¨æœ‰å‡ ç§å…¶ä»–çš„ JavaScript è¿è¡Œç¯å¢ƒå¯ä¾›é€‰æ‹©ã€‚ Deno Bun Workers (from Cloudflare) éšç€â€œè¾¹ç¼˜è®¡ç®—â€ï¼ˆæ— è®ºè¿™æ„å‘³è¿™ä»€ä¹ˆï¼‰çš„ä¸æ–­å‘å±•ï¼Œä¸åŒçš„è¿è¡Œç¯å¢ƒå°†è¢«ä½¿ç”¨çš„èŒƒå›´ä¹Ÿä¼šè¶Šæ¥è¶Šå¤§ã€‚ 6. å‡å°‘å‘æµè§ˆå™¨å‘é€ JavaScript â€œå¯¹äºæœ€å¤§ç¨‹åº¦åˆ©ç”¨æœåŠ¡å™¨æ€§èƒ½ï¼Œåœ¨æˆ‘æœ€å–œæ¬¢çš„ä¸€äº›æ¡†æ¶å¦‚Next.js å’Œ SvelteKitæœ€è¿‘æ›´æ–°ä¸­éƒ½ä½“ç°çš„éå¸¸æ˜æ˜¾ï¼›â€ éšç€ Web åº”ç”¨ç¨‹åºæ€§èƒ½å˜å¾—è¶Šæ¥è¶Šé‡è¦ï¼Œè¿™å·²ç»æˆä¸ºä¸€ç§è¶‹åŠ¿ã€‚ä½ ä¸å¾—ä¸æ‰¿è®¤ï¼Œç½‘ç«™çš„æ€§èƒ½å¯ä»¥ç›´æ¥å½±å“ä½ çš„è¥æ”¶åº•çº¿ã€‚æé«˜åº”ç”¨ç¨‹åºçš„ä¸€ç§æ–¹æ³•å°±æ˜¯å‡å°‘å‘æµè§ˆå™¨ä¼ è¾“ JavaScriptï¼Œè€Œå„ç§æ¡†æ¶éƒ½åœ¨é‡‡å–è¿™ç§æ–¹å¼ã€‚ å°±ä¸ªäººè€Œè¨€ï¼Œæˆ‘è®¤ä¸º Remix å¯¹æ¨åŠ¨æ¡†æ¶æ›´å¤šåœ°å…³æ³¨æœåŠ¡å™¨è€Œéæµè§ˆå™¨å‘æŒ¥çš„å·¨å¤§ä½œç”¨ã€‚ä»ä¸€å¼€å§‹ï¼ŒRemix å°±å…·æœ‰åœ¨æœåŠ¡å™¨ä¸ŠåŠ è½½æ•°æ®çš„é’©å­ï¼Œå› æ­¤æ— éœ€åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œè¯¥æ“ä½œã€‚è¿™ç§æœ€å¤§ç¨‹åº¦åˆ©ç”¨æœåŠ¡å™¨æ€§èƒ½ï¼Œåœ¨æˆ‘æœ€å–œæ¬¢çš„ä¸€äº›æ¡†æ¶ å¦‚Next.js å’Œ SvelteKit æœ€è¿‘æ›´æ–°ä¸­ä½“ç°ä¹Ÿå¾ˆæ˜æ˜¾ï¼› æ­¤å¤–ï¼Œæˆ‘æœ€å–œæ¬¢çš„æ–°æ¡†æ¶ä¹‹ä¸€ Astro é»˜è®¤æƒ…å†µä¸‹ä¸å‘æµè§ˆå™¨å‘é€ä»»ä½• JavaScriptã€‚å®ƒçš„ä¸»è¦ç›®æ ‡æ˜¯æé«˜æ€§èƒ½ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰äº†è§£è¿‡å®ƒï¼Œæˆ‘å¼ºçƒˆæ¨èä½ å»äº†è§£ä¸€ä¸‹ã€‚ 7. å‡ºç°æ›´å¤š JavaScript å…ƒæ¡†æ¶æåˆ°å…ƒæ¡†æ¶ï¼ˆæ— è®ºç°åœ¨æˆ‘ä»¬å¦‚ä½•ç§°å‘¼å®ƒä»¬ï¼‰æˆ‘ä»¬é€šå¸¸ä¼šæƒ³åˆ°è¯¸å¦‚ Next.jsã€SvelteKit ç­‰è¿™æ ·çš„æ¡†æ¶ï¼Œä¸è¿‡æˆ‘è®¤ä¸ºæˆ‘ä»¬å°†ä¼šçœ‹åˆ°æ›´å¤šæ¡†æ¶å‡ºç°ã€‚è¯´å®è¯ï¼Œè™½ç„¶ç›®å‰å·²ç»æœ‰å¤ªå¤šæ¡†æ¶è®©äººçœ¼èŠ±ç¼­ä¹±ï¼Œä½†å°±æˆ‘è€Œè¨€ä¸åå¯¹ç»§ç»­åˆ›å»ºæ›´å¤šçš„æ¡†æ¶ æ— è®ºæ˜¯æ–°çš„è¿˜æ˜¯ç°æœ‰çš„æ¡†æ¶ï¼Œæˆ‘è®¤ä¸ºå¼€å‘è€…å°†ä¼šç»§ç»­é€‰æ‹©å…ƒæ¡†æ¶ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥ä¸ºæˆ‘ä»¬èŠ‚çœå¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›ã€‚å‡¡äº‹å‡è¦æƒè¡¡ï¼Œä½†æ˜¯å…ƒæ¡†æ¶æ­£åœ¨ä¸ºæˆ‘ä»¬å¤„ç†è¶Šæ¥è¶Šå¤šçš„æ ·æ¿ä»£ç ï¼Œæˆ‘è®¤ä¸º JavaScript å¼€å‘è€…å¾ˆå–œæ¬¢è¿™ä¸€ç‚¹ï¼","categories":[{"name":"å¤–æ–‡ç¿»è¯‘","slug":"å¤–æ–‡ç¿»è¯‘","permalink":"http://example.com/categories/%E5%A4%96%E6%96%87%E7%BF%BB%E8%AF%91/"}],"tags":[{"name":"js","slug":"js","permalink":"http://example.com/tags/js/"},{"name":"å¤–æ–‡ç¿»è¯‘","slug":"å¤–æ–‡ç¿»è¯‘","permalink":"http://example.com/tags/%E5%A4%96%E6%96%87%E7%BF%BB%E8%AF%91/"}]},{"title":"vueç»„ä»¶é€šä¿¡åŠvuexåŸç†è§£æ","slug":"vuex","date":"2020-03-20T15:47:09.000Z","updated":"2020-03-20T15:47:09.000Z","comments":true,"path":"2020/03/20/vuex/","permalink":"http://example.com/2020/03/20/vuex/","excerpt":"","text":"ç»„ä»¶ä¼ å€¼ç»„ä»¶æ˜¯ vue.jså¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œè€Œç»„ä»¶å®ä¾‹çš„ä½œç”¨åŸŸæ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œè¿™å°±æ„å‘³ç€ä¸åŒç»„ä»¶ä¹‹é—´çš„æ•°æ®æ— æ³•ç›¸äº’å¼•ç”¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç»„ä»¶å¯ä»¥æœ‰ä»¥ä¸‹å‡ ç§å…³ç³»ï¼š çˆ¶ä¼ å­ props 12345// çˆ¶ç»„ä»¶ï¼š&lt;HelloWorld msg=&quot;Welcome to Your Vue.js + TypeScript App&quot;/&gt; // å­ç»„ä»¶props: &#123; msg: String &#125; $attrs å­ç»„ä»¶æœªåœ¨propsä¸­å£°æ˜çš„å±æ€§ inheritAttrs: false 1234567&lt;!-- çˆ¶ç»„ä»¶ --&gt;&lt;HelloWorld msg=&quot;Welcome to Your Vue.js + TypeScript App&quot; foo=&quot;foo&quot;/&gt; &lt;!-- å­ç»„ä»¶ --&gt;&lt;p&gt;&#123;&#123;$attrs.foo&#125;&#125;&lt;/p&gt; &lt;input v-bind=&quot;$attrs&quot;/&gt; // placeholder type ... $refs: å¦‚æœåœ¨æ™®é€šçš„ DOM å…ƒç´ ä¸Šä½¿ç”¨ï¼Œå¼•ç”¨æŒ‡å‘çš„å°±æ˜¯ DOM å…ƒç´ ï¼›å¦‚æœç”¨åœ¨å­ç»„ä»¶ä¸Šï¼Œå¼•ç”¨å°±æŒ‡å‘ç»„ä»¶å®ä¾‹ 12345678910111213141516171819202122// å­ç»„ä»¶export default &#123; data () &#123; return &#123; title: &#x27;I am hw componet&#x27; &#125; &#125;, methods: &#123; say () &#123; alert(&#x27;Hello&#x27;); &#125; &#125;&#125;// çˆ¶ç»„ä»¶&lt;HelloWorld :msg=&quot;msg&quot; foo=&quot;foo&quot; @changeMsg=&quot;changeMsg&quot; ref=&quot;hw&quot; /&gt; mounted () &#123; const hw = this.$refs.hw; console.log(hw.title); // I am hw componet comA.sayHello(); // å¼¹çª— Hello&#125; $parent &#x2F; $childrenï¼šè®¿é—®çˆ¶ &#x2F; å­å®ä¾‹ $childrenå­å…ƒç´ ä¸ä¿è¯é¡ºåº å­ä¼ çˆ¶ $emitã€$on 123456789// å­ç»„ä»¶this.$emit(&#x27;changeMsg&#x27;)// çˆ¶ç»„ä»¶&lt;HelloWorld :msg=&quot;msg&quot; foo=&quot;foo&quot; @changeMsg=&quot;changeMsg&quot;/&gt;changeMsg() &#123; this.msg = &#x27;hello world!&#x27;&#125; å…„å¼Ÿä¼ å€¼ï¼š é€šè¿‡å…±åŒçš„ç¥–è¾ˆç»„ä»¶æ­æ¡¥ï¼Œ$parentæˆ–$root 1234// brother1this.$parent.$on(&#x27;foo&#x27;, handle)// brother2this.$parent.$emit(&#x27;foo&#x27;) ç¥–ä»£ä¼ å€¼ provide: Object | () &#x3D;&gt; Object inject: Array | { [key: string]: string | Symbol | Object } provide å’Œ inject ä¸»è¦åœ¨å¼€å‘é«˜é˜¶æ’ä»¶&#x2F;ç»„ä»¶åº“æ—¶ä½¿ç”¨ã€‚å¹¶ä¸æ¨èç”¨äºæ™®é€šåº”ç”¨ç¨‹åºä»£ç ä¸­ã€‚åŸç†è§£æ ã€æ³¨æ„ã€‘ï¼šprovide å’Œ inject ç»‘å®šå¹¶ä¸æ˜¯å¯å“åº”çš„ã€‚è¿™æ˜¯åˆ»æ„ä¸ºä¹‹çš„ã€‚ç„¶è€Œï¼Œå¦‚æœä½ ä¼ å…¥äº†ä¸€ä¸ªå¯ç›‘å¬çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå…¶å¯¹è±¡çš„å±æ€§è¿˜æ˜¯å¯å“åº”çš„ 12345678910111213provide () &#123; return &#123; bar: &#x27;provide value&#x27; &#125;&#125; // inject: [&#x27;bar&#x27;]inject: &#123; bar: &#123; type: string, default: &#x27;&#x27; &#125;&#125; å®ç°provideä¸injectå“åº”åŒ– ä¸æ¨è rovideç¥–å…ˆç»„ä»¶çš„å®ä¾‹ï¼Œç„¶ååœ¨å­å­™ç»„ä»¶ä¸­æ³¨å…¥ä¾èµ–ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨å­å­™ç»„ä»¶ä¸­ç›´æ¥ä¿®æ”¹ç¥–å…ˆç»„ä»¶çš„å®ä¾‹çš„å±æ€§ï¼Œä¸è¿‡è¿™ç§æ–¹æ³•æœ‰ä¸ªç¼ºç‚¹å°±æ˜¯è¿™ä¸ªå®ä¾‹ä¸ŠæŒ‚è½½å¾ˆå¤šæ²¡æœ‰å¿…è¦çš„ä¸œè¥¿æ¯”å¦‚propsï¼Œmethods æ¨è 2.6.0 æ–°å¢API Vue.observable ä¼˜åŒ–å“åº”å¼ 12345678910111213141516171819202122232425262728293031323334// çˆ¶ç»„ä»¶export default class App extends Vue &#123; msg: string = &quot;Welcome to Your Vue.js + TypeScript App&quot;; // è°ƒç”¨Vue.observableå£°æ˜å“åº”æ•°æ®appTheme appTheme: Theme = Vue.observable(&#123; color: &quot;red&quot; &#125;); @Provide() bar: string = &quot;root message&quot;; // æ™®é€šå­—ç¬¦ @Provide() theme: object = this.appTheme; // å“åº”æ•°æ® @Provide() app: object = this; // å½“å‰ç»„ä»¶å®ä¾‹ changeMsg() &#123; this.msg = &quot;hello world!&quot;; &#125;&#125;// å­ç»„ä»¶export default class HelloWorld extends Vue &#123; @Inject(&#123; default: &quot;&quot; &#125;) bar!: string; @Inject(&#123; default: () =&gt; (&#123;&#125;) &#125;) theme!: object; @Inject() app!: any mounted() &#123; console.log(this.theme, this.app); this.app.msg = &#x27;hw&#x27; // ç›´æ¥åœ¨å­ç»„ä»¶ä¸­ä¿®æ”¹çˆ¶ç»„ä»¶çš„å±æ€§ (çˆ¶ç»„ä»¶ä¸èƒ½å“åº”å˜åŒ–) this.app.changeMsg(); // è°ƒç”¨çˆ¶ç»„ä»¶çš„æ–¹æ³•(å­ç»„ä»¶ä¸èƒ½å“åº”å˜åŒ–) &#125;&#125; EventBus äº‹ä»¶æ€»çº¿ 123456789101112131415161718192021222324252627282930313233// åˆå§‹åŒ–event-bus.jsimport Vue from &#x27;vue&#x27;export const EventBus = new Vue()// comAç»„ä»¶: æ´¾å‘addäº‹ä»¶import &#123; EventBus &#125; from &quot;./eventBus/event-bus&quot;;export default &#123; data () &#123; return &#123; count: 0 &#125; &#125;, methods: &#123; eveAdd() &#123; EventBus.$emit(&#x27;add&#x27;, ++this.count) &#125; &#125;&#125;// comBç»„ä»¶ï¼šç›‘å¬addäº‹ä»¶ï¼Œå±•ç¤ºaddä¹‹åçš„ç»“æœimport &#123; EventBus &#125; from &quot;./eventBus/event-bus&quot;;export default &#123; data () &#123; return &#123; num: 0 &#125; &#125;, mounted() &#123; EventBus.$on(&quot;add&quot;, count =&gt; &#123; this.num = count; &#125;); &#125;&#125; Vuexæ ¸å¿ƒæ¦‚å¿µ state ç®¡ç†vuexçš„æ•°æ®ï¼ˆå®˜æ–¹ç§°ä¹‹ä¸ºå•ä¸€çŠ¶æ€æ ‘ï¼‰ getter state ä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€ mutation æ›´æ”¹ Vuex çš„ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯æäº¤ mutation å¿…é¡»æ˜¯åŒæ­¥å‡½æ•° action Action æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ Action å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œ module æ¨¡å—åŒ–ï¼ˆå½“åº”ç”¨å˜å¾—ç‰¹åˆ«å¤æ‚æ—¶ï¼Œæ‰€æœ‰çŠ¶æ€éƒ½ä¼šé›†ä¸­åˆ°ä¸€ä¸ªè¾ƒå¤§çš„å¯¹è±¡ä¸­ï¼Œå°±ä¼šå˜å¾—éå¸¸è‡ƒè‚¿ï¼ŒæŒ‰ç…§æ¨¡å—ç²¾å¿ƒåˆ†å‰²ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æ‹¥æœ‰è‡ªå·±çš„stateã€mutationã€actionã€getterï¼‰ 12345678910111213141516171819202122const moduleA = &#123; state: &#123; ... &#125;, mutations: &#123; ... &#125;, actions: &#123; ... &#125;, getters: &#123; ... &#125;&#125;const moduleB = &#123; state: &#123; ... &#125;, mutations: &#123; ... &#125;, actions: &#123; ... &#125;&#125;const store = new Vuex.Store(&#123; modules: &#123; a: moduleA, b: moduleB &#125;&#125;)store.state.a // -&gt; moduleA çš„çŠ¶æ€store.state.b // -&gt; moduleB çš„çŠ¶æ€ é—®é¢˜ï¼šmutationä¸­æ‰§è¡Œå¼‚æ­¥æ“ä½œä¼šæ€ä¹ˆæ ·ï¼Ÿ äº‹å®ä¸Šåœ¨ vuex é‡Œé¢ actions åªæ˜¯ä¸€ä¸ªæ¶æ„æ€§çš„æ¦‚å¿µï¼Œå¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œè¯´åˆ°åº•åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½ åœ¨é‡Œé¢æƒ³å¹²å˜›éƒ½å¯ä»¥ï¼Œåªè¦æœ€åè§¦å‘ mutation å°±è¡Œ â€” å°¤é›¨æºªçŸ¥ä¹å›ç­” Vuex æºç è§£æ Vue.use(Vuex) åšäº†ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆaxiosä¸ç”¨Vue.use()æ–¹æ³•ï¼Ÿ new Vue({store}) store åœ¨è¿™é‡Œåšäº†ä»€ä¹ˆï¼Ÿ ä¸ºä»€ä¹ˆï¼Ÿ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657 // vuex.js å®ç°commit dispatch getteræ–¹æ³• var Vue// å®ç°installæ–¹æ³•function install(_Vue) &#123; Vue = _Vue Vue.mixin(&#123; beforeCreate() &#123; if (this.$options.store) &#123; // vueçš„åŸå‹ä¸ŠæŒ‚è½½storeï¼ˆStoreçš„å®ä¾‹ï¼‰ Vue.prototype.$store = this.$options.store &#125; &#125; &#125;)&#125;// å®ç°Storeç±»class Store &#123; constructor(options) &#123; this.state = new Vue(&#123; // å®ç°stateå“åº”åŒ– data: options.state &#125;) this.mutations = options.mutations || &#123;&#125; this.actions = options.actions || &#123;&#125; options.getters &amp;&amp; this.handleGetters(options.getters) &#125; commit = (type, arg) =&gt; &#123; this.mutations[type](this.state, arg) &#125; // dispatchæ–¹æ³•æ¥å—ä¸€ä¸ªä¸Šä¸‹æ–‡æ‰§è¡Œç¯å¢ƒï¼Œæ³¨æ„ä¸commitåŒºåˆ† dispatch(type, arg) &#123; this.actions[type](&#123; state: this.state, commit: this.commit, getters: this.getters &#125;, arg) &#125; handleGetters(getters) &#123; this.getters = &#123;&#125; Object.keys(getters).forEach(key =&gt; &#123; // åˆ©ç”¨defineProtpertyå°†gettersçš„æ‰§è¡Œç»“æœæ˜ å°„æˆå¯¹è±¡ Object.defineProperty(this.getters, key, &#123; get: () =&gt; &#123; return getters[key](this.state) &#125; &#125;) &#125;) &#125; &#125; export default &#123; Store, install &#125;","categories":[{"name":"vuex","slug":"vuex","permalink":"http://example.com/categories/vuex/"}],"tags":[{"name":"vuex","slug":"vuex","permalink":"http://example.com/tags/vuex/"}]},{"title":"js æ•°ç»„æ–¹æ³•æ€»ç»“ ä¹‹ ä¸€é“é¢è¯•é¢˜å¼•å‘çš„æ€è€ƒ","slug":"arr-methods","date":"2019-11-07T02:09:31.000Z","updated":"2019-11-07T02:09:31.000Z","comments":true,"path":"2019/11/07/arr-methods/","permalink":"http://example.com/2019/11/07/arr-methods/","excerpt":"","text":"åœ¨å‰ç«¯é¢è¯•å½“ä¸­é«˜é¢‘å‡ºç°çš„ä¸€é“é¢è¯•é¢˜ï¼Œè®©æˆ‘äº§ç”Ÿäº†æŠŠjsæ•°ç»„çš„æ–¹æ³•æ€»ç»“ä¸€ä¸‹çš„å¿µå¤´ï¼Œå‘ï¼Œå°±æ˜¯ä¸‹é¢è¿™é“é¢˜ç›®ï¼çœ‹äº†è§£æå…ˆåˆ«æ’¤å“¦ï¼Œåé¢ç•™äº†å‡ é“æå‡é¢˜ç›®ï¼Œä½ å€¼å¾—æ‹¥æœ‰ï¼ˆçš®è¿™ä¸€ä¸‹å¾ˆå¼€å¿ƒ~~ï¼‰ 1234567891011121314151617181920212223242526272829303132[1, 2, 3].map(parseInt);// è§£æï¼š[1, 2, 3].map((item, index, arr) =&gt; parseInt(item, index));parseInt(1, 0); // 1parseInt(2, 1); // NaNparseInt(3, 2); // NaN// æ•…ï¼šç»“æœä¸º [1, NaN, NaN]// è€ƒç‚¹åˆ†æï¼šmap(function(currentValue, index, arr)&#123;&#125;)æ–¹æ³•å›è°ƒå‡½æ•°çš„å‚æ•°// currentValue å½“å‰å…ƒç´ çš„å€¼// index å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼// arr åŸæ•°ç»„parseInt(string, radix) å‡½æ•°çš„å‚æ•°// radixè¯¥å€¼ä»‹äº 2 ~ 36 ä¹‹é—´,å¦‚æœçœç•¥è¯¥å‚æ•°æˆ–å…¶å€¼ä¸º 0ï¼Œåˆ™æ•°å­—å°†ä»¥ 10 ä¸ºåŸºç¡€æ¥è§£æ// å¦‚æœå®ƒä»¥ â€œ0xâ€ æˆ– â€œ0Xâ€ å¼€å¤´ï¼Œå°†ä»¥ 16 ä¸ºåŸºæ•°// å¦‚æœè¯¥å‚æ•°å°äº 2 æˆ–è€…å¤§äº 36ï¼Œåˆ™ parseInt() å°†è¿”å› NaN ç”±æ­¤çœ‹å‡ºï¼Œä¸»è¦æ˜¯è€ƒå¯Ÿå¯¹æ•°ç»„æ–¹æ³•çš„ç†Ÿæ‚‰ç¨‹åº¦ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·å›é¡¾ä¸‹æ•°ç»„çš„æ–¹æ³•ã€‚ç‰¹åˆ«éœ€è¦æ˜¯å¦æ”¹å˜åŸæ•°ç»„è¿™ä¸€ç‚¹ï¼Œä¼šå¯¹æˆ‘ä»¬çš„å˜æˆå¸¦æ¥æ„æƒ³ä¸åˆ°çš„å‰¯ä½œç”¨ã€‚ è½¬åŒ–æ–¹æ³• æ–¹æ³•å åŠŸèƒ½æè¿° æ˜¯å¦æ”¹å˜åŸæ•°ç»„ è¿”å›ç»“æœ ç¤ºä¾‹ä»£ç åŠè¾“å‡º .toString() å°†æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸² å¦ å­—ç¬¦ä¸² [1, 2, 3].toString() â†’ &quot;1,2,3&quot; .valueOf() è¿”å›æ•°ç»„å¯¹è±¡çš„åŸå§‹å€¼ï¼ˆä»ä¸ºæ•°ç»„æœ¬èº«ï¼‰ å¦ æ•°ç»„ [1, 2, &#39;3&#39;].valueOf() â†’ [1, 2, &quot;3&quot;] .join(separator) ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦è¿æ¥æ•°ç»„å…ƒç´ æˆä¸ºå­—ç¬¦ä¸² å¦ å­—ç¬¦ä¸² [1, 2, 3].join(&#39;-&#39;) â†’ &quot;1-2-3&quot; æ ˆæ–¹æ³•ï¼ˆLIFOï¼‰ æ–¹æ³•å åŠŸèƒ½æè¿° æ˜¯å¦æ”¹å˜åŸæ•°ç»„ è¿”å›ç»“æœ ç¤ºä¾‹ä»£ç åŠè¾“å‡º .push(element1[, ...elements]) åœ¨æ•°ç»„æœ«å°¾æ·»åŠ å…ƒç´  æ˜¯ æ–°æ•°ç»„é•¿åº¦ [1, 2].push(3) â†’ 3, æ•°ç»„ï¼š[1, 2, 3] .pop() ç§»é™¤å¹¶è¿”å›æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´  æ˜¯ ç§»é™¤çš„å…ƒç´  [1, 2].pop() â†’ 2, æ•°ç»„ï¼š[1] é˜Ÿåˆ—æ–¹æ³• æ–¹æ³•å åŠŸèƒ½æè¿° æ˜¯å¦æ”¹å˜åŸæ•°ç»„ è¿”å›ç»“æœ ç¤ºä¾‹ä»£ç åŠè¾“å‡º .unshift(element1[, ...elements]) åœ¨æ•°ç»„å¼€å¤´æ·»åŠ å…ƒç´  æ˜¯ æ–°æ•°ç»„é•¿åº¦ [1, 2].unshift(0) â†’ 3, æ•°ç»„ï¼š[0, 1, 2] .shift() ç§»é™¤å¹¶è¿”å›æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´  æ˜¯ ç§»é™¤çš„å…ƒç´  [1, 2].shift() â†’ 1, æ•°ç»„ï¼š[2] é‡æ’æ–¹æ³• æ–¹æ³•å åŠŸèƒ½æè¿° æ˜¯å¦æ”¹å˜åŸæ•°ç»„ è¿”å›ç»“æœ ç¤ºä¾‹ä»£ç åŠè¾“å‡º .sort([compareFunction]) å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¯é€‰è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•° æ˜¯ æ’åºåçš„æ•°ç»„ [1, 3, 11, 2].sort((a, b) =&gt; a - b) â†’ [1, 2, 3, 11] .reverse() é¢ å€’æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåº æ˜¯ é¢ å€’åçš„æ•°ç»„ [1, 2, 3].reverse() â†’ [3, 2, 1] æ“ä½œæ–¹æ³• æ–¹æ³•å åŠŸèƒ½æè¿° æ˜¯å¦æ”¹å˜åŸæ•°ç»„ è¿”å›ç»“æœ ç¤ºä¾‹ä»£ç åŠè¾“å‡º .concat(array2[, ...arrays]) è¿æ¥ä¸¤ä¸ªæˆ–æ›´å¤šæ•°ç»„ï¼Œå¹¶è¿”å›æ–°æ•°ç»„ å¦ æ–°æ•°ç»„ [1, 2].concat([3, 4]) â†’ [1, 2, 3, 4] .splice(start[, deleteCount[, ...items]]) åœ¨æ•°ç»„ä¸­æ·»åŠ &#x2F;åˆ é™¤é¡¹ç›®ï¼Œå¹¶è¿”å›è¢«åˆ é™¤çš„å…ƒç´ æ•°ç»„ æ˜¯ è¢«åˆ é™¤çš„å…ƒç´ æ•°ç»„ [1, 2].splice(0, 1) â†’ [1][1, 2].splice(0, 0, 3) â†’ [], æ•°ç»„ï¼š[1, 2, 3] .slice(start[, end]) æå–åŸæ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ å¦ æ–°æ•°ç»„ [1, 2, 3, 4].slice(1, 3) â†’ [2, 3] ä½ç½®æ–¹æ³• æ–¹æ³•å åŠŸèƒ½æè¿° æ˜¯å¦æ”¹å˜åŸæ•°ç»„ è¿”å›ç»“æœ ç¤ºä¾‹ä»£ç åŠè¾“å‡º .indexOf(searchElement[, fromIndex]) æŸ¥æ‰¾æ•°ç»„ä¸­æŒ‡å®šå…ƒç´ é¦–æ¬¡å‡ºç°çš„ä½ç½®ï¼Œæœªæ‰¾åˆ°è¿”å›-1 å¦ ç´¢å¼•æˆ–-1 [1, 2, 3].indexOf(3) â†’ 2 .lastIndexOf(searchElement[, fromIndex]) ä»æ•°ç»„æœ«å°¾å‘å‰æŸ¥æ‰¾æŒ‡å®šå…ƒç´ æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œæœªæ‰¾åˆ°è¿”å›-1 å¦ ç´¢å¼•æˆ–-1 [1, 2, 3].lastIndexOf(3) â†’ 2 è¿­ä»£æ–¹æ³• æ–¹æ³•å åŠŸèƒ½æè¿° æ˜¯å¦æ”¹å˜åŸæ•°ç»„ è¿”å›ç»“æœ ç¤ºä¾‹ä»£ç åŠè¾“å‡º .every(callback[, thisArg]) åˆ¤æ–­æ•°ç»„çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½æ»¡è¶³æµ‹è¯•å‡½æ•°ï¼Œéƒ½æ»¡è¶³åˆ™è¿”å›true å¦ boolean [1, 2, 3].every(item =&gt; item &gt; 0) â†’ true .some(callback[, thisArg]) åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨è‡³å°‘ä¸€ä¸ªå…ƒç´ æ»¡è¶³æµ‹è¯•å‡½æ•°ï¼Œå­˜åœ¨åˆ™è¿”å›true å¦ boolean [1, 2, 3].some(item =&gt; item &gt; 2) â†’ true .filter(callback[, thisArg]) æ ¹æ®æµ‹è¯•å‡½æ•°è¿‡æ»¤æ•°ç»„å…ƒç´ ï¼Œå¹¶è¿”å›ç¬¦åˆæ¡ä»¶çš„æ–°æ•°ç»„ å¦ æ–°æ•°ç»„ [1, 2, 3].filter(item =&gt; item &gt; 2) â†’ [3] .forEach(callback[, thisArg]) å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œç»™å®šå‡½æ•°ï¼Œæ— è¿”å›å€¼ å¦ æ— è¿”å›å€¼ N&#x2F;A .map(callback[, thisArg]) éå†æ•°ç»„ï¼Œå¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œç»™å®šå‡½æ•°ï¼Œå¹¶è¿”å›å¤„ç†åçš„æ–°æ•°ç»„ å¦ æ–°æ•°ç»„ [1, 2, 3].map(item =&gt; item * 2) â†’ [2, 4, 6] å½’å¹¶æ–¹æ³• æ–¹æ³•å åŠŸèƒ½æè¿° æ˜¯å¦æ”¹å˜åŸæ•°ç»„ è¿”å›ç»“æœ ç¤ºä¾‹ä»£ç åŠè¾“å‡º .reduce(callback[, initialValue]) ä»å·¦åˆ°å³éå†æ•°ç»„ï¼Œç´¯ç§¯è®¡ç®—ç»“æœï¼Œè¿”å›å•ä¸€æœ€ç»ˆå€¼ å¦ ç´¯è®¡ç»“æœ [1, 2, 3].reduce((prev, cur) =&gt; prev + cur) â†’ 6 .reduceRight(callback[, initialValue]) ä»å³åˆ°å·¦éå†æ•°ç»„ï¼Œç´¯ç§¯è®¡ç®—ç»“æœï¼Œè¿”å›å•ä¸€æœ€ç»ˆå€¼ å¦ ç´¯è®¡ç»“æœ [1, 2, 3].reduceRight((prev, cur) =&gt; prev + cur) â†’ 6 æµ‹è¯•é¢˜12345678910111213[1, 2, 3].map(parseInt); // [1, NaN, NaN]==&gt; [1, 2, 3].map((item, index, arr) =&gt; parseInt(item, index));[1, 2, 3].filter(parseInt); // [1][1, 2, 3].every(parseInt); // false[1, 2, 3].some(parseInt); // true[1, 2, 3].reduce(parseInt); // 1==&gt; [1, 2, 3].reduce((prev, cur) =&gt; parseInt(prev, cur))","categories":[{"name":"js","slug":"js","permalink":"http://example.com/categories/js/"}],"tags":[{"name":"js","slug":"js","permalink":"http://example.com/tags/js/"},{"name":"æ•°ç»„æ–¹æ³•","slug":"æ•°ç»„æ–¹æ³•","permalink":"http://example.com/tags/%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/"}]},{"title":"è™šæ‹ŸDOMå’ŒåŸç”Ÿè°æ›´å¿«","slug":"virtual-dom","date":"2019-03-26T01:52:30.000Z","updated":"2019-03-26T01:52:30.000Z","comments":true,"path":"2019/03/26/virtual-dom/","permalink":"http://example.com/2019/03/26/virtual-dom/","excerpt":"","text":"è®ºé¢˜ï¼š è™šæ‹ŸDOMå’ŒåŸç”Ÿè°æ›´å¿«åŸæ–‡é“¾æ¥è™šæ‹ŸDOMå’ŒåŸç”Ÿè°æ›´å¿«ï¼Ÿ DOMå’ŒDOM-diff å°¤å¤§åœ¨çŸ¥ä¹çš„å›å¤ åŸç”Ÿ DOM æ“ä½œ vs. é€šè¿‡æ¡†æ¶å°è£…æ“ä½œã€‚ è¿™æ˜¯ä¸€ä¸ªæ€§èƒ½ vs. å¯ç»´æŠ¤æ€§çš„å–èˆã€‚æ¡†æ¶çš„æ„ä¹‰åœ¨äºä¸ºä½ æ©ç›–åº•å±‚çš„ DOM æ“ä½œï¼Œè®©ä½ ç”¨æ›´å£°æ˜å¼çš„æ–¹å¼æ¥æè¿°ä½ çš„ç›®çš„ï¼Œä»è€Œè®©ä½ çš„ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€‚æ²¡æœ‰ä»»ä½•æ¡†æ¶å¯ä»¥æ¯”çº¯æ‰‹åŠ¨çš„ä¼˜åŒ– DOM æ“ä½œæ›´å¿«ï¼Œå› ä¸ºæ¡†æ¶çš„ DOM æ“ä½œå±‚éœ€è¦åº”å¯¹ä»»ä½•ä¸Šå±‚ API å¯èƒ½äº§ç”Ÿçš„æ“ä½œï¼Œå®ƒçš„å®ç°å¿…é¡»æ˜¯æ™®é€‚çš„ã€‚é’ˆå¯¹ä»»ä½•ä¸€ä¸ª benchmarkï¼Œæˆ‘éƒ½å¯ä»¥å†™å‡ºæ¯”ä»»ä½•æ¡†æ¶æ›´å¿«çš„æ‰‹åŠ¨ä¼˜åŒ–ï¼Œä½†æ˜¯é‚£æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿåœ¨æ„å»ºä¸€ä¸ªå®é™…åº”ç”¨çš„æ—¶å€™ï¼Œä½ éš¾é“ä¸ºæ¯ä¸€ä¸ªåœ°æ–¹éƒ½å»åšæ‰‹åŠ¨ä¼˜åŒ–å—ï¼Ÿå‡ºäºå¯ç»´æŠ¤æ€§çš„è€ƒè™‘ï¼Œè¿™æ˜¾ç„¶ä¸å¯èƒ½ã€‚æ¡†æ¶ç»™ä½ çš„ä¿è¯æ˜¯ï¼Œä½ åœ¨ä¸éœ€è¦æ‰‹åŠ¨ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä¾ç„¶å¯ä»¥ç»™ä½ æä¾›è¿‡å¾—å»çš„æ€§èƒ½ã€‚ å¯¹ React çš„ Virtual DOM çš„è¯¯è§£ã€‚ React ä»æ¥æ²¡æœ‰è¯´è¿‡ â€œReact æ¯”åŸç”Ÿæ“ä½œ DOM å¿«â€ã€‚React çš„åŸºæœ¬æ€ç»´æ¨¡å¼æ˜¯æ¯æ¬¡æœ‰å˜åŠ¨å°±æ•´ä¸ªé‡æ–°æ¸²æŸ“æ•´ä¸ªåº”ç”¨ã€‚å¦‚æœæ²¡æœ‰ Virtual DOMï¼Œç®€å•æ¥æƒ³å°±æ˜¯ç›´æ¥é‡ç½® innerHTMLã€‚å¾ˆå¤šäººéƒ½æ²¡æœ‰æ„è¯†åˆ°ï¼Œåœ¨ä¸€ä¸ªå¤§å‹åˆ—è¡¨æ‰€æœ‰æ•°æ®éƒ½å˜äº†çš„æƒ…å†µä¸‹ï¼Œé‡ç½® innerHTML å…¶å®æ˜¯ä¸€ä¸ªè¿˜ç®—åˆç†çš„æ“ä½œâ€¦ çœŸæ­£çš„é—®é¢˜æ˜¯åœ¨ â€œå…¨éƒ¨é‡æ–°æ¸²æŸ“â€ çš„æ€ç»´æ¨¡å¼ä¸‹ï¼Œå³ä½¿åªæœ‰ä¸€è¡Œæ•°æ®å˜äº†ï¼Œå®ƒä¹Ÿéœ€è¦é‡ç½®æ•´ä¸ª innerHTMLï¼Œè¿™æ—¶å€™æ˜¾ç„¶å°±æœ‰å¤§é‡çš„æµªè´¹ã€‚æˆ‘ä»¬å¯ä»¥æ¯”è¾ƒä¸€ä¸‹ innerHTML vs. Virtual DOM çš„é‡ç»˜æ€§èƒ½æ¶ˆè€—ï¼šinnerHTML: render html string O(template size) + é‡æ–°åˆ›å»ºæ‰€æœ‰ DOM å…ƒç´  O(DOM size)Virtual DOM: render Virtual DOM + diff O(template size) + å¿…è¦çš„ DOM æ›´æ–° O(DOM change)Virtual DOM render + diff æ˜¾ç„¶æ¯”æ¸²æŸ“ html å­—ç¬¦ä¸²è¦æ…¢ï¼Œä½†æ˜¯ï¼å®ƒä¾ç„¶æ˜¯çº¯ js å±‚é¢çš„è®¡ç®—ï¼Œæ¯”èµ·åé¢çš„ DOM æ“ä½œæ¥è¯´ï¼Œä¾ç„¶ä¾¿å®œäº†å¤ªå¤šã€‚å¯ä»¥çœ‹åˆ°ï¼ŒinnerHTML çš„æ€»è®¡ç®—é‡ä¸ç®¡æ˜¯ js è®¡ç®—è¿˜æ˜¯ DOM æ“ä½œéƒ½æ˜¯å’Œæ•´ä¸ªç•Œé¢çš„å¤§å°ç›¸å…³ï¼Œä½† Virtual DOM çš„è®¡ç®—é‡é‡Œé¢ï¼Œåªæœ‰ js è®¡ç®—å’Œç•Œé¢å¤§å°ç›¸å…³ï¼ŒDOM æ“ä½œæ˜¯å’Œæ•°æ®çš„å˜åŠ¨é‡ç›¸å…³çš„ã€‚å‰é¢è¯´äº†ï¼Œå’Œ DOM æ“ä½œæ¯”èµ·æ¥ï¼Œjs è®¡ç®—æ˜¯æå…¶ä¾¿å®œçš„ã€‚è¿™æ‰æ˜¯ä¸ºä»€ä¹ˆè¦æœ‰ Virtual DOMï¼šå®ƒä¿è¯äº† 1ï¼‰ä¸ç®¡ä½ çš„æ•°æ®å˜åŒ–å¤šå°‘ï¼Œæ¯æ¬¡é‡ç»˜çš„æ€§èƒ½éƒ½å¯ä»¥æ¥å—ï¼›2) ä½ ä¾ç„¶å¯ä»¥ç”¨ç±»ä¼¼ innerHTML çš„æ€è·¯å»å†™ä½ çš„åº”ç”¨ã€‚ MVVM vs. Virtual DOM ç›¸æ¯”èµ· Reactï¼Œå…¶ä»– MVVM ç³»æ¡†æ¶æ¯”å¦‚ Angular, Knockout ä»¥åŠ Vueã€Avalon é‡‡ç”¨çš„éƒ½æ˜¯æ•°æ®ç»‘å®šï¼šé€šè¿‡ Directive&#x2F;Binding å¯¹è±¡ï¼Œè§‚å¯Ÿæ•°æ®å˜åŒ–å¹¶ä¿ç•™å¯¹å®é™… DOM å…ƒç´ çš„å¼•ç”¨ï¼Œå½“æœ‰æ•°æ®å˜åŒ–æ—¶è¿›è¡Œå¯¹åº”çš„æ“ä½œã€‚MVVM çš„å˜åŒ–æ£€æŸ¥æ˜¯æ•°æ®å±‚é¢çš„ï¼Œè€Œ React çš„æ£€æŸ¥æ˜¯ DOM ç»“æ„å±‚é¢çš„ã€‚MVVM çš„æ€§èƒ½ä¹Ÿæ ¹æ®å˜åŠ¨æ£€æµ‹çš„å®ç°åŸç†æœ‰æ‰€ä¸åŒï¼šAngular çš„è„æ£€æŸ¥ä½¿å¾—ä»»ä½•å˜åŠ¨éƒ½æœ‰å›ºå®šçš„ O(watcher count) çš„ä»£ä»·ï¼›Knockout&#x2F;Vue&#x2F;Avalon éƒ½é‡‡ç”¨äº†ä¾èµ–æ”¶é›†ï¼Œåœ¨ js å’Œ DOM å±‚é¢éƒ½æ˜¯ O(change)ï¼šè„æ£€æŸ¥ï¼šscope digest O(watcher count) + å¿…è¦ DOM æ›´æ–° O(DOM change)ä¾èµ–æ”¶é›†ï¼šé‡æ–°æ”¶é›†ä¾èµ– O(data change) + å¿…è¦ DOM æ›´æ–° O(DOM change)å¯ä»¥çœ‹åˆ°ï¼ŒAngular æœ€ä¸æ•ˆç‡çš„åœ°æ–¹åœ¨äºä»»ä½•å°å˜åŠ¨éƒ½æœ‰çš„å’Œ watcher æ•°é‡ç›¸å…³çš„æ€§èƒ½ä»£ä»·ã€‚ä½†æ˜¯ï¼å½“æ‰€æœ‰æ•°æ®éƒ½å˜äº†çš„æ—¶å€™ï¼ŒAngular å…¶å®å¹¶ä¸åƒäºã€‚ä¾èµ–æ”¶é›†åœ¨åˆå§‹åŒ–å’Œæ•°æ®å˜åŒ–çš„æ—¶å€™éƒ½éœ€è¦é‡æ–°æ”¶é›†ä¾èµ–ï¼Œè¿™ä¸ªä»£ä»·åœ¨å°é‡æ›´æ–°çš„æ—¶å€™å‡ ä¹å¯ä»¥å¿½ç•¥ï¼Œä½†åœ¨æ•°æ®é‡åºå¤§çš„æ—¶å€™ä¹Ÿä¼šäº§ç”Ÿä¸€å®šçš„æ¶ˆè€—ã€‚MVVM æ¸²æŸ“åˆ—è¡¨çš„æ—¶å€™ï¼Œç”±äºæ¯ä¸€è¡Œéƒ½æœ‰è‡ªå·±çš„æ•°æ®ä½œç”¨åŸŸï¼Œæ‰€ä»¥é€šå¸¸éƒ½æ˜¯æ¯ä¸€è¡Œæœ‰ä¸€ä¸ªå¯¹åº”çš„ ViewModel å®ä¾‹ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç¨å¾®è½»é‡ä¸€äº›çš„åˆ©ç”¨åŸå‹ç»§æ‰¿çš„ â€œscopeâ€ å¯¹è±¡ï¼Œä½†ä¹Ÿæœ‰ä¸€å®šçš„ä»£ä»·ã€‚æ‰€ä»¥ï¼ŒMVVM åˆ—è¡¨æ¸²æŸ“çš„åˆå§‹åŒ–å‡ ä¹ä¸€å®šæ¯” React æ…¢ï¼Œå› ä¸ºåˆ›å»º ViewModel &#x2F; scope å®ä¾‹æ¯”èµ· Virtual DOM æ¥è¯´è¦æ˜‚è´µå¾ˆå¤šã€‚è¿™é‡Œæ‰€æœ‰ MVVM å®ç°çš„ä¸€ä¸ªå…±åŒé—®é¢˜å°±æ˜¯åœ¨åˆ—è¡¨æ¸²æŸ“çš„æ•°æ®æºå˜åŠ¨æ—¶ï¼Œå°¤å…¶æ˜¯å½“æ•°æ®æ˜¯å…¨æ–°çš„å¯¹è±¡æ—¶ï¼Œå¦‚ä½•æœ‰æ•ˆåœ°å¤ç”¨å·²ç»åˆ›å»ºçš„ ViewModel å®ä¾‹å’Œ DOM å…ƒç´ ã€‚å‡å¦‚æ²¡æœ‰ä»»ä½•å¤ç”¨æ–¹é¢çš„ä¼˜åŒ–ï¼Œç”±äºæ•°æ®æ˜¯ â€œå…¨æ–°â€ çš„ï¼ŒMVVM å®é™…ä¸Šéœ€è¦é”€æ¯ä¹‹å‰çš„æ‰€æœ‰å®ä¾‹ï¼Œé‡æ–°åˆ›å»ºæ‰€æœ‰å®ä¾‹ï¼Œæœ€åå†è¿›è¡Œä¸€æ¬¡æ¸²æŸ“ï¼è¿™å°±æ˜¯ä¸ºä»€ä¹ˆé¢˜ç›®é‡Œé“¾æ¥çš„ angular&#x2F;knockout å®ç°éƒ½ç›¸å¯¹æ¯”è¾ƒæ…¢ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒReact çš„å˜åŠ¨æ£€æŸ¥ç”±äºæ˜¯ DOM ç»“æ„å±‚é¢çš„ï¼Œå³ä½¿æ˜¯å…¨æ–°çš„æ•°æ®ï¼Œåªè¦æœ€åæ¸²æŸ“ç»“æœæ²¡å˜ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦åšæ— ç”¨åŠŸã€‚Angular å’Œ Vue éƒ½æä¾›äº†åˆ—è¡¨é‡ç»˜çš„ä¼˜åŒ–æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯ â€œæç¤ºâ€ æ¡†æ¶å¦‚ä½•æœ‰æ•ˆåœ°å¤ç”¨å®ä¾‹å’Œ DOM å…ƒç´ ã€‚æ¯”å¦‚æ•°æ®åº“é‡Œçš„åŒä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨ä¸¤æ¬¡å‰ç«¯ API è°ƒç”¨é‡Œé¢ä¼šæˆä¸ºä¸åŒçš„å¯¹è±¡ï¼Œä½†æ˜¯å®ƒä»¬ä¾ç„¶æœ‰ä¸€æ ·çš„ uidã€‚è¿™æ—¶å€™ä½ å°±å¯ä»¥æç¤º track by uid æ¥è®© Angular çŸ¥é“ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡å…¶å®æ˜¯åŒä¸€ä»½æ•°æ®ã€‚é‚£ä¹ˆåŸæ¥è¿™ä»½æ•°æ®å¯¹åº”çš„å®ä¾‹å’Œ DOM å…ƒç´ éƒ½å¯ä»¥å¤ç”¨ï¼Œåªéœ€è¦æ›´æ–°å˜åŠ¨äº†çš„éƒ¨åˆ†ã€‚æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ track by $index æ¥è¿›è¡Œ â€œåŸåœ°å¤ç”¨â€ï¼šç›´æ¥æ ¹æ®åœ¨æ•°ç»„é‡Œçš„ä½ç½®è¿›è¡Œå¤ç”¨ã€‚åœ¨é¢˜ç›®ç»™å‡ºçš„ä¾‹å­é‡Œï¼Œå¦‚æœ angular å®ç°åŠ ä¸Š track by $index çš„è¯ï¼Œåç»­é‡ç»˜æ˜¯ä¸ä¼šæ¯” React æ…¢å¤šå°‘çš„ã€‚ç”šè‡³åœ¨ dbmonster æµ‹è¯•ä¸­ï¼ŒAngular å’Œ Vue ç”¨äº† track by $index ä»¥åéƒ½æ¯” React å¿«: dbmon (æ³¨æ„ Angular é»˜è®¤ç‰ˆæœ¬æ— ä¼˜åŒ–ï¼Œä¼˜åŒ–è¿‡çš„åœ¨ä¸‹é¢ï¼‰é¡ºé“è¯´ä¸€å¥ï¼ŒReact æ¸²æŸ“åˆ—è¡¨çš„æ—¶å€™ä¹Ÿéœ€è¦æä¾› key è¿™ä¸ªç‰¹æ®Š propï¼Œæœ¬è´¨ä¸Šå’Œ track-by æ˜¯ä¸€å›äº‹ã€‚ æ€§èƒ½æ¯”è¾ƒä¹Ÿè¦çœ‹åœºåˆ åœ¨æ¯”è¾ƒæ€§èƒ½çš„æ—¶å€™ï¼Œè¦åˆ†æ¸…æ¥šåˆå§‹æ¸²æŸ“ã€å°é‡æ•°æ®æ›´æ–°ã€å¤§é‡æ•°æ®æ›´æ–°è¿™äº›ä¸åŒçš„åœºåˆã€‚Virtual DOMã€è„æ£€æŸ¥ MVVMã€æ•°æ®æ”¶é›† MVVM åœ¨ä¸åŒåœºåˆå„æœ‰ä¸åŒçš„è¡¨ç°å’Œä¸åŒçš„ä¼˜åŒ–éœ€æ±‚ã€‚Virtual DOM ä¸ºäº†æå‡å°é‡æ•°æ®æ›´æ–°æ—¶çš„æ€§èƒ½ï¼Œä¹Ÿéœ€è¦é’ˆå¯¹æ€§çš„ä¼˜åŒ–ï¼Œæ¯”å¦‚ shouldComponentUpdate æˆ–æ˜¯ immutable dataã€‚åˆå§‹æ¸²æŸ“ï¼šVirtual DOM &gt; è„æ£€æŸ¥ &gt;&#x3D; ä¾èµ–æ”¶é›†å°é‡æ•°æ®æ›´æ–°ï¼šä¾èµ–æ”¶é›† &gt;&gt; Virtual DOM + ä¼˜åŒ– &gt; è„æ£€æŸ¥ï¼ˆæ— æ³•ä¼˜åŒ–ï¼‰ &gt; Virtual DOM æ— ä¼˜åŒ–å¤§é‡æ•°æ®æ›´æ–°ï¼šè„æ£€æŸ¥ + ä¼˜åŒ– &gt;&#x3D; ä¾èµ–æ”¶é›† + ä¼˜åŒ– &gt; Virtual DOMï¼ˆæ— æ³•&#x2F;æ— éœ€ä¼˜åŒ–ï¼‰&gt;&gt; MVVM æ— ä¼˜åŒ–ä¸è¦å¤©çœŸåœ°ä»¥ä¸º Virtual DOM å°±æ˜¯å¿«ï¼Œdiff ä¸æ˜¯å…è´¹çš„ï¼Œbatching ä¹ˆ MVVM ä¹Ÿèƒ½åšï¼Œè€Œä¸”æœ€ç»ˆ patch çš„æ—¶å€™è¿˜ä¸æ˜¯è¦ç”¨åŸç”Ÿ APIã€‚åœ¨æˆ‘çœ‹æ¥ Virtual DOM çœŸæ­£çš„ä»·å€¼ä»æ¥éƒ½ä¸æ˜¯æ€§èƒ½ï¼Œè€Œæ˜¯å®ƒ 1) ä¸ºå‡½æ•°å¼çš„ UI ç¼–ç¨‹æ–¹å¼æ‰“å¼€äº†å¤§é—¨ï¼›2) å¯ä»¥æ¸²æŸ“åˆ° DOM ä»¥å¤–çš„ backendï¼Œæ¯”å¦‚ ReactNativeã€‚ æ€»ç»“ ä»¥ä¸Šè¿™äº›æ¯”è¾ƒï¼Œæ›´å¤šçš„æ˜¯å¯¹äºæ¡†æ¶å¼€å‘ç ”ç©¶è€…æä¾›ä¸€äº›å‚è€ƒã€‚ä¸»æµçš„æ¡†æ¶ + åˆç†çš„ä¼˜åŒ–ï¼Œè¶³ä»¥åº”å¯¹ç»å¤§éƒ¨åˆ†åº”ç”¨çš„æ€§èƒ½éœ€æ±‚ã€‚å¦‚æœæ˜¯å¯¹æ€§èƒ½æœ‰æè‡´éœ€æ±‚çš„ç‰¹æ®Šæƒ…å†µï¼Œå…¶å®åº”è¯¥ç‰ºç‰²ä¸€äº›å¯ç»´æŠ¤æ€§é‡‡å–æ‰‹åŠ¨ä¼˜åŒ–ï¼šæ¯”å¦‚ Atom ç¼–è¾‘å™¨åœ¨æ–‡ä»¶æ¸²æŸ“çš„å®ç°ä¸Šæ”¾å¼ƒäº† React è€Œé‡‡ç”¨äº†è‡ªå·±å®ç°çš„ tile-based renderingï¼›åˆæ¯”å¦‚åœ¨ç§»åŠ¨ç«¯éœ€è¦ DOM-pooling çš„è™šæ‹Ÿæ»šåŠ¨ï¼Œä¸éœ€è¦è€ƒè™‘é¡ºåºå˜åŒ–ï¼Œå¯ä»¥ç»•è¿‡æ¡†æ¶çš„å†…ç½®å®ç°è‡ªå·±æä¸€ä¸ªã€‚","categories":[{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"http://example.com/categories/%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"virtual-dom","slug":"virtual-dom","permalink":"http://example.com/tags/virtual-dom/"}]},{"title":"é—­åŒ…","slug":"closure","date":"2018-07-13T06:31:27.000Z","updated":"2018-07-13T06:31:27.000Z","comments":true,"path":"2018/07/13/closure/","permalink":"http://example.com/2018/07/13/closure/","excerpt":"","text":"ä½œç”¨åŸŸjs ä¸­å˜é‡åˆ†ä¸ºå…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡ 123456789var a = 1; // å…¨å±€å˜é‡function A()&#123; b = 2; // å…¨å±€å˜é‡ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹æŠ¥é”™ï¼‰ var c = 3; // å±€éƒ¨å˜é‡&#125;;A();console.log(a); // 1console.log(b); // 2console.log(c); // Errorï¼šc is not defined é¢„è§£æjs ä¼šæŠŠå¸¦æœ‰ var å’Œ function å…³é”®å­—çš„äº‹å…ˆå£°æ˜ï¼Œå¹¶åœ¨å­˜æ”¾åœ¨æ ˆåŒºä¸­ 123456console.log(a); // undefinedvar a = 1;console.log(b); // undefinedvar b = function b()&#123;&#125;; // æœ¬è´¨è¿˜æ˜¯é€šè¿‡varå£°æ˜console.log(c); // Æ’ c()&#123;&#125;function c()&#123;&#125;; ç–‘é—®ï¼Ÿ 12345function out()&#123; var a = 1;&#125;;out();console.log(a); // Error: a is not definedï¼Œ ä¸ºä»€ä¹ˆè¿™é‡ŒæŠ¥é”™äº†ï¼Œæ²¡æœ‰é¢„è§£æ è§£ææ‰§è¡Œç¯å¢ƒåœ¨ js æ‰§è¡Œä¹‹å‰æ˜¯ä¼šé¢„è§£æ function å’Œ var æ²¡é”™ï¼Œä½†æ˜¯åœ¨æœ¬ä¾‹ä¸­ å®ƒä»¬çš„â€œè§£ææ‰§è¡Œç¯å¢ƒâ€ä¸åŒ. function out æ˜¯åœ¨ä¸€ä¸ªå…¨å±€çš„ç¯å¢ƒä¸­ï¼Œè€Œ a æ˜¯ function out ä¸­å®šä¹‰çš„ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œa çš„â€œè§£ææ‰§è¡Œç¯å¢ƒâ€æ˜¯åœ¨ function out è¿™ä¸ªå‡½æ•°é‡Œé¢(è¿™é‡Œå¯ä»¥ç†è§£ä¸º function out é‡Œçš„å±€éƒ¨ç¯å¢ƒ)ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬åœ¨å…¨å±€è¿™ä¸ªç¯å¢ƒä¸­ console.log(a) çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰å®šä¹‰ a è¿™ä¸ªå˜é‡æˆ–è€…å‡½æ•°ï¼Œæ‰€ä»¥å°±æŠ¥é”™äº† 123456function out()&#123; console.log(a); // undefined var a = 1;&#125;;out();console.log(a); // Error: a is not defined åƒåœ¾å›æ”¶æœºåˆ¶-GCåŸç†ï¼šåƒåœ¾æ”¶é›†å™¨ä¼šå®šæœŸï¼ˆå‘¨æœŸæ€§ï¼‰æ‰¾å‡ºé‚£äº›ä¸åœ¨ç»§ç»­ä½¿ç”¨çš„å˜é‡ï¼Œç„¶åé‡Šæ”¾å…¶å†…å­˜ã€‚ä¸å†ä½¿ç”¨çš„å˜é‡ï¼šä¹Ÿå°±æ˜¯ç”Ÿå‘½å‘¨æœŸç»“æŸçš„å˜é‡ï¼Œå½“ç„¶åªå¯èƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Œå…¨å±€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸç›´è‡³æµè§ˆå™¨å¸è½½é¡µé¢æ‰ä¼šç»“æŸã€‚ é—­åŒ…ä½œç”¨ï¼šå±€éƒ¨å˜é‡å¸¸é©»å†…å­˜ï¼Œè¯»å–å‡½æ•°å†…éƒ¨çš„å˜é‡æ„æˆï¼šå‡½æ•°åµŒå¥—ï¼Œå†…éƒ¨å‡½æ•°è°ƒç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ç¼ºç‚¹ï¼šé€ æˆå†…å­˜æ³„æ¼ 12345678function parent() &#123; var a = 1; function son() &#123; return a++; &#125; return son();&#125;console.log(parent()); // 1 å†…å­˜æ³„æ¼ æ„å¤–çš„å…¨å±€å˜é‡å¼•èµ·çš„å†…å­˜æ³„æ¼ã€‚ åŸå› ï¼šå…¨å±€å˜é‡ï¼Œä¸ä¼šè¢«å›æ”¶ã€‚ è§£å†³ï¼šä½¿ç”¨ä¸¥æ ¼æ¨¡å¼é¿å…ã€‚ é—­åŒ…å¼•èµ·çš„å†…å­˜æ³„æ¼ åŸå› ï¼šé—­åŒ…å¯ä»¥ç»´æŒå‡½æ•°å†…å±€éƒ¨å˜é‡ï¼Œä½¿å…¶å¾—ä¸åˆ°é‡Šæ”¾ã€‚ è§£å†³ï¼šåœ¨é€€å‡ºå‡½æ•°ä¹‹å‰ï¼Œå°†ä¸ä½¿ç”¨çš„å±€éƒ¨å˜é‡å…¨éƒ¨åˆ é™¤ï¼Œå¦‚åœ¨ä¸ç”¨parentå‡½æ•°çš„æ—¶å€™ï¼Œparent &#x3D; null æ²¡æœ‰æ¸…ç†çš„ DOM å…ƒç´ å¼•ç”¨ åŸå› ï¼šè™½ç„¶åˆ«çš„åœ°æ–¹åˆ é™¤äº†ï¼Œä½†æ˜¯å¯¹è±¡ä¸­è¿˜å­˜åœ¨å¯¹ dom çš„å¼•ç”¨ è§£å†³ï¼šæ‰‹åŠ¨åˆ é™¤ã€‚ è¢«é—å¿˜çš„å®šæ—¶å™¨æˆ–è€…å›è°ƒ åŸå› ï¼šå®šæ—¶å™¨ä¸­æœ‰ dom çš„å¼•ç”¨ï¼Œå³ä½¿ dom åˆ é™¤äº†ï¼Œä½†æ˜¯å®šæ—¶å™¨è¿˜åœ¨ï¼Œæ‰€ä»¥å†…å­˜ä¸­è¿˜æ˜¯æœ‰è¿™ä¸ª domã€‚ è§£å†³ï¼šæ‰‹åŠ¨åˆ é™¤å®šæ—¶å™¨å’Œ domã€‚","categories":[{"name":"js","slug":"js","permalink":"http://example.com/categories/js/"}],"tags":[{"name":"js","slug":"js","permalink":"http://example.com/tags/js/"},{"name":"é—­åŒ…","slug":"é—­åŒ…","permalink":"http://example.com/tags/%E9%97%AD%E5%8C%85/"}]},{"title":"åŸå‹ã€åŸå‹é“¾","slug":"prototype","date":"2018-07-12T07:10:06.000Z","updated":"2018-07-12T07:10:06.000Z","comments":true,"path":"2018/07/12/prototype/","permalink":"http://example.com/2018/07/12/prototype/","excerpt":"","text":"å‡½æ•°å£°æ˜123var f1 = function()&#123;&#125;; // 1. å­—é¢é‡function f2 = function()&#123;&#125;; // 2. å…³é”®è¯ var f3 = new Function(); // 3. æ„é€ å‡½æ•° å½’æ ¹ç»“åº•éƒ½æ˜¯é€šè¿‡new Function çš„æ–¹å¼æ¥åˆ›å»ºçš„ï¼Œjsä¸­ä¸€åˆ‡çš†å¯¹è±¡ï¼Œå¯¹è±¡åˆåˆ†å‡½æ•°å¯¹è±¡å’Œæ™®é€šå¯¹è±¡ï¼Œç®€å•æ¥è¯´é€šè¿‡new Functionåˆ›å»ºçš„å°±ç§°ä¹‹ä¸ºå‡½æ•°å¯¹è±¡ï¼Œå…¶ä»–çš„éƒ½æ˜¯æ™®é€šå¯¹è±¡ åŸå‹å¯¹è±¡åœ¨jsä¸­æ¯ä¸€ä¸ªå¯¹è±¡ï¼ˆæ™®é€šå¯¹è±¡ã€å‡½æ•°å¯¹è±¡ï¼‰éƒ½æœ‰ä¸€ä¸ª__proto__ å±æ€§ï¼Œå‡½æ•°å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼ŒæŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡ 123456789101112131415161718192021var obj = &#123;&#125;;var fn = function()&#123;&#125;;console.log(obj.__proto__); // &#123;constructor: Æ’, __defineGetter__: Æ’, __defineSetter__: Æ’, hasOwnProperty: Æ’, â€¦&#125;console.log(obj.prototype); // undefined console.log(fn.__proto__); // Æ’ () &#123; [native code] &#125;console.log(fn.prototype); // &#123;constructor: Æ’&#125;// å…¶ä¸­ prototype å°±æ˜¯åŸå‹å¯¹è±¡ï¼Œå½“ç„¶åŸå‹å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œå®ƒçš„ä½œç”¨ä¸»è¦æ˜¯ç”¨æ¥å®ç°ç»§æ‰¿çš„ï¼Œä¸¾ä¸ªæ —å­ï¼š var Animal = function()&#123; this.name = &#x27;Tom&#x27;;&#125;Animal.prototype.say = function()&#123; console.log(&#x27;I am &#x27; + this.name)&#125;var cat = new Animal();var dog = new Animal();cat.say(); // I am Tomdog.say(); // I am Tom è¿™é‡ŒåŸå‹ç»§æ‰¿çš„é—®é¢˜ï¼Œæš‚ä¸”æŒ‰ä¸‹ä¸è¡¨ï¼ˆçš®è¿™ä¸€ä¸‹ï¼Œå¾ˆå¼€å¿ƒ~~ï¼‰ åŸå‹é“¾ä¸Šæ–‡è¯´åˆ°ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª__proto__ å±æ€§ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§ç©¶ç«Ÿæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå…ˆæ¥çœ‹å‡ ä¸ªä¾‹å­ 123456789var Animal = function()&#123; this.name = &#x27;Tom&#x27;;&#125;var cat = new Animal();console.log(cat.__proto__ === Animal.prototype); // trueconsole.log(Animal.prototype.__proto__ === Object.prototype); // trueconsole.log(Object.prototype.__proto__ === null); // true ä»è¿™ä¸ªä¾‹å­ä¸­å¯ä»¥çœ‹å‡º __proto__ å±æ€§æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡prototypeï¼Œè€Œprototypeä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œä¹Ÿæœ‰__proto__å±æ€§ï¼Œç»§ç»­æŒ‡å‘å…¶æ„é€ å‡½æ•°ï¼Œç›´åˆ°æŒ‡å‘nullï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªåŸå‹æŒ‡å‘çš„é“¾æ¡ï¼Œä¸“ä¸šæœ¯è¯­ç§°ä¹‹ä¸ºåŸå‹é“¾ã€‚è‡³äºä¸ºä»€ä¹ˆæœ€ç»ˆæ˜¯nullï¼Œå¦‚æœéè¦è§£é‡Šçš„è¯ï¼Œå¼•ç”¨é“å¾·ç»ä¸­çš„ä¸€å¥è¯ï¼šæœ‰ï¼Œæ˜¯ä¸‡ç‰©ä¹‹æ‰€å§‹ï¼›æ— ï¼Œæ˜¯ä¸‡ç‰©ä¹‹æ‰€æ¯ã€‚æ­¤å¤–ï¼ŒFunctionã€Objectä½œä¸ºjsçš„å†…ç½®å‡½æ•°å¯¹è±¡ï¼Œéœ€è¦æ¸…æ¥šä¸€ç‚¹ï¼Œä»–ä»¬éƒ½æ˜¯ new Functionåˆ›å»ºçš„ console.log(Function.constructor === Object.constructor); // true new çš„å®ç°è¿‡ç¨‹é€šè¿‡new ä¸€ä¸ªæ„é€ å‡½æ•°å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œçœ‹ä¸€ä¸‹å†…éƒ¨å®ç°è¿‡ç¨‹ï¼Œæœ‰åŠ©äºå¸®åŠ©ç†è§£åŸå‹é“¾æŒ‡å‘ 1. å£°æ˜ä¸€ä¸ªå¯¹è±¡ var obj = &#123;&#125;; 2. obj.\\_\\_proto__ = æ„é€ å‡½æ•°.prototype; 3. æ”¹å˜thisæŒ‡é’ˆï¼Œé€šè¿‡callã€applyè®©thisæŒ‡å‘ç¬¬ä¸€æ­¥åˆ›å»ºçš„objï¼› 4. è¿”å›å¯¹è±¡obj; 12345678910111213141516171819202122function Animal(name)&#123; this.name = name;&#125;Animal.prototype.say = function()&#123; console.log(&#x27;I am &#x27; + this.name)&#125;function myNew() &#123; var obj = &#123;&#125;; // æ˜¯æŒ‡è¿˜æ˜¯newï¼Œä¸è¦çº ç»“ï¼Œåªæ˜¯æ¨¡æ‹Ÿnewçš„è¿‡ç¨‹ var Constructor = [].shift.call(arguments); // æ„é€ å‡½æ•° Animal //constructorå±æ€§æ˜¯åœ¨Animal.prototypeå¯¹è±¡ä¸­ç”¨æ¥è®°å½•å®ƒæŒ‡å‘çš„ æ„é€ å‡½æ•° çš„å±æ€§ console.log(Constructor.prototype); // &#123;say: Æ’, constructor: Æ’&#125; say:Æ’() constructor:Æ’ Animal(name) obj.__proto__ = Constructor.prototype; // è®©obj.__proto__ æŒ‡å‘ Animal.prototype Constructor.apply(obj,arguments); // è®©thisæŒ‡å‘obj return obj;&#125;var cat= myNew(Animal,&#x27;Tom&#x27;);console.log(cat.name); // Tomcat.say(); // I am Tomconsole.log(cat.constructor); // Æ’ Animal(name)&#123; this.name = name; &#125; å¤§æ‹›å¦‚æœä»¥ä¸Šå†…å®¹è¿˜æ˜¯ä¸å¤ªæ˜ç™½ï¼Œæˆ‘è‡ªå·±åšäº†å¼ æ³¨è§£å›¾ï¼ˆçº¿æ¡æœ‰ç‚¹å¤šè€Œæ‚ï¼Œè§è°…~~ï¼‰ï¼Œä»¥åŠä»£ç æ¡ˆä¾‹å¸®åŠ©ç†è§£ 12345678910111213141516171819202122// å‡ ä¸ªæ¦‚å¿µï¼š // æ™®é€šå¯¹è±¡æ˜¯new Objectè€Œæ¥çš„ï¼Œæ‰€ä»¥ å®ƒçš„æ„é€ å‡½æ•°å°±æ˜¯Object// å‡½æ•°å¯¹è±¡æ˜¯new Functionè€Œæ¥çš„ï¼Œæ‰€ä»¥ å®ƒçš„æ„é€ å‡½æ•°å°±æ˜¯Functionï¼ŒFunctionã€Objectæ˜¯new Functionè€Œæ¥çš„// å¯¹è±¡çš„__proto__ æŒ‡å‘æ„é€ å‡½æ•°çš„prototypefunction Animal()&#123;&#125;var cat = new Animal();cat.constructor == Animal; // truecat.__proto__ === Animal.prototype; // trueAnimal.constructor === Function; // trueAnimal.prototype.__proto__ === Object.prototype; // true æ³¨ï¼šprototypeæ˜¯å¯¹è±¡Animal.__proto__ === Function.prototype; // trueObject.constructor === Function; // trueObject.__proto__ === Function.prototype; // trueObject.prototype.__proto__ === null; // trueFunction.constructor === Function; // trueFunction.__proto__ === Function.prototype; // trueFunction.prototype.__proto__ === Object.prototype; // true","categories":[{"name":"js","slug":"js","permalink":"http://example.com/categories/js/"}],"tags":[{"name":"js","slug":"js","permalink":"http://example.com/tags/js/"},{"name":"åŸå‹","slug":"åŸå‹","permalink":"http://example.com/tags/%E5%8E%9F%E5%9E%8B/"},{"name":"newçš„è¿‡ç¨‹","slug":"newçš„è¿‡ç¨‹","permalink":"http://example.com/tags/new%E7%9A%84%E8%BF%87%E7%A8%8B/"}]},{"title":"hexo command","slug":"hello-world","date":"2017-07-24T02:09:31.000Z","updated":"2017-07-24T02:09:31.000Z","comments":true,"path":"2017/07/24/hello-world/","permalink":"http://example.com/2017/07/24/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[{"name":"hexo","slug":"hexo","permalink":"http://example.com/categories/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://example.com/tags/hexo/"}]},{"title":"å¼€åšç¼˜ç”±","slug":"begin","date":"2017-04-29T09:02:38.000Z","updated":"2017-04-29T09:02:38.000Z","comments":true,"path":"2017/04/29/begin/","permalink":"http://example.com/2017/04/29/begin/","excerpt":"","text":"ç¼˜èµ·ä½›æ›°ï¼šä¸€åˆ‡çš†æœ‰ç¼˜æ³•ï¼Œç¼˜èµ·ç¼˜ç­ç¼˜è‡ªåœ¨ æƒ…æ·±æƒ…æµ…ä¸ç”±äººï¼Œæ€»è§‰å¾—å°‘è¿™ä¹ˆä¸€ä¸ªèµ·å› å†…å¿ƒæœ‰æ„§~~å¯¹äºä»»ä½•ä¸€ä¸ªæœ‰è¿½æ±‚(è£…X)çš„å‰ç«¯æ”»åŸç‹®æ¥è¯´ï¼Œæ‹¥æœ‰ä¸€ä¸ªåšå®¢æ˜¯è¿½æ±‚(è£…X)è·¯ä¸Šçš„ä¸€æŠŠåˆ©åˆƒï¼Œæ­£æ‰€è°“å¿µå¿µä¸å¿˜å¿…æœ‰å›å“ï¼Œå†ç»åƒè¾›ä¸‡è‹¦ï¼Œç®—æ˜¯ç»™è‡ªå·±æ­å»ºäº†ä¸€ä¸ªå±äºè‡ªå·±çš„å°çªã€‚å½“ç„¶ï¼Œå¦‚æœå¼€åšä¸æ˜¯ä¸ºäº†è£…Xï¼Œé‚£å°†å˜å¾—æ¯«æ— æ„ä¹‰ï¼æ­å»ºè¿™ä¸ªåšå®¢çš„ä¸»è¦åŸå› æ˜¯æƒ³æŠŠè‡ªå·±å­¦ä¹ é“è·¯ä¸Šgetåˆ°çš„æŠ€èƒ½åšä¸€ä¸ªæ¢³ç†ï¼Œå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ä¹ˆï¼å…¶æ¬¡æ˜¯æŠŠè‡ªå·±è¸©å¾—é‚£äº›å‘åˆ†äº«ç»™æ›´å¤šçš„äººï¼Œå¯èƒ½æ‚¨è¦è¯´å°±æˆ‘çš„è¿™ç‚¹ç»éªŒæ˜¯åœ¨æ²¡æœ‰å€Ÿé‰´çš„ä»·å€¼ã€‚NO NO NO ä¸”å¬æˆ‘æ…¢æ…¢é“æ¥ã€‚å¾€å¾€çœ‹ä¸€äº›å¤§ç¥çš„å¸–å­ä¼šæœ‰ä¸€ç§æ„Ÿè§‰å°±æ˜¯è§„é¿æ‰äº†ä¸€äº›ä½ å…³æ³¨çš„ç‚¹ï¼Œå½“ç„¶è¿™ä¸ªä¸æ˜¯è¯´äººå®¶è€ƒè™‘çš„ä¸åˆ°ä½ï¼Œè€Œæ˜¯ç”±äºæˆ‘ä»¬çš„æŠ€æœ¯æ ˆå­˜åœ¨å·®å¼‚ï¼Œå¯èƒ½äººå®¶åœ¨åšç¬¬ä¸€æ­¥çš„æ—¶å€™å°±å·²ç»ä¸ºåé¢åšå¥½äº†ä¸€äº›é“ºå«ï¼Œè§„é¿æ‰äº†ä¸€äº›é—®é¢˜ï¼Œè€Œå¹¶æ²¡æœ‰ä½“ç°åˆ°æ•™ç¨‹å½“ä¸­ï¼Œè¿™æ ·å¯¹äºåˆå­¦è€…æ¥å¯èƒ½å°±ä¼šé‡åˆ°ä¸€äº›è«åå¥‡å¦™çš„é—®é¢˜ã€‚å¥½å§ï¼æˆ‘æ‰¿è®¤æ˜¯è‡ªå·±å¼ºè¡Œè§£é‡Šäº†ä¸€æ³¢ï¼Œæ¥æ©ç›–æˆ‘è¦è£…çš„æœ¬è´¨ï¼ ä¸hexoç»“ç¼˜è¦æ„Ÿè°¢ä¸€ä½è®¸å§“å°ä¼™ä¼´çš„æåŠ›æ¨èï¼Œçœ‹äº†æ•´ä¸ªæ­å»ºè¿‡ç¨‹çš„æ–‡æ¡£ä¹‹åå°±æŒ‰è€ä¸ä½å†…å¿ƒçš„å†²åŠ¨ï¼Œä¹‰æ— åé¡¾çš„qrqé€äº†ä¸€è¡€ï¼ç„¶åå°±æœ‰äº†â€¦ (ä¸è¦æƒ³æ­ªå•Š ~~) ç¼˜ç­å¦‚è‹¥æ¢¦èµ·ç¼˜ç”Ÿï¼Œæ¢¦é€ç¼˜ç­ï¼Œæˆ‘æ„¿ä¸€æ¢¦ä¸èµ· æ˜¯ä¸æ˜¯å·²å¿ƒåŠ¨ä¸å·²ï¼Œèµ¶å¿«ç§»æ­¥åˆ°ä½¿ç”¨GitHub + hexoæ­å»ºä¸ªäººåšå®¢ è¡ŒåŠ¨èµ·æ¥å§ï¼","categories":[{"name":"å¿ƒæƒ…ç‰©è¯­","slug":"å¿ƒæƒ…ç‰©è¯­","permalink":"http://example.com/categories/%E5%BF%83%E6%83%85%E7%89%A9%E8%AF%AD/"}],"tags":[{"name":"å¿ƒæƒ…ç‰©è¯­","slug":"å¿ƒæƒ…ç‰©è¯­","permalink":"http://example.com/tags/%E5%BF%83%E6%83%85%E7%89%A9%E8%AF%AD/"}]},{"title":"ä½¿ç”¨GitHub + hexoæ­å»ºä¸ªäººåšå®¢","slug":"create-hexo-blog","date":"2017-04-03T20:04:06.000Z","updated":"2017-04-03T20:04:06.000Z","comments":true,"path":"2017/04/04/create-hexo-blog/","permalink":"http://example.com/2017/04/04/create-hexo-blog/","excerpt":"","text":"æœ¬æ–‡ç¯å¢ƒ git 2.18 node v10.16.0 å®‰è£…hexo1npm install -g hexo-cli githubä¸Šåˆ›å»ºä»“åº“ä»“åº“åï¼šusername.github.io ä»“åº“åå¿…é¡»ä¸ºuser + .github.ioï¼Œè¿™ä¸ªåå­—ä¹Ÿæ˜¯å°†æ¥åšå®¢çš„è®¿é—®åœ°å€ åšå®¢çš„åˆ›å»ºåˆå§‹åŒ–1hexo init xuyz-blog ä¼šç”Ÿæˆä¸€ä¸ªåä¸ºxuyz-blogçš„æ–‡ä»¶å¤¹ï¼Œå°±æ˜¯å°†æ¥åšå®¢çš„é…ç½®åŠå­˜æ”¾åšæ–‡çš„åœ°æ–¹ åŸºç¡€é…ç½®æ‰“å¼€xuyz-blog&#x2F;_config.ymlæ–‡ä»¶è¿›è¡ŒåŸºç¡€é…ç½®ï¼Œä»¥ä¸‹åªä¸¾å‡ ä¸ªå…³é”®çš„é…ç½® 123456789101112131415# Sitetitle: xuyz-blog # åšå®¢åå­—subtitle: &#x27;é²œè¡£æ€’é©¬å°‘å¹´æ—¶ï¼Œä¸€æ—¥çœ‹å°½é•¿å®‰èŠ±&#x27; # å°æ ‡é¢˜å¯ä»¥å†™è‡ªå·±å–œæ¬¢çš„è¯description: &#x27;å…‰æ™¯ä¸å¾…äººï¼Œé¡»è‡¾å‘æˆä¸&#x27; # åšå®¢æè¿°keywords: xuyangzhouauthor: xuyangzhou # ä½œè€…åå­—language: zh-CN # è¯­è¨€url: / # è‡ªå·±è´­ä¹°çš„åŸŸåç½‘å€ï¼ˆæ²¡æœ‰å¯ä¸å†™ï¼‰theme: landscape # ä¸»é¢˜çš„åå­—deploy: type: git # ä½¿ç”¨gitå‘å¸ƒ repo: https://github.com/xuyangzhou/xuyangzhou.github.io.git # åˆšåˆšåˆ›å»ºçš„ä»“åº“åœ°å€ æœ¬åœ°é¢„è§ˆ12hexo serverhexo s # ç®€å†™ æ‰“å¼€localhost:4000 å³å¯çœ‹åˆ°æˆ‘ä»¬çš„åšå®¢ç•Œé¢äº† å‘å¸ƒ1234hexo cleanhexo generate # hexo g ç®€å†™hexo deploy # hexo d ç®€å†™# hexo d -g === hexo g &amp; hexo d è¿™é‡Œå¦‚æœå‡ºé”™ï¼Œæ‰¾ä¸åˆ°repositoryï¼Œéœ€è¦å®‰è£…hexo-deployer-gitæ’ä»¶ï¼Œå†æ‰§è¡Œhexo då‘½ä»¤ 1npm install hexo-deployer-git --save æ‰“å¼€xuyangzhou.github.ioï¼ˆå°±æ˜¯ä½ åˆ›å»ºçš„ä»“åº“åï¼‰å³å¯çœ‹åˆ° è‡³æ­¤ï¼Œåšå®¢å·²ç»æ­å»ºå·¥ä½œå·²å¤§åŠŸå‘Šæˆäº†ï¼Œæˆ‘ä»¬å·²ç»æ‹¥æœ‰äº†è‡ªå·±çš„ä¸€ä¸ªå°çªäº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜è¦å‘è¡¨åšæ–‡ï¼Œä¿®æ”¹é¡µé¢æ ·å¼ï¼Œæ·»åŠ ä¸€äº›è¯¸å¦‚æœç´¢ã€è¯„è®ºã€æµè§ˆç»Ÿè®¡ç­‰ç­‰åŠŸèƒ½ï¼Œé¢„çŸ¥åäº‹å¦‚ä½•ï¼Œä¸”å¬ä¸‹æ–‡åˆ†è§£ï¼ å†™åšå®¢æ–°å»ºåšæ–‡1hexo new &#x27;æ–‡ä»¶å&#x27; # ä¼šåœ¨source/_postsåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å.mdæ–‡ä»¶ ç¼–è¾‘åšæ–‡1234567---title: new // åšå®¢æ ‡é¢˜date: 2017-04-04 04:04:06 // åˆ›å»ºæ—¶é—´tags: hexo // æ ‡ç­¾categories: hexo // åˆ†ç±»--- è¿™é‡Œå†™æ­£æ–‡ï¼ˆä¸Šé¢çš„---æ˜¯å¿…è¦çš„ï¼‰ æ’å…¥å›¾ç‰‡å¤–ç½‘å›¾ç‰‡1![å›¾ç‰‡æè¿°](http://www.baidu.com/1.jpg) æœ¬åœ°å›¾ç‰‡ä½¿ç”¨hexo-asset-imageæ’ä»¶1npm install hexo-asset-image --save ä¿®æ”¹xuyz-blog&#x2F;_config.ymlä¸­çš„post_asset_folderä¸ºtrue 1post_asset_folder: false ä¹‹åå†ä½¿ç”¨ hexo new â€˜newâ€™ åˆ›å»ºæ–°åšæ–‡çš„æ—¶å€™ï¼Œä¼šåœ¨source&#x2F;_postsé‡Œé¢åˆ›å»º.mdæ–‡ä»¶çš„åŒæ—¶ç”Ÿæˆä¸€ä¸ªç›¸åŒçš„åå­—çš„æ–‡ä»¶å¤¹ï¼ŒæŠŠè¯¥æ–‡ç« ä¸­éœ€è¦ä½¿ç”¨çš„å›¾ç‰‡æ”¾åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹å³å¯ 1![å›¾ç‰‡æè¿°](new/new.jpg) åœ¨sourceä¸‹æ–°å»ºimagesæ–‡ä»¶å¤¹ï¼ˆæ¨èï¼‰ä½¿ç”¨hexo-asset-imageä¸ªäººè®¤ä¸ºä¸åˆ©ç”¨å›¾ç‰‡å¤ç”¨ï¼Œç›´æ¥æ ¹ç›®å½•çš„sourceä¸‹æ–°å»ºå­˜æ”¾æœ¬åœ°å›¾ç‰‡çš„æ–‡ä»¶å¤¹ç®€ä¾¿æœ‰æ•ˆ 1![å›¾ç‰‡æè¿°(å¯ä»¥ä¸å†™)](/images/new.jpg) æ›´æ¢ä¸»é¢˜ä¸»é¢˜è¿™ä¸œè¥¿å˜›ï¼Œèåœé’èœï¼Œå„æœ‰æ‰€çˆ±ï¼Œæ²¡æœ‰æœ€å¥½ï¼Œåªæœ‰åˆé€‚ï¼Œå…·ä½“è¯·ç§»æ­¥hexoä¸»é¢˜é€‰å–ä¸€æ¬¾é€‚åˆè‡ªå·±çš„å§ï¼ ä»¥nextä¸ºä¾‹ï¼Œä¸‹è½½å¯¹åº”ä¸»é¢˜ï¼Œä¿®æ”¹_config.ymlä¸­çš„themeä¸ºnextå³å¯ï¼ 12cd xuyz-blogæ–‡ä»¶ä¸‹git clone https://github.com/iissnan/hexo-theme-next themes/next æ›´å¤šå…³äºnextä¸»é¢˜ä¸‹çš„é…ç½®é—®é¢˜è¯·ç§»æ­¥nextä½¿ç”¨æ–‡æ¡£","categories":[{"name":"hexo","slug":"hexo","permalink":"http://example.com/categories/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://example.com/tags/hexo/"}]}],"categories":[{"name":"js","slug":"js","permalink":"http://example.com/categories/js/"},{"name":"å¤–æ–‡ç¿»è¯‘","slug":"å¤–æ–‡ç¿»è¯‘","permalink":"http://example.com/categories/%E5%A4%96%E6%96%87%E7%BF%BB%E8%AF%91/"},{"name":"vuex","slug":"vuex","permalink":"http://example.com/categories/vuex/"},{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"http://example.com/categories/%E7%AC%94%E8%AE%B0/"},{"name":"hexo","slug":"hexo","permalink":"http://example.com/categories/hexo/"},{"name":"å¿ƒæƒ…ç‰©è¯­","slug":"å¿ƒæƒ…ç‰©è¯­","permalink":"http://example.com/categories/%E5%BF%83%E6%83%85%E7%89%A9%E8%AF%AD/"}],"tags":[{"name":"js","slug":"js","permalink":"http://example.com/tags/js/"},{"name":"åŠ¨ç”»","slug":"åŠ¨ç”»","permalink":"http://example.com/tags/%E5%8A%A8%E7%94%BB/"},{"name":"typescript","slug":"typescript","permalink":"http://example.com/tags/typescript/"},{"name":"reduce","slug":"reduce","permalink":"http://example.com/tags/reduce/"},{"name":"ES6","slug":"ES6","permalink":"http://example.com/tags/ES6/"},{"name":"set","slug":"set","permalink":"http://example.com/tags/set/"},{"name":"map","slug":"map","permalink":"http://example.com/tags/map/"},{"name":"vuex","slug":"vuex","permalink":"http://example.com/tags/vuex/"},{"name":"vuex æºç ","slug":"vuex-æºç ","permalink":"http://example.com/tags/vuex-%E6%BA%90%E7%A0%81/"},{"name":"vue","slug":"vue","permalink":"http://example.com/tags/vue/"},{"name":"å¤–æ–‡ç¿»è¯‘","slug":"å¤–æ–‡ç¿»è¯‘","permalink":"http://example.com/tags/%E5%A4%96%E6%96%87%E7%BF%BB%E8%AF%91/"},{"name":"Volar","slug":"Volar","permalink":"http://example.com/tags/Volar/"},{"name":"æ•°ç»„æ–¹æ³•","slug":"æ•°ç»„æ–¹æ³•","permalink":"http://example.com/tags/%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/"},{"name":"virtual-dom","slug":"virtual-dom","permalink":"http://example.com/tags/virtual-dom/"},{"name":"é—­åŒ…","slug":"é—­åŒ…","permalink":"http://example.com/tags/%E9%97%AD%E5%8C%85/"},{"name":"åŸå‹","slug":"åŸå‹","permalink":"http://example.com/tags/%E5%8E%9F%E5%9E%8B/"},{"name":"newçš„è¿‡ç¨‹","slug":"newçš„è¿‡ç¨‹","permalink":"http://example.com/tags/new%E7%9A%84%E8%BF%87%E7%A8%8B/"},{"name":"hexo","slug":"hexo","permalink":"http://example.com/tags/hexo/"},{"name":"å¿ƒæƒ…ç‰©è¯­","slug":"å¿ƒæƒ…ç‰©è¯­","permalink":"http://example.com/tags/%E5%BF%83%E6%83%85%E7%89%A9%E8%AF%AD/"}]}